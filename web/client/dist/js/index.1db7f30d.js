(function(e){function t(t){for(var o,i,s=t[0],n=t[1],d=t[2],p=0,m=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(l,i)&&l[i]&&m.push(l[i][0]),l[i]=0;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);c&&c(t);while(m.length)m.shift()();return r.push.apply(r,d||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],o=!0,s=1;s<a.length;s++){var n=a[s];0!==l[n]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var o={},l={index:0},r=[];function i(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=o,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(a,o,function(t){return e[t]}.bind(null,o));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],n=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var c=n;r.push([0,"chunk-vendors","chunk-common"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var o=a("08a0"),l=a.n(o);l.a},"08a0":function(e,t,a){},"0a4a":function(e,t,a){},"0a67":function(e,t,a){"use strict";var o=a("8172"),l=a.n(o);l.a},"0c35":function(e,t,a){"use strict";var o=a("523f"),l=a.n(o);l.a},"1eed":function(e,t,a){"use strict";var o=a("319d"),l=a.n(o);l.a},2301:function(e,t,a){},2541:function(e,t,a){"use strict";var o=a("5793"),l=a.n(o);l.a},"28e5":function(e,t,a){},"2a97":function(e,t,a){},"319d":function(e,t,a){},"3e1a":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ZDFiOTQyYS0zZWUyLTkxNGQtOTBiYS1iZTVkYzNjOTU1OTAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzZBQzM5NkM2MUUwMTFFQUE2QjFBQzg4RDAwMDRCRDQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzZBQzM5NkI2MUUwMTFFQUE2QjFBQzg4RDAwMDRCRDQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjEwODNhYzItNzY4Yy02MjRkLWEyYWMtYTFiMTdmOTZhZmZhIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6NzRmMzZhYTgtODFhOC04ZTQ5LWExN2UtMDI2MDYwMWE2ZGMwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+FAOt6wAAAWlJREFUeNrsWUEOwiAQhIY3mNSLj/CqD/DiyR9YX2X8gScP+gD16CM8WBs/gTRBU5ulLlCgVTbZNC2ddroMC0sp55z0yRLSM+sdYWYKXO+u5WEmfCM8RcLuwpfCD6v5KEiEdcgSee8mSIQrBMj2MqCYmxfjB9f8QKcaLuWRC+c1z2Vb5wadSh7WMnBFODVsi3k4Eu4K4XtDW9FFwpmC2E3ObmGnZsD2bWYDV4RLGaRyBsNaEVISmSYBa3kwRzJ4RZy2LQnadsUhl51vwqbLyJ/Jw8oIy0iZmrUkVD3DkC+2Ja4dyL+r6agnSfCfG3T9zBINGYEHkgRVZY7kSwFZfZCqoISwdRwWC+E+sK8I55qbIcPKuTesiPCQ6ewvVPcVyu6RUvKKhQbdEeiSIzIKzrEQ4QnyGgmBjXk4EkYQPgHXzsjnOcdCi5+pRQCcY5lB9VtYVM7W2ESz+oWqXq9YGn97RcKRsF97CjAAb0qmeUJR5DMAAAAASUVORK5CYII="},4508:function(e,t,a){},"4d18":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ZDFiOTQyYS0zZWUyLTkxNGQtOTBiYS1iZTVkYzNjOTU1OTAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzY2QzI2NEY2MUUwMTFFQUE2QjFBQzg4RDAwMDRCRDQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzY2QzI2NEU2MUUwMTFFQUE2QjFBQzg4RDAwMDRCRDQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjEwODNhYzItNzY4Yy02MjRkLWEyYWMtYTFiMTdmOTZhZmZhIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6NzRmMzZhYTgtODFhOC04ZTQ5LWExN2UtMDI2MDYwMWE2ZGMwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+5sw1KwAAAedJREFUeNpi/P//P8NQAkwMQwyMOnjUwWiAhRLNszc9ROayAXEGEEcCsQ5U7AoQLwfiGUD8C6Yw1U9+YByMBKSBeAsQG6CJW0BxIhD7APHTwZAk2JAcexuIQ4BYAIpDoGIgua1AzD4YHJwOddBNIDYD4rVA/BGK10LFQHL6QJxGqWWM2CoOtLRJCByHRnswEK/DoSYI6vgTQGxJrMHY0joTnmieCMTvgPg/AWwB1bMWj5q1SGmakHnvoHazkZLpuoA4b4BKLkGo3d+BuIJYB8dCads1Z8WO0NO1IcavbIDUYVCKwOZgXElCCERAHesJxM+IiEpKMcgOT6QAEiK3lJgLxJJ0CFxJqF0UF2uSdEwRktRw8GjjZ9TBQ715yThkHAwsxDHEgOUkA6l6BkOSOIyl4D88KJIEjhC1wSVGKAaIqJqpEsLoIYoLUFI1Hx5qpQQjtUoJcKsNS0gOSInCQmqagqbRI1jS8VF6lBLk9pptiVVI7WKQhdq5GE+mRY+RI6R4nNJijVRAdDFIq2KNVExMMTharFECqFYMstAok9GsGGShU3TbUssgXA5+B+1m20BDh2aNGSzAGskNRGe6xVQqHcjBsACaQ0oIl0EzRCx06Iie4D00wGqx5tLRaa9RB486mL4AIMAA17Dgy9SYTKQAAAAASUVORK5CYII="},"4dec":function(e,t,a){"use strict";var o=a("ca5f"),l=a.n(o);l.a},"523f":function(e,t,a){},"523fb":function(e,t,a){"use strict";var o=a("fc15"),l=a.n(o);l.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("a026"),l=(a("42a1"),a("b3f5"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("app-header"),a("keep-alive",[a("router-view",{staticClass:"main-width"})],1)],1)}),r=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app_index__header"},[a("div",{staticClass:"main-width"},[a("h1",{staticClass:"hidden"},[e._v("TAF")]),a("div",{staticClass:"logo-wrap"},[a("a",{class:{active:"true"===e.dcache},attrs:{href:"/"}},[a("img",{staticClass:"logo",attrs:{src:"/static/img/taf-logo.png"}})]),"true"===e.dcache?a("a",{attrs:{href:"/dcache.html"}},[a("img",{staticClass:"logo",attrs:{alt:"dcache",src:"/static/img/dcache-logo.png"}})]):e._e()]),a("let-tabs",{staticClass:"tabs",attrs:{center:!0,activekey:e.$route.matched[0].path},on:{click:e.clickTab}},[a("let-tab-pane",{attrs:{tab:e.$t("header.tab.tab1"),tabkey:"/server",icon:e.serverIcon}}),a("let-tab-pane",{attrs:{tab:e.$t("header.tab.tab2"),tabkey:"/operation",icon:e.opaIcon}}),a("let-tab-pane",{attrs:{tab:e.$t("header.tab.tab6"),tabkey:"/base",icon:e.cacheIcon}})],1),a("div",{staticClass:"language-wrap"},[a("let-select",{attrs:{clearable:!1},on:{change:e.changeLocale},model:{value:e.locale,callback:function(t){e.locale=t},expression:"locale"}},[e._l(e.localeMessages,(function(t){return[a("let-option",{key:t.localeCode,attrs:{value:t.localeCode}},[e._v(e._s(t.localeName))])]}))],2)],1),a("div",{staticClass:"user-wrap"},[a("p",{staticClass:"user-info",on:{click:function(t){e.userOptOpen=!e.userOptOpen}}},[a("span",{staticClass:"name toe"},[e._v(e._s(e.uid)+" ")]),a("i",{directives:[{name:"show",rawName:"v-show",value:e.enableLogin,expression:"enableLogin"}],staticClass:"let-icon let-icon-caret-down",class:{up:e.userOptOpen}}),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.enableLogin&&e.userOptOpen,expression:"enableLogin && userOptOpen"}],staticClass:"user-pop-wrap"},[a("div",[a("a",{attrs:{href:"#"},on:{click:e.userCenter}},[e._v(e._s(e.$t("header.userCenter")))])]),a("div",[a("a",{attrs:{href:"/logout"}},[e._v(e._s(e.$t("header.logout")))])])])])],1)])],1)])},s=[],n=(a("ac1f"),a("5319"),a("1817")),d=a.n(n),c=a("1ca6"),p=a.n(c),m=a("4d18"),u=a.n(m),h=a("cc08"),v=a.n(h),f=a("3e1a"),S=a.n(f),b=a("f51c"),$={data:function(){return{serverIcon:d.a,opaIcon:p.a,releaseIcon:u.a,cacheIcon:v.a,operatorIcon:S.a,locale:this.$cookie.get("locale")||"cn",uid:"--",userOptOpen:!1,enableLogin:!1,isAdmin:!1,localeMessages:b["c"],dcache:this.$cookie.get("dcache")||"false"}},methods:{clickTab:function(e){this.$router.replace(e)},userCenter:function(){window.open("/pages/server/api/userCenter")},getLoginUid:function(){var e=this;this.$ajax.getJSON("/server/api/get_login_uid").then((function(t){t&&t.uid?e.uid=t.uid:e.uid="***"})).catch((function(t){e.$tip.error("获取用户登录信息: ".concat(t.err_msg||t.message))}))},changeLocale:function(){this.$cookie.set("locale",this.locale,{expires:"1Y"}),location.reload()},checkEnableLogin:function(){var e=this;this.$ajax.getJSON("/server/api/is_enable_login").then((function(t){e.enableLogin=t.enableLogin||!1})).catch((function(e){}))},checkAdmin:function(){var e=this;this.isAdmin=!1,this.$ajax.getJSON("/server/api/is_admin").then((function(t){e.isAdmin=t.admin})).catch((function(e){}))}},mounted:function(){this.getLoginUid(),this.checkEnableLogin(),this.checkAdmin(),window.header=this}},_=$,w=(a("a8f5"),a("2877")),g=Object(w["a"])(_,i,s,!1,null,null,null),y=g.exports,M={name:"App",components:{AppHeader:y}},k=M,N=(a("034f"),Object(w["a"])(k,l,r,!1,null,null,null)),x=N.exports,A=a("8c4f"),T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-page"},[a("h1",{staticClass:"top-title"},[e._v(" "+e._s(e.$t("login.loginTitle"))+" ")]),a("let-form",{ref:"form",attrs:{inline:"","label-position":"top",itemWidth:"440px"},nativeOn:{submit:function(t){return t.preventDefault(),e.login(t)}}},[a("let-form-item",{attrs:{label:e.$t("login.userName"),required:""}},[a("let-input",{attrs:{size:"small",required:"","required-tip":e.$t("login.userNameTips"),pattern:"^[a-zA-Z0-9_]+$","pattern-tip":e.$t("login.userNameRegTips")},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.uid,callback:function(t){e.uid=t},expression:"uid"}})],1),a("let-form-item",{attrs:{label:e.$t("login.password"),required:""}},[a("let-input",{attrs:{type:"password",size:"small",required:"","required-tip":e.$t("login.passwordTips")},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("let-button",{attrs:{type:"submit",theme:"primary"}},[e._v(e._s(e.$t("login.login")))])],1)],1)},C=[],L=(a("4160"),a("841c"),a("1276"),a("159b"),{name:"loginPage",data:function(){return{uid:"admin",password:"admin"}},computed:{redirectUrl:function(){return this.getQueryParam("redirect_url","/")}},components:{},methods:{hideHeader:function(){this.$root.$el.children[0].style.display="none"},showHeader:function(){this.$root.$el.children[0].style.display="block"},login:function(){if(this.$refs.form.validate()){var e=this.$Loading.show();"admin"===this.uid&&"admin"===this.password?(e.hide(),this.showHeader(),this.$router.replace("server")):(e.hide(),this.$tip.error("登录失败：帐号或密码错误"))}},getQueryParam:function(e,t){if(!e)return t;var a=t,o=window.location.search?window.location.search.substr(1):"";return o&&o.split("&").forEach((function(t){var o=t.split("=");o[0]==e&&(a=decodeURIComponent(o[1]))})),a}},mounted:function(){this.hideHeader()}}),I=L,q=(a("f47f"),Object(w["a"])(I,T,C,!1,null,null,null)),D=q.exports,O=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"page_server"},[o("div",{staticClass:"left-view"},[o("div",{staticClass:"tree_wrap"},[e.treeData&&e.treeData.length?o("let-tree",{staticClass:"left-tree",attrs:{data:e.treeData,activeKey:e.treeid},on:{"on-select":e.selectTree}}):e._e(),e.treeData&&!e.treeData.length?o("div",{staticClass:"left-tree"},[o("p",{staticClass:"loading"},[e._v(e._s(e.$t("common.noService")))])]):e._e(),e.treeData?e._e():o("div",{ref:"treeLoading",staticClass:"left-tree"},[!1===e.treeData?o("div",{staticClass:"loading"},[o("p",[e._v(e._s(e.treeErrMsg))]),o("a",{attrs:{href:"javascript:;"},on:{click:e.getTreeData}},[e._v(e._s(e.$t("common.reTry")))])]):e._e()])],1)]),e.treeid?o("div",{staticClass:"right-view"},[o("div",{staticClass:"btabs_wrap"},[o("ul",{directives:[{name:"vscroll",rawName:"v-vscroll"}],ref:"btabs",staticClass:"btabs"},e._l(e.BTabs,(function(t){return o("li",{key:t.id,staticClass:"btabs_item",class:{active:t.id===e.treeid}},[o("a",{staticClass:"btabs_link",attrs:{href:"javascript:;"},on:{click:function(a){return e.clickBTabs(a,t.id)}}},[e._v(e._s(t.id))]),o("a",{staticClass:"btabs_close",attrs:{href:"javascript:;"},on:{click:function(a){return e.closeBTabs(t.id)}}},[e._v("关闭")])])})),0),o("a",{staticClass:"btabs_all",attrs:{href:"javascript:;",title:"关闭全部"},on:{click:e.closeAllBTabs}},[e._v("关闭全部")])]),o("div",{staticClass:"btabs_con"},e._l(e.BTabs,(function(t){return o("div",{directives:[{name:"show",rawName:"v-show",value:t.id===e.treeid,expression:"item.id === treeid"}],key:t.id,staticClass:"btabs_con_item"},[o("let-tabs",{attrs:{activekey:t.path},on:{click:e.clickTab}},[o("let-tab-pane",{attrs:{tabkey:e.base+"/manage",tab:e.$t("header.tab.tab1")}}),o("let-tab-pane",{attrs:{tabkey:e.base+"/history",tab:e.$t("header.tab.tab7")}}),5===e.serverData.level?o("let-tab-pane",{attrs:{tabkey:e.base+"/publish",tab:e.$t("index.rightView.tab.patch")}}):e._e(),5===e.serverData.level||4===e.serverData.level||1===e.serverData.level?o("let-tab-pane",{attrs:{tabkey:e.base+"/config",tab:5===e.serverData.level?e.$t("index.rightView.tab.serviceConfig"):4===e.serverData.level?e.$t("index.rightView.tab.setConfig"):1===e.serverData.level?e.$t("index.rightView.tab.appConfig"):""}}):e._e(),5===e.serverData.level?o("let-tab-pane",{attrs:{tabkey:e.base+"/server-monitor",tab:e.$t("index.rightView.tab.statMonitor")}}):e._e(),5===e.serverData.level?o("let-tab-pane",{attrs:{tabkey:e.base+"/property-monitor",tab:e.$t("index.rightView.tab.propertyMonitor")}}):e._e(),5===e.serverData.level&&e.enableAuth?o("let-tab-pane",{attrs:{tabkey:e.base+"/user-manage",tab:e.$t("index.rightView.tab.privileage")}}):e._e()],1),o(e.getName(t.path),{ref:"childView",refInFor:!0,tag:"router-view",staticClass:"page_server_child",attrs:{treeid:t.id}})],1)})),0)]):o("div",{staticClass:"right-view"},[o("div",{staticClass:"empty"},[o("img",{staticClass:"package",attrs:{src:a("4824")}}),o("p",{staticClass:"title"},[e._v(e._s(e.$t("index.rightView.title")))]),o("p",{staticClass:"notice",domProps:{innerHTML:e._s(e.$t("index.rightView.tips"))}})])])])},K=[],z=(a("c975"),a("baa5"),a("a434"),a("b0c0"),a("e84a")),j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_server_publish"},[e.showHistory?e._e():a("div",[a("let-table",{ref:"table",attrs:{data:e.totalServerList,title:e.$t("serverList.title.patchList"),"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:e.$t("deployService.form.app"),prop:"ServerApp"}}),a("let-table-column",{attrs:{title:e.$t("deployService.form.serviceName"),prop:"ServerName"}}),a("let-table-column",{attrs:{title:e.$t("serverList.table.th.version"),prop:"ServiceVersion"}}),a("let-table-column",{attrs:{title:e.$t("serverList.table.th.currStatus")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:e.getState(t.row.Enabled)})]}}],null,!1,3452785266)}),a("let-table-column",{attrs:{title:e.$t("deployService.form.serviceMark"),prop:"ServiceMark"}}),a("let-table-column",{attrs:{title:e.$t("serverList.table.th.createPerson"),prop:"CreatePerson"}}),a("let-table-column",{attrs:{title:e.$t("serverList.table.th.createTime"),prop:"CreateTime"}})],1),a("div",{staticStyle:{overflow:"hidden"},attrs:{slot:"operations"},slot:"operations"},[a("let-pagination",{staticStyle:{float:"right"},attrs:{align:"right",page:e.pagination.page,total:e.pagination.total},on:{change:e.gotoPage}}),a("div",{staticClass:"btn_group",staticStyle:{float:"left"}},[a("let-button",{attrs:{theme:"primary",size:"small"},on:{click:e.showUploadModal}},[e._v(e._s(e.$t("pub.dlg.upload")))]),a("let-button",{attrs:{theme:"primary",size:"small"},on:{click:e.openPublishVersionModal}},[e._v(e._s(e.$t("pub.btn.pub")))])],1)],1),a("let-modal",{attrs:{title:e.$t("index.rightView.tab.patch"),width:"880px",footShow:!1},on:{close:e.closePublishModal,"on-confirm":e.savePublishServer},model:{value:e.publishModal.show,callback:function(t){e.$set(e.publishModal,"show",t)},expression:"publishModal.show"}},[e.publishModal.model?a("let-form",{ref:"publishForm",attrs:{itemWidth:"100%"}},[e.publishModal.model.show?[a("let-form-item",{attrs:{label:e.$t("pub.dlg.releaseVersion"),required:""}},[a("let-select",{attrs:{size:"small",required:"","required-tip":e.$t("pub.dlg.ab")},model:{value:e.publishModal.model.ServiceId,callback:function(t){e.$set(e.publishModal.model,"ServiceId",t)},expression:"publishModal.model.ServiceId"}},e._l(e.publishModal.model.patchList,(function(t){return a("let-option",{key:t.ServiceId,attrs:{value:t.ServiceId}},[""+t.Enabled==="true"?a("i",{staticClass:"let-icon let-icon-gou let-tag_success"}):e._e(),a("span",[e._v(e._s(t.ServiceVersion)+" | "+e._s(t.CreateTime)+" | "+e._s(t.ServiceImage))])])})),1)],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.replicas")}},[a("let-input",{attrs:{size:"small",type:"number",min:1,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.publishModal.model.Replicas,callback:function(t){e.$set(e.publishModal.model,"Replicas",t)},expression:"publishModal.model.Replicas"}})],1),a("let-form-item",{attrs:{label:e.$t("serverList.servant.comment")}},[a("let-input",{model:{value:e.publishModal.model.EnableMark,callback:function(t){e.$set(e.publishModal.model,"EnableMark",t)},expression:"publishModal.model.EnableMark"}}),a("let-button",{staticClass:"mt20",attrs:{theme:"primary",size:"small"},on:{click:e.savePublishServer}},[e._v(e._s(e.$t("common.patch")))])],1)]:[a("let-form-item",{attrs:{label:e.$t("serverList.table.th.version")}},[a("let-select",{attrs:{size:"small",required:"","required-tip":e.$t("deployService.table.tips.empty"),requred:""},model:{value:e.tagVersion,callback:function(t){e.tagVersion=t},expression:"tagVersion"}},e._l(e.tagList,(function(t){return a("let-option",{key:""+t.version,attrs:{value:t.path+"--"+t.version}},[e._v(e._s(t.version))])})),1),a("let-button",{staticClass:"mt10",attrs:{theme:"primary",size:"small"},on:{click:e.addCompileTask}},[e._v(e._s(e.$t("pub.dlg.compileAndPublish")))]),e._e()],1)]],2):e._e()],1),a("let-modal",{attrs:{title:e.$t("pub.dlg.upload"),width:"880px",footShow:!1},on:{"on-cancel":e.closeUploadModal},model:{value:e.uploadModal.show,callback:function(t){e.$set(e.uploadModal,"show",t)},expression:"uploadModal.show"}},[e.uploadModal.model?a("let-form",{ref:"uploadForm",attrs:{itemWidth:"100%"},nativeOn:{submit:function(t){return t.preventDefault(),e.uploadPatchPackage(t)}}},[a("let-form-item",{attrs:{label:e.$t("pub.dlg.releasePkg"),itemWidth:"400px"}},[a("let-uploader",{attrs:{placeholder:e.$t("pub.dlg.defaultValue")},on:{upload:e.uploadFile}},[e._v(e._s(e.$t("common.submit"))+" ")]),e.uploadModal.model.file?a("span",[e._v(e._s(e.uploadModal.model.file.name))]):e._e()],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceType"),required:""}},[a("let-select",{attrs:{size:"small",required:"","required-tip":e.$t("deployService.form.serviceTypeTips")},model:{value:e.uploadModal.model.ServerType,callback:function(t){e.$set(e.uploadModal.model,"ServerType",t)},expression:"uploadModal.model.ServerType"}},e._l(e.serverType,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("serverList.servant.comment")}},[a("let-input",{attrs:{type:"textarea",rows:3},model:{value:e.uploadModal.model.comment,callback:function(t){e.$set(e.uploadModal.model,"comment",t)},expression:"uploadModal.model.comment"}})],1),a("let-button",{attrs:{type:"submit",theme:"primary"}},[e._v(e._s(e.$t("serverList.servant.upload")))])],1):e._e()],1),a("let-modal",{attrs:{title:e.$t("serverList.table.th.result"),width:"880px",footShow:!1},on:{"on-cancel":e.closeFinishModal},model:{value:e.finishModal.show,callback:function(t){e.$set(e.finishModal,"show",t)},expression:"finishModal.show"}},[e.finishModal.model?a("let-table",{attrs:{title:e.$t("serverList.servant.taskID")+": "+e.finishModal.model.task_no,data:e.finishModal.model.items}},[a("let-table-column",{attrs:{title:e.$t("serverList.table.th.buildID"),prop:"BuildId"}}),a("let-table-column",{attrs:{title:e.$t("serverList.table.th.buildTime"),width:"180"}},[e._v(" "+e._s(e.formatDate(new Date,"YYYY-MM-DD HH:mm:ss"))+" ")]),a("let-table-column",{attrs:{title:e.$t("common.status")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-tag",{staticStyle:{"margin-right":"15px","white-space":"nowrap"},attrs:{theme:"done"===t.row.BuildStatus?"success":"error"===t.row.BuildStatus?"danger":"",checked:""}},[e._v(" "+e._s(t.row.BuildMessage||t.row.BuildStatus)+" ")])]}}],null,!1,2043324653)})],1):e._e()],1)],1),e.showHistory?a("div",[a("let-form",{attrs:{inline:"",itemWidth:"300px"},nativeOn:{submit:function(t){return t.preventDefault(),e.getHistoryList(t)}}},[a("let-form-item",{attrs:{label:e.$t("pub.date")}},[a("let-date-range-picker",{attrs:{start:e.startTime,end:e.endTime},on:{"update:start":function(t){e.startTime=t},"update:end":function(t){e.endTime=t}}})],1),a("let-form-item",[a("let-button",{attrs:{type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.search")))])],1)],1),e.totalHistoryList&&e.totalHistoryList.length>0?a("let-table",{ref:"historyTable",attrs:{data:e.totalHistoryList,title:e.$t("historyList.title"),"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:e.$t("serverList.servant.taskID"),prop:"task_no"}}),a("let-table-column",{attrs:{title:e.$t("historyList.table.th.c2")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.serial?e.$t("common.yes"):e.$t("common.no")))])]}}],null,!1,2981378477)}),a("let-table-column",{attrs:{title:e.$t("serverList.dlg.title.taskStatus")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.statusMap[t.row.status]||"-"))])]}}],null,!1,3973050033)}),a("let-table-column",{attrs:{title:e.$t("historyList.table.th.c4")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.viewTask(t.row.task_no)}}},[e._v(e._s(e.$t("operate.view")))])]}}],null,!1,1853944e3)}),a("let-pagination",{attrs:{slot:"pagination",align:"right",total:e.historyTotalPage,page:e.historyPage},on:{change:e.changeHistoryPage},slot:"pagination"}),a("div",{staticStyle:{"margin-left":"-15px"},attrs:{slot:"operations"},slot:"operations"},[a("let-button",{attrs:{theme:"primary",size:"small"},on:{click:function(t){e.showHistory=!1}}},[e._v(e._s(e.$t("operate.goback")))])],1)],1):e._e(),a("let-modal",{attrs:{title:e.$t("historyList.table.th.c4"),width:"880px",footShow:!1},on:{"on-cancel":function(t){e.taskModal.show=!1}},model:{value:e.taskModal.show,callback:function(t){e.$set(e.taskModal,"show",t)},expression:"taskModal.show"}},[e.taskModal.model?a("let-table",{attrs:{data:e.taskModal.model.items}},[a("let-table-column",{attrs:{title:e.$t("historyList.dlg.th.c1"),prop:"item_no"}}),a("let-table-column",{attrs:{title:e.$t("historyList.dlg.th.c2"),prop:"application"}}),a("let-table-column",{attrs:{title:e.$t("historyList.dlg.th.c3"),prop:"server_name"}}),a("let-table-column",{attrs:{title:e.$t("historyList.dlg.th.c4"),prop:"node_name"}}),a("let-table-column",{attrs:{title:e.$t("historyList.dlg.th.c5"),prop:"command"}}),a("let-table-column",{attrs:{title:e.$t("monitor.search.start"),prop:"start_time"}}),a("let-table-column",{attrs:{title:e.$t("monitor.search.end"),prop:"end_time"}}),a("let-table-column",{attrs:{title:e.$t("common.status"),prop:"status_info"}}),a("let-table-column",{attrs:{title:e.$t("historyList.dlg.th.c7"),prop:"execute_info"}})],1):e._e()],1)],1):e._e(),a("let-modal",{attrs:{title:e.$t("pub.dlg.conf"),width:"800px",footShow:!0},on:{"on-confirm":e.saveCompilerUrl,"on-cancel":function(t){e.publishUrlConfModal.show=!1}},model:{value:e.publishUrlConfModal.show,callback:function(t){e.$set(e.publishUrlConfModal,"show",t)},expression:"publishUrlConfModal.show"}},[e.publishUrlConfModal.model?a("let-form",{ref:"compilerForm",attrs:{itemWidth:"100%",required:""}},[a("let-form-item",{attrs:{label:e.$t("pub.dlg.tag")}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("pub.tips.tag"),"required-tip":e.$t("deployService.table.tips.empty"),required:""},model:{value:e.publishUrlConfModal.model.tag,callback:function(t){e.$set(e.publishUrlConfModal.model,"tag",t)},expression:"publishUrlConfModal.model.tag"}})],1)],1):e._e()],1),a("let-modal",{attrs:{title:e.$t("pub.dlg.compileProgress"),width:"880px",footShow:!1},model:{value:e.compilerModal.show,callback:function(t){e.$set(e.compilerModal,"show",t)},expression:"compilerModal.show"}},[e.compilerModal.model?a("let-table",{attrs:{data:e.compilerModal.model.progress}},[a("let-table-column",{attrs:{title:e.$t("historyList.dlg.th.c2"),prop:"application"}}),a("let-table-column",{attrs:{title:e.$t("historyList.dlg.th.c3"),prop:"server_name"}}),a("let-table-column",{attrs:{title:e.$t("historyList.dlg.th.c4"),prop:"node"}}),a("let-table-column",{attrs:{title:e.$t("historyList.dlg.th.c8"),prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==t.row.state?a("span",{staticClass:"running"},[e._v(e._s(t.row.status))]):"2"==t.row.state?a("span",{staticClass:"success"},[e._v(e._s(t.row.status))]):a("span",{staticClass:"stop"},[e._v(e._s(t.row.status))])]}}],null,!1,3193835083)}),a("let-table-column",{attrs:{title:e.$t("monitor.search.start"),prop:"start_time"}}),a("let-table-column",{attrs:{title:e.$t("monitor.search.end"),prop:"end_time"}})],1):e._e()],1)],1)},P=[],B=(a("99af"),a("a15b"),a("d81d"),a("fb6a"),a("b64b"),a("2699")),R={name:"ServerPublish",data:function(){return{activeKey:"",treeData:[],totalServerList:[],serverList:[],isCheckedAll:!1,pagination:{page:1,size:10,total:1},publishModal:{show:!1,model:{patchList:[]}},finishModal:{show:!1,model:{task_no:"",items:[]}},serverK8S:{},serverType:[],statusConfig:{0:this.$t("serverList.restart.notStart"),1:this.$t("serverList.restart.running"),2:this.$t("serverList.restart.success"),3:this.$t("serverList.restart.failed"),4:this.$t("serverList.restart.cancel"),5:this.$t("serverList.restart.parial")},statusMap:{0:"EM_T_NOT_START",1:"EM_T_RUNNING",2:"EM_T_SUCCESS",3:"EM_T_FAILED",4:"EM_T_CANCEL",5:"EM_T_PARIAL"},showHistory:!1,startTime:"",endTime:"",totalHistoryList:[],historyList:[],historyTotalPage:0,historyPage:1,historyPageSize:20,taskModal:{show:!1,modal:!0},uploadModal:{show:!1,model:null},patchType:"patch",patchRadioData:[{value:"patch",text:this.$t("pub.dlg.upload")}],tagList:[],tagVersion:"",publishUrlConfModal:{show:!1,model:{tag:"",compiler:"",task:""}},compilerModal:{show:!1,model:null},pkgUpload:{show:!1,model:null}}},props:["treeid"],methods:{getServerId:function(){return this.treeid},getServerType:function(){return this.$ajax.getJSON("/server/api/server_list",{ServerId:this.getServerId()})},getDefault:function(){var e=this;this.$ajax.getJSON("/server/api/default").then((function(t){e.serverK8S=t.ServerK8S||{},e.serverType=t.ServerTypeOptional||[]}))},getState:function(e){var t="";switch("".concat(e)){case"true":t="status-active";break}return t},formatDate:function(e,t){return Object(B["b"])(e,"YYYY-MM-DD HH:mm:ss")},getCompileConf:function(){var e=this;this.$ajax.getJSON("/server/api/get_compile_conf").then((function(t){t.enable&&e.patchRadioData.push({value:"compile",text:e.$t("pub.dlg.compileAndPublish")})})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},getServerList:function(){var e=this;this.$ajax.getJSON("/server/api/patch_list",{ServerId:this.getServerId(),page:this.pagination.page,size:this.pagination.size}).then((function(t){t.hasOwnProperty("Data")&&e.getPatchEnabled().then((function(a){var o=t.Data||[];e.pagination.total=Math.ceil(t.Count.FilterCount/e.pagination.size),a.hasOwnProperty("Data")&&o.forEach((function(e){"".concat(e.ServiceId)==="".concat(a.Data[0].ServiceId)&&(e.Enabled=!0)})),e.totalServerList=o,e.totalPage=Math.ceil(e.totalServerList.length/e.pageSize),e.page=1,e.updateServerList()})).catch((function(t){e.$confirm(t.err_msg||t.message||e.$t("serverList.table.msg.fail")).then((function(){e.getServerList()}))}))})).catch((function(t){e.$confirm(t.err_msg||t.message||e.$t("serverList.table.msg.fail")).then((function(){e.getServerList()}))}))},gotoPage:function(e){this.pagination.page=e,this.getServerList()},openPublishVersionModal:function(){var e=this,t=this.getServerId();this.publishModal.model={ServerId:t,Replicas:this.serverK8S.Replicas||1,show:!0},this.getPatchList(t,1,50).then((function(t){e.getK8SData().then((function(t){e.publishModal.model.Replicas=t[0].Replicas||e.serverK8S.Replicas||1})),t.hasOwnProperty("Data")&&e.getPatchEnabled().then((function(a){a.hasOwnProperty("Data")&&t.Data.forEach((function(e){"".concat(e.ServiceId)==="".concat(a.Data[0].ServiceId)&&(e.Enabled=!0)})),e.publishModal.model.patchList=t.Data,window.setTimeout((function(){return e.publishModal.show=!0}),300)}))}))},getPatchList:function(e,t,a){return this.$ajax.getJSON("/server/api/patch_list",{ServerId:e,curr_page:t,page_size:a})},getPatchEnabled:function(){return this.$ajax.getJSON("/server/api/patch_enabled",{ServerId:this.getServerId()})},getK8SData:function(){return this.$ajax.getJSON("/server/api/server_k8s_select",{ServerId:this.getServerId()})},closePublishModal:function(){this.publishModal.show=!1,this.publishModal.modal=null,this.patchType="patch",this.$refs.publishForm.resetValid()},savePublishServer:function(){var e=this,t=this.$Loading.show();this.$refs.publishForm.validate()&&(t.hide(),this.$ajax.postJSON("/server/api/patch_publish",{ServerId:this.publishModal.model.ServerId,ServiceId:this.publishModal.model.ServiceId,Replicas:this.publishModal.model.Replicas,EnableMark:this.publishModal.model.EnableMark}).then((function(a){t.hide(),e.getServerList(),e.closePublishModal()})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))})))},closeFinishModal:function(){this.finishModal.show=!1,this.finishModal.modal=null,this.$refs.finishForm.resetValid()},getTaskRepeat:function(e){var t,a=this,o=e.ServerId,l=e.ServerType,r=e.BuildId,i=e.ServiceImage,s=e.CreateMark;t&&clearTimeout(t);var n=function e(){a.$ajax.getJSON("/server/api/patch_upload_status",{ServerId:o,ServerType:l,BuildId:r,ServiceImage:i,CreateMark:s}).then((function(o){var l=!0;"working"===o.BuildStatus&&(l=!1),l?(clearTimeout(t),a.getServerList()):t=setTimeout(e,2e3),a.finishModal.model.items=[o]})).catch((function(e){clearTimeout(t),a.$tip.error("".concat(a.$t("common.error"),": ").concat(e.message||e.err_msg))}))};n()},updateServerList:function(){var e=(this.page-1)*this.pageSize,t=this.page*this.pageSize;this.serverList=this.totalServerList.slice(e,t)},updateServerInfo:function(e){this.$ajax.postJSON("/server/api/server_update",{ServerId:e.ServerId,ServerType:e.ServerType,ServerMark:e.ServerMark})},gotoHistory:function(){this.showHistory=!0,this.getHistoryList(1)},getHistoryList:function(e){var t=this;"number"!=typeof e&&(e=1);var a=this.$Loading.show(),o={application:this.serverList[0].application||"",server_name:this.serverList[0].server_name||"",from:this.startTime,to:this.endTime,page_size:this.historyPageSize,curr_page:e};this.historyPage=e,this.$ajax.getJSON("/server/api/task_list",o).then((function(e){a.hide(),t.totalHistoryList=e.rows||[],t.historyTotalPage=Math.ceil(e.Count/t.historyPageSize)})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))},viewTask:function(e){var t=this;this.$ajax.getJSON("/server/api/task",{task_no:e}).then((function(e){t.taskModal.model=e,t.taskModal.show=!0}))},changeHistoryPage:function(e){this.getHistoryList(e)},showUploadModal:function(){var e=this;this.getServerType().then((function(t){var a=e.getServerId();e.uploadModal.model={ServerId:a,file:null,ServerMark:"",ServerType:t.Data[0].ServerType},e.uploadModal.show=!0}))},closeUploadModal:function(){this.uploadModal.show=!1,this.uploadModal.model=null,this.$refs.uploadForm.resetValid()},uploadFile:function(e){this.uploadModal.model.file=e},uploadPatchPackage:function(){var e=this,t=this.getServerId();if(this.$refs.uploadForm.validate()){var a=this.$Loading.show(),o=new FormData;o.append("ServerId",t),o.append("ServerType",this.uploadModal.model.ServerType),o.append("suse",this.uploadModal.model.file),this.$ajax.postForm("/server/api/patch_upload",o).then((function(o){e.getPatchList(t,1,10).then((function(t){a.hide(),e.publishModal.model.patchList=t.Data,e.closeUploadModal()})),e.getServerList(),e.finishModal.model.task_no=o.data.BuildId,e.finishModal.show=!0,e.getTaskRepeat({ServerId:t,ServerType:e.uploadModal.model.ServerType,BuildId:o.data.BuildId,ServiceImage:o.data.BuildImage,CreateMark:e.uploadModal.model.comment})})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},handleNoPublishedTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.$t("pub.dlg.unpublished");return"0000:00:00 00:00:00"===e?t:e},patchChange:function(){"patch"==this.patchType?this.publishModal.model.show=!0:(this.publishModal.model.show=!1,this.getCodeVersion())},getCodeVersion:function(){var e=this;this.$ajax.get("/server/api/get_tag_list",{application:this.publishModal.model.application,server_name:this.publishModal.model.server_name}).then((function(t){""==t.data?e.openPubConfModal():e.tagList=t.data})).catch((function(t){e.tagList=[],e.$tip.error("".concat(e.$t("common.error"),": ").concat(err.err_msg||err.message))}))},openPubConfModal:function(){var e=this;this.publishUrlConfModal.show=!0,this.$ajax.getJSON("/server/api/get_tag_conf",{application:this.publishModal.model.application,server_name:this.publishModal.model.server_name}).then((function(t){e.publishUrlConfModal.model.tag=t.path})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.err_msg||t.message))}))},saveCompilerUrl:function(){var e=this;if(this.$refs.compilerForm.validate()){var t=this.$Loading.show();this.$ajax.getJSON("/server/api/set_tag_conf",{path:this.publishUrlConfModal.model.tag,application:this.publishModal.model.application,server_name:this.publishModal.model.server_name}).then((function(a){t.hide(),e.$tip.success(e.$t("common.success")),e.publishUrlConfModal.show=!1,e.getCodeVersion()})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.err_msg||a.message))}))}},addCompileTask:function(){var e=this;this.$ajax.getJSON("/server/api/get_compile_conf").then((function(t){var a=t.getVersionList;if(a){var o=e.publishModal.model.serverList.map((function(e){return e.node_name})),l={application:e.publishModal.model.application,server_name:e.publishModal.model.server_name,node:o.join(";"),path:e.tagVersion.split("--")[0],version:e.tagVersion.split("--")[1],comment:e.publishModal.model.update_text||"",compileUrl:a},r=e.$Loading.show();e.$ajax.postJSON("/server/api/do_compile",l).then((function(t){r.hide(),e.compilerModal.show=!0;var a="string"===typeof t?t:t.data;e.getStatus(a)})).catch((function(t){r.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.err_msg||t.message))}))}else e.openPubConfModal()})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.err_msg||t.message))}))},taskStatus:function(e){this.getStatus(e)},getStatus:function(e){var t=this,a=function a(){var o=null;o&&clearTimeout(o),t.$ajax.getJSON("/server/api/compiler_task",{taskNo:e}).then((function(l){var r="array"===typeof l?l:l.data;if(r[0].status=t.statusConfig[r[0].state],1==r[0].state&&(o=setTimeout(a,2e3)),t.compilerModal.model?Object.assign(t.compilerModal.model,{progress:r}):t.compilerModal.model={progress:r},2==r[0].state){var i=t.$Loading({text:"回传发布包"});i.show(),t.compilerModal.show=!1;var s=function a(){t.$ajax.getJSON("/server/api/get_server_patch",{task_id:e}).then((function(e){0!==Object.keys(e).length?(i.hide(),t.publishModal.model.patch_id=e.id,t.publishModal.show=!1,t.savePublishServer()):setTimeout(a,2e3)})).catch((function(e){i.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.err_msg||e.message))}))};setTimeout(s,2e3)}})).catch((function(e){t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.err_msg||e.message))}))};a()}},mounted:function(){this.getServerList(),this.getDefault()},watch:{isCheckedAll:function(){var e=this.isCheckedAll;this.serverList.forEach((function(t){t.isChecked=e}))},page:function(){this.updateServerList()}}},F=R,E=(a("523fb"),Object(w["a"])(F,j,P,!1,null,null,null)),W=E.exports,J=a("918a"),V=a("8d5c"),H=a("107e"),Z=a("575d"),U=a("a618"),G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_server_manage"},[e.serverList?a("let-table",{attrs:{data:e.serverList,title:e.$t("serverList.title.serverList"),"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:e.$t("deployService.form.app"),prop:"ServerApp"}}),a("let-table-column",{attrs:{title:e.$t("deployService.form.serviceName"),prop:"ServerName"}}),a("let-table-column",{attrs:{title:e.$t("serverList.table.th.podName"),prop:"PodName"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.gotoLog(t.row)}}},[e._v(e._s(t.row.PodName))])]}}],null,!1,2844911292)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.th.podIP"),prop:"PodIp"}}),a("let-table-column",{attrs:{title:e.$t("serverList.table.th.ip"),prop:"NodeIp"}}),a("let-table-column",{attrs:{title:e.$t("serverList.table.th.version"),prop:"ServiceVersion"}}),a("let-table-column",{attrs:{title:e.$t("serverList.table.th.createTime"),prop:"CreateTime"}}),a("let-table-column",{attrs:{title:e.$t("serverList.table.th.deleteTime"),prop:"DeleteTime"}})],1):e._e(),a("div",{staticStyle:{overflow:"hidden"}},[a("let-pagination",{staticStyle:{float:"right"},attrs:{align:"right",page:e.pagination.page,total:e.pagination.total},on:{change:e.gotoPage}})],1),e.serverNotifyList&&e.showOthers?a("let-table",{ref:"serverNotifyListLoading",attrs:{data:e.serverNotifyList,title:e.$t("serverList.title.serverStatus"),"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:e.$t("common.time"),prop:"notifytime"}}),a("let-table-column",{attrs:{title:e.$t("serverList.table.th.serviceID"),prop:"server_id"}}),a("let-table-column",{attrs:{title:e.$t("serverList.table.th.threadID"),prop:"thread_id"}}),a("let-table-column",{attrs:{title:e.$t("serverList.table.th.result"),prop:"result"}})],1):e._e(),a("let-modal",{attrs:{title:e.$t("serverList.dlg.title.editService"),width:"800px",footShow:!(!e.configModal.model||!e.configModal.model.ServerId)},on:{"on-confirm":e.saveConfig,close:e.closeConfigModal,"on-cancel":e.closeConfigModal},model:{value:e.configModal.show,callback:function(t){e.$set(e.configModal,"show",t)},expression:"configModal.show"}},[e.configModal.model&&e.configModal.model.ServerId?a("let-form",{ref:"configForm",staticClass:"two-columns",attrs:{itemWidth:"360px",columns:2}},[a("let-form-item",{attrs:{label:e.$t("common.template"),required:""}},[e.configModal.model.templates&&e.configModal.model.templates.length?a("let-select",{attrs:{size:"small",required:""},model:{value:e.configModal.model.ServerTemplate,callback:function(t){e.$set(e.configModal.model,"ServerTemplate",t)},expression:"configModal.model.ServerTemplate"}},e._l(e.configModal.model.templates,(function(t){return a("let-option",{key:t.TemplateName,attrs:{value:t.TemplateName}},[e._v(e._s(t.TemplateName))])})),1):a("span",[e._v(e._s(e.configModal.model.ServerTemplate))])],1),a("let-form-item",{attrs:{label:e.$t("serverList.dlg.asyncThread"),required:""}},[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("serverList.dlg.placeholder.thread"),required:"",pattern:"taf.nodejs"===e.configModal.model.server_type?"^[1-9][0-9]*$":"^([3-9]|[1-9][0-9]+)$","pattern-tip":"$t('serverList.dlg.placeholder.thread')"},model:{value:e.configModal.model.AsyncThread,callback:function(t){e.$set(e.configModal.model,"AsyncThread",t)},expression:"configModal.model.AsyncThread"}})],1),a("let-form-item",{attrs:{label:e.$t("serverList.dlg.privateTemplate"),labelWidth:"150px",itemWidth:"724px"}},[a("let-input",{attrs:{disabled:"",size:"large",type:"textarea",rows:4},model:{value:e.configModal.model.ServerProfile,callback:function(t){e.$set(e.configModal.model,"ServerProfile",t)},expression:"configModal.model.ServerProfile"}})],1)],1):a("div",{ref:"configFormLoading",staticClass:"loading-placeholder"})],1),a("let-modal",{attrs:{title:e.$t("serverList.table.servant.title"),width:"1200px",footShow:!1},on:{close:e.closeServantModal},model:{value:e.servantModal.show,callback:function(t){e.$set(e.servantModal,"show",t)},expression:"servantModal.show"}},[a("let-button",{staticClass:"tbm16",attrs:{size:"small",theme:"primary"},on:{click:function(t){return e.configServant()}}},[e._v(e._s(e.$t("operate.add"))+" Servant")]),e.servantModal.model?a("let-table",{attrs:{data:e.servantModal.model,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:"OBJ",prop:"Name"}}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.port"),prop:"Port"}}),a("let-table-column",{attrs:{title:e.$t("deployService.form.portType"),width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.IsTcp?a("let-radio",{attrs:{label:!0},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("TCP")]):a("let-radio",{attrs:{label:!1},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("UDP")])]}}],null,!1,2027518380)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.threads"),width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.Threads))]}}],null,!1,2683018496)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.connections"),width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.Connections))]}}],null,!1,192188376)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.capacity"),width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.Capacity))]}}],null,!1,4133537865)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.timeout"),width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.Timeout))]}}],null,!1,2137174470)}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.configServant(t.row.AdapterId)}}},[e._v(e._s(e.$t("operate.update")))]),a("let-table-operation",{staticClass:"danger",on:{click:function(a){return e.deleteServant(t.row.AdapterId)}}},[e._v(e._s(e.$t("operate.delete")))])]}}],null,!1,3217013684)})],1):a("div",{ref:"servantModalLoading",staticClass:"loading-placeholder"})],1),a("let-modal",{attrs:{title:e.servantDetailModal.isNew?e.$t("operate.title.add")+" Servant":e.$t("operate.title.update")+" Servant",width:"800px",footShow:!!e.servantDetailModal.model},on:{"on-confirm":e.saveServantDetail,close:e.closeServantDetailModal,"on-cancel":e.closeServantDetailModal},model:{value:e.servantDetailModal.show,callback:function(t){e.$set(e.servantDetailModal,"show",t)},expression:"servantDetailModal.show"}},[e.servantDetailModal.model?a("let-form",{ref:"servantDetailForm",staticClass:"two-columns",attrs:{itemWidth:"360px",columns:2}},[a("let-form-item",{attrs:{label:e.$t("serverList.servant.objName"),required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("serverList.servant.c"),required:"",pattern:"^[A-Za-z]+$","pattern-tip":e.$t("serverList.servant.obj")},model:{value:e.servantDetailModal.model.Name,callback:function(t){e.$set(e.servantDetailModal.model,"Name",t)},expression:"servantDetailModal.model.Name"}})],1),a("let-form-item",{attrs:{label:e.$t("serverList.servant.numOfThread"),required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("serverList.servant.thread"),required:"",pattern:"^[1-9][0-9]*$","pattern-tip":e.$t("serverList.servant.thread")},model:{value:e.servantDetailModal.model.Threads,callback:function(t){e.$set(e.servantDetailModal.model,"Threads",t)},expression:"servantDetailModal.model.Threads"}})],1),a("let-form-item",{attrs:{label:e.$t("serverList.servant.maxConnecttions"),labelWidth:"150px"}},[a("let-input",{attrs:{size:"small"},model:{value:e.servantDetailModal.model.Connections,callback:function(t){e.$set(e.servantDetailModal.model,"Connections",t)},expression:"servantDetailModal.model.Connections"}})],1),a("let-form-item",{attrs:{label:e.$t("serverList.servant.lengthOfQueue"),labelWidth:"150px"}},[a("let-input",{attrs:{size:"small"},model:{value:e.servantDetailModal.model.Capacity,callback:function(t){e.$set(e.servantDetailModal.model,"Capacity",t)},expression:"servantDetailModal.model.Capacity"}})],1),a("let-form-item",{attrs:{label:e.$t("serverList.servant.queueTimeout"),labelWidth:"150px"}},[a("let-input",{attrs:{size:"small"},model:{value:e.servantDetailModal.model.Timeout,callback:function(t){e.$set(e.servantDetailModal.model,"Timeout",t)},expression:"servantDetailModal.model.Timeout"}})],1),a("let-form-item",{attrs:{label:e.$t("serverList.servant.protocol"),required:""}},[a("let-radio",{attrs:{label:!0},model:{value:e.servantDetailModal.model.IsTaf,callback:function(t){e.$set(e.servantDetailModal.model,"IsTaf",t)},expression:"servantDetailModal.model.IsTaf"}},[e._v("TAF")]),a("let-radio",{attrs:{label:!1},model:{value:e.servantDetailModal.model.IsTaf,callback:function(t){e.$set(e.servantDetailModal.model,"IsTaf",t)},expression:"servantDetailModal.model.IsTaf"}},[e._v(e._s(e.$t("serverList.servant.notTAF")))])],1)],1):e._e()],1),a("let-modal",{attrs:{title:e.$t("operate.title.update")+" Servant",width:"800px",footShow:!!e.k8sDetailModel.model},on:{"on-confirm":e.savek8sDetail,close:e.closek8sDetailModel,"on-cancel":e.closek8sDetailModel},model:{value:e.k8sDetailModel.show,callback:function(t){e.$set(e.k8sDetailModel,"show",t)},expression:"k8sDetailModel.show"}},[e.k8sDetailModel.model?a("let-form",{ref:"k8sDetailForm",staticClass:"two-columns",attrs:{itemWidth:"360px",columns:2}},[a("let-form-item",{attrs:{label:e.$t("deployService.table.th.replicas")}},[a("let-input",{attrs:{size:"small",type:"number",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.k8sDetailModel.model.ServerK8S.Replicas,callback:function(t){e.$set(e.k8sDetailModel.model.ServerK8S,"Replicas",t)},expression:"k8sDetailModel.model.ServerK8S.Replicas"}})],1)],1):a("div",{ref:"k8sDetailModelLoading",staticClass:"loading-placeholder"})],1),a("let-modal",{staticClass:"more-cmd",attrs:{title:e.$t("operate.title.more"),width:"700px"},on:{"on-confirm":e.invokeMoreCmd,close:e.closeMoreCmdModal,"on-cancel":e.closeMoreCmdModal},model:{value:e.moreCmdModal.show,callback:function(t){e.$set(e.moreCmdModal,"show",t)},expression:"moreCmdModal.show"}},[e.moreCmdModal.model?a("let-form",{ref:"moreCmdForm"},[a("let-form-item",{attrs:{itemWidth:"100%"}},[a("let-radio",{attrs:{label:"setloglevel"},model:{value:e.moreCmdModal.model.selected,callback:function(t){e.$set(e.moreCmdModal.model,"selected",t)},expression:"moreCmdModal.model.selected"}},[e._v(e._s(e.$t("serverList.servant.logLevel")))]),a("let-select",{attrs:{size:"small",disabled:"setloglevel"!==e.moreCmdModal.model.selected},model:{value:e.moreCmdModal.model.setloglevel,callback:function(t){e.$set(e.moreCmdModal.model,"setloglevel",t)},expression:"moreCmdModal.model.setloglevel"}},e._l(e.logLevels,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),a("let-form-item",{attrs:{itemWidth:"100%"}},[a("let-radio",{attrs:{label:"loadconfig"},model:{value:e.moreCmdModal.model.selected,callback:function(t){e.$set(e.moreCmdModal.model,"selected",t)},expression:"moreCmdModal.model.selected"}},[e._v(e._s(e.$t("serverList.servant.pushFile")))]),a("let-select",{attrs:{size:"small",placeholder:e.moreCmdModal.model.configs&&e.moreCmdModal.model.configs.length?e.$t("pub.dlg.defaultValue"):e.$t("pub.dlg.noConfFile"),disabled:!(e.moreCmdModal.model.configs&&e.moreCmdModal.model.configs.length)||"loadconfig"!==e.moreCmdModal.model.selected,required:"loadconfig"===e.moreCmdModal.model.selected},model:{value:e.moreCmdModal.model.loadconfig,callback:function(t){e.$set(e.moreCmdModal.model,"loadconfig",t)},expression:"moreCmdModal.model.loadconfig"}},e._l(e.moreCmdModal.model.configs,(function(t){return a("let-option",{key:t.filename,attrs:{value:t.filename}},[e._v(e._s(t.filename))])})),1)],1),a("let-form-item",{attrs:{itemWidth:"100%"}},[a("let-radio",{attrs:{label:"command"},model:{value:e.moreCmdModal.model.selected,callback:function(t){e.$set(e.moreCmdModal.model,"selected",t)},expression:"moreCmdModal.model.selected"}},[e._v(e._s(e.$t("serverList.servant.sendCommand")))]),a("let-input",{attrs:{size:"small",disabled:"command"!==e.moreCmdModal.model.selected,required:"command"===e.moreCmdModal.model.selected},model:{value:e.moreCmdModal.model.command,callback:function(t){e.$set(e.moreCmdModal.model,"command",t)},expression:"moreCmdModal.model.command"}})],1),a("let-form-item",{attrs:{itemWidth:"100%"}},[a("let-radio",{attrs:{label:"connection"},model:{value:e.moreCmdModal.model.selected,callback:function(t){e.$set(e.moreCmdModal.model,"selected",t)},expression:"moreCmdModal.model.selected"}},[e._v(e._s(e.$t("serverList.servant.serviceLink")))])],1),a("let-form-item",{attrs:{itemWidth:"100%"}},[a("let-radio",{staticClass:"danger",attrs:{label:"undeploy_tars"},model:{value:e.moreCmdModal.model.selected,callback:function(t){e.$set(e.moreCmdModal.model,"selected",t)},expression:"moreCmdModal.model.selected"}},[e._v(e._s(e.$t("operate.undeploy"))+" "+e._s(e.$t("common.service")))])],1)],1):e._e()],1)],1)},Y=[],Q=(a("4de4"),a("7db0"),a("d3b7"),a("5530")),X={name:"ServerManage",data:function(){return{serverData:{level:5,application:"",server_name:"",set_name:"",set_area:"",set_group:""},isreloadlist:!1,reloadTask:null,reloadlist:null,serverList:[],serverNotifyList:[],pagination:{page:1,size:10,total:1},serverTypes:["tars_cpp","tars_java","tars_php","tars_nodejs","not_tars","tars_go"],configModal:{show:!1,model:null},servantModal:{show:!1,model:null,currentServer:null},servantDetailModal:{show:!1,isNew:!0,model:null},k8sDetailModel:{show:!1,isNew:!1,model:null},logLevels:["NONE","DEBUG","INFO","WARN","ERROR"],moreCmdModal:{show:!1,model:null,currentServer:null},failCount:0}},props:["treeid"],computed:{showOthers:function(){return 5===this.serverData.level},isEndpointValid:function(){return!(!this.servantDetailModal.model||!this.servantDetailModal.model.endpoint)&&this.checkServantEndpoint(this.servantDetailModal.model.endpoint)}},methods:{gotoLog:function(e){this.$ajax.getJSON("/server/api/shell_domain").then((function(t){var a="".concat(t.fromPage,"?History=true&NodeIP=").concat(e.NodeIp,"&AppName=").concat(e.ServerApp,"&ServerName=").concat(e.ServerName,"&PodName=").concat(e.PodName);window.open(a)}))},getServerId:function(){return this.treeid},getState:function(e){var t="";switch("".concat(e)){case"Active":t="status-active";break;case"Inactive":t="status-inactive";break;case"Activating":t="status-activeing";break;case"Deactivating":t="status-deactivating";break;case"Unknown":t="unknown";break}return t},reloadServerList:function(){var e=this,t=e.$route.path,a=t.substring(t.lastIndexOf("/")+1,t.length);"history"===a?e.reloadTask=setTimeout((function(){e.isreloadlist&&e.getServerList(),e.reloadServerList()}),6e4):e.stopServerList()},startServerList:function(){this.isreloadlist=!0},stopServerList:function(){this.isreloadlist=!1},getServerList:function(){var e=this;this.$ajax.getJSON("/server/api/pod_history_list",{ServerId:this.getServerId(),page:this.pagination.page,size:this.pagination.size}).then((function(t){e.serverList=t.Data,e.pagination.total=Math.ceil(t.Count.FilterCount/e.pagination.size)})).catch((function(t){e.$confirm(t.err_msg||t.message||e.$t("serverList.msg.fail"),e.$t("common.alert")).then((function(){e.getServerList()}))}))},getServerNotifyList:function(e){var t=this;if(this.showOthers){var a=this.$refs.serverNotifyListLoading.$loading.show();this.$ajax.getJSON("/server/api/server_notify_list",{ServerId:this.getServerId(),page_size:this.pageSize,curr_page:e}).then((function(o){a.hide(),t.pageNum=e,t.total=Math.ceil(o.Count/t.pageSize),t.serverNotifyList=o.rows})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("serverList.restart.failed"),": ").concat(e.err_msg||e.message))}))}},gotoPage:function(e){this.pagination.page=e,this.getServerList()},getServerConfig:function(e){var t=this,a=this.$loading.show({target:this.$refs.configFormLoading});this.$ajax.getJSON("/server/api/server_option_select",{ServerId:e}).then((function(e){a.hide(),t.configModal.model?t.configModal.model=Object.assign({},t.configModal.model,e[0]):(e.templates=[],t.configModal.model=e[0])})).catch((function(e){a.hide(),t.closeConfigModal(),t.$tip.error("".concat(t.$t("serverList.restart.failed"),": ").concat(e.err_msg||e.message))}))},configServer:function(){var e=this;this.stopServerList(),this.configModal.show=!0,this.$ajax.getJSON("/server/api/template_select").then((function(t){e.configModal.model?e.configModal.model.templates=t:e.configModal.model={templates:t},e.getServerConfig(e.getServerId())})).catch((function(t){e.$tip.error("".concat(e.$t("serverList.restart.failed"),": ").concat(t.err_msg||t.message))}))},saveConfig:function(){var e=this;if(this.$refs.configForm.validate()){var t=this.$Loading.show();this.$ajax.postJSON("/server/api/server_option_update",Object(Q["a"])({isBak:this.configModal.model.bak_flag},this.configModal.model)).then((function(a){t.hide(),e.serverList=e.serverList.map((function(e){return e.id===a.id?a:e})),e.closeConfigModal(),e.$tip.success(e.$t("serverList.restart.success"))})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("serverList.restart.failed"),": ").concat(a.message||a.err_msg))}))}},closeConfigModal:function(){this.$refs.configForm&&this.$refs.configForm.resetValid(),this.configModal.show=!1,this.configModal.model=null,this.startServerList()},checkTaskStatus:function(e,t){var a=this;return new Promise((function(o,l){a.$ajax.getJSON("/server/api/task",{task_no:e}).then((function(t){1===t.status||0===t.status?setTimeout((function(){o(a.checkTaskStatus(e))}),3e3):2===t.status?o("taskid: ".concat(t.task_no)):l(new Error("taskid: ".concat(t.task_no)))})).catch((function(r){t?l(new Error(r.err_msg||r.message||a.$t("common.networkErr"))):setTimeout((function(){o(a.checkTaskStatus(e,!0))}),3e3)}))}))},addTask:function(e,t,a){var o=this,l=this.$Loading.show();this.$ajax.postJSON("/server/api/server_command",{ServiceId:e,ServiceCommand:t}).then((function(e){return o.checkTaskStatus(e).then((function(e){l.hide(),o.getServerList(),o.startServerList(),o.$tip.success({title:a.success,message:e})})).catch((function(e){throw e}))})).catch((function(e){l.hide(),o.getServerList(),o.startServerList(),o.$tip.error({title:a.error,message:e.err_msg||e.message||o.$t("common.networkErr")})}))},restartServer:function(e){this.stopServerList(),this.addTask(e,"restart",{success:this.$t("serverList.restart.success"),error:this.$t("serverList.restart.failed")})},stopServer:function(e){var t=this;this.stopServerList(),this.$confirm(this.$t("serverList.stopService.msg.stopService"),this.$t("common.alert")).then((function(){t.addTask(e,"stop",{success:t.$t("serverList.restart.success"),error:t.$t("serverList.restart.failed")})})).catch((function(){t.startServerList()}))},undeployServer:function(e){var t=this;this.$confirm(this.$t("serverList.dlg.msg.undeploy"),this.$t("common.alert")).then((function(){t.addTask(e,"undeploy_tars",{success:t.$t("serverList.restart.success"),error:t.$t("serverList.restart.failed")}),t.closeMoreCmdModal()}))},manageServant:function(e){var t=this;this.stopServerList(),this.servantModal.show=!0;var a=this.$loading.show({target:this.$refs.servantModalLoading});this.$ajax.getJSON("/server/api/server_adapter_select",{ServerId:this.getServerId()}).then((function(o){a.hide(),t.servantModal.model=o,t.servantModal.currentServer=e})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("serverList.restart.failed"),": ").concat(e.err_msg||e.message))}))},manageK8S:function(e){var t=this;this.stopServerList(),this.k8sDetailModel.show=!0;var a=this.$loading.show({target:this.$refs.k8sDetailModelLoading});this.$ajax.getJSON("/server/api/server_k8s_select",{ServerId:this.getServerId()}).then((function(e){a.hide(),t.k8sDetailModel.model=e[0]})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("serverList.restart.failed"),": ").concat(e.err_msg||e.message))}))},closek8sDetailModel:function(){this.k8sDetailModel.show=!1,this.k8sDetailModel.model=null,this.startServerList()},closeServantModal:function(){this.servantModal.show=!1,this.servantModal.model=null,this.servantModal.currentServer=null,this.startServerList()},configServant:function(e){if(this.servantDetailModal.model={ServerId:this.getServerId(),ServerServant:[{Name:"",Port:"",Threads:0,Connections:0,Capacity:0,Timeout:0,IsTcp:!0,IsTaf:!1}]},this.servantDetailModal.isNew=!0,e){var t=this.servantModal.model.find((function(t){return t.AdapterId===e}));this.servantDetailModal.model=t,this.servantDetailModal.isNew=!1}this.servantDetailModal.show=!0},closeServantDetailModal:function(){this.$refs.servantDetailForm&&this.$refs.servantDetailForm.resetValid(),this.servantDetailModal.show=!1,this.servantDetailModal.model=null},checkServantEndpoint:function(e){var t=e.split(/\s-/),a=/^tcp|udp$/i,o=/^h\s(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/i,l=/^t\s([1-9]|[1-9]\d+)$/i,r=/^p\s\d{4,5}$/i,i=!0;if(a.test(t[0])){for(var s=0,n=1;n<t.length;n++)if(o&&o.test(t[n])&&(s++,this.servantDetailModal.model.node_name=t[n].split(/\s/)[1],o=null),l&&l.test(t[n])&&(s++,l=null),r&&r.test(t[n])){var d=t[n].substring(2);d<0||d>65535||s++,r=null}i=3===s}else i=!1;return i},saveServantDetail:function(){var e=this;if(this.$refs.servantDetailForm.validate()){var t=this.$Loading.show();if(this.servantDetailModal.isNew){var a=this.servantDetailModal.model;this.$ajax.postJSON("/server/api/server_adapter_create",a).then((function(a){t.hide(),e.servantModal.model.unshift(a),e.$tip.success(e.$t("common.success")),e.closeServantDetailModal()})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.err_msg||a.message))}))}else this.servantDetailModal.model.servant=this.servantDetailModal.model.application+"."+this.servantDetailModal.model.server_name+"."+this.servantDetailModal.model.obj_name,this.$ajax.postJSON("/server/api/server_adapter_update",this.servantDetailModal.model).then((function(a){t.hide(),e.servantModal.model=e.servantModal.model.map((function(e){return e.id===a.id?a:e})),e.$tip.success(e.$t("common.success")),e.closeServantDetailModal()})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.err_msg||a.message))}))}},savek8sDetail:function(){var e=this;if(this.$refs.k8sDetailForm.validate()){var t=this.$Loading.show();if(this.k8sDetailModel.isNew){var a=this.k8sDetailModel.model;this.$ajax.postJSON("/server/api/server_k8s_create",a).then((function(a){t.hide(),e.servantModal.model.unshift(a),e.$tip.success(e.$t("common.success")),e.closek8sDetailModel()})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.err_msg||a.message))}))}else this.$ajax.postJSON("/server/api/server_k8s_update",this.k8sDetailModel.model).then((function(a){t.hide(),e.$tip.success(e.$t("common.success")),e.getServerList(),e.closek8sDetailModel()})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.err_msg||a.message))}))}},deleteServant:function(e){var t=this;this.$confirm(this.$t("serverList.servant.a"),this.$t("common.alert")).then((function(){var a=t.$Loading.show();t.$ajax.getJSON("/server/api/server_adapter_delete",{AdapterId:e}).then((function(o){a.hide(),t.servantModal.model=t.servantModal.model.filter((function(t){return t.id!==e})),t.$tip.success(t.$t("common.success"))})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.err_msg||e.message))}))}))},showMoreCmd:function(e){var t=this;this.moreCmdModal.model={selected:"setloglevel",setloglevel:"NONE",loadconfig:"",command:"",configs:null},this.moreCmdModal.unwatch=this.$watch("moreCmdModal.model.selected",(function(){t.$refs.moreCmdForm&&t.$refs.moreCmdForm.resetValid()})),this.moreCmdModal.show=!0,this.moreCmdModal.currentServer=e},sendCommand:function(e,t,a){var o=this,l=this.$Loading.show();this.$ajax.getJSON("/server/api/send_command",{server_ids:e,command:t}).then((function(e){l.hide();var t=e[0].err_msg.replace(/\n/g,"<br>");if(0!==e[0].ret_code)throw new Error(t);var r={title:o.$t("common.success"),message:t};a&&(r.duration=0),o.$tip.success(r)})).catch((function(e){l.hide(),o.$tip.error({title:o.$t("common.error"),message:e.err_msg||e.message})}))},invokeMoreCmd:function(){var e=this.moreCmdModal.model,t=this.moreCmdModal.currentServer;"undeploy_tars"===e.selected?this.undeployServer(t.id):"setloglevel"===e.selected?this.sendCommand(t.id,"taf.setloglevel ".concat(e.setloglevel)):"loadconfig"===e.selected&&this.$refs.moreCmdForm.validate()?this.sendCommand(t.id,"taf.loadconfig ".concat(e.loadconfig)):"command"===e.selected&&this.$refs.moreCmdForm.validate()?this.sendCommand(t.id,e.command):"connection"===e.selected&&this.sendCommand(t.id,"taf.connection",!0)},closeMoreCmdModal:function(){this.$refs.moreCmdForm&&this.$refs.moreCmdForm.resetValid(),this.moreCmdModal.unwatch&&this.moreCmdModal.unwatch(),this.moreCmdModal.show=!1,this.moreCmdModal.model=null},handleNoPublishedTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.$t("pub.dlg.unpublished");return"0000:00:00 00:00:00"===e?t:e}},created:function(){var e=this;this.serverData=this.$parent.getServerData(),this.$once("hook:beforeDestroy",(function(){clearInterval(e.reloadTask),e.reloadTask=null}))},mounted:function(){this.getServerList(),this.reloadServerList(),this.startServerList(),this.getServerNotifyList(1)}},ee=X,te=(a("b525"),Object(w["a"])(ee,G,Y,!1,null,null,null)),ae=te.exports,oe={name:"Server",components:{manage:z["a"],publish:W,config:J["a"],"server-monitor":V["a"],"property-monitor":H["a"],"interface-debuger":Z["a"],"user-manage":U["a"],history:ae},data:function(){return{treeErrMsg:"load failed",treeData:null,treeid:"",enableAuth:!1,serverData:{level:5,application:"",server_name:"",set_name:"",set_area:"",set_group:""},BTabs:[]}},computed:{base:function(){return"/server/".concat(this.treeid)}},watch:{treeid:function(e){this.serverData=this.getServerData()},$route:function(e,t){"/server"===e.path&&this.getTreeData()}},directives:{vscroll:{componentUpdated:function(e){var t=e||"",a=e.children||[],o="";if(a.forEach((function(e){var t=e.getAttribute("class");t.indexOf("active")>-1&&(o=e)})),o.offsetLeft<t.scrollLeft){var l=o.offsetLeft;t.scrollTo(l,0)}else if(o.offsetLeft+o.offsetWidth>t.scrollLeft+t.offsetWidth){var r=o.offsetLeft+o.offsetWidth-t.offsetWidth;t.scrollTo(r,0)}}}},methods:{getName:function(e){var t="";return e.lastIndexOf("/")>-1&&(t=e.substring(e.lastIndexOf("/")+1,e.length)),t},selectTree:function(e){this.selectBTabs(e),this.checkCurrBTabs()},handleData:function(e,t){var a=this;e&&e.length&&e.forEach((function(e){e.label=e.name,e.nodeKey="0"!==e.type?e.id:"",t&&(e.expand=!0),e.children&&e.children.length&&a.handleData(e.children)}))},getTreeData:function(){var e=this;this.treeData=null,this.$nextTick((function(){var t=e.$loading.show({target:e.$refs.treeLoading});e.$ajax.getJSON("/server/api/tree").then((function(a){t.hide(),e.treeData=a,e.handleData(e.treeData,!0)})).catch((function(a){t.hide(),e.treeErrMsg=a.err_msg||a.message||"加载失败",e.treeData=!1}))}))},getServerData:function(){if(!this.treeid)return{};this.treeid.split(".");var e={level:5,application:"",server_name:"",set_name:"",set_area:"",set_group:""};return e},checkTreeid:function(){this.treeid=this.getLocalStorage("taf_treeid")||""},clickTab:function(e){var t=this.treeid,a=this.BTabs;a&&a.forEach((function(a){a.id===t&&(a.path=e)})),this.setLocalStorage("taf_tabs",JSON.stringify(a))},isTrueTreeLevel:function(){var e=this.$route.path.split("/"),t=e[e.length-1],a=!1;"server"===t&&1!==this.serverData.level&&(a=!0),2===this.serverData.level||"manage"!==t&&"history"!==t&&"publish"!==t||(a=!0),a&&(1===this.serverData.level?this.$router.replace("server"):2===this.serverData.level&&this.$router.replace("manage"))},checkBTabs:function(){var e=this.BTabs,t=this.getLocalStorage("taf_tabs");t&&t.length>0&&t.forEach((function(t){e.push({id:t.id,path:t.path})}))},checkCurrBTabs:function(){var e=this;this.$nextTick((function(){var t=e.$refs.btabs||"",a=t.children||[],o="";if(a.forEach((function(e){var t=e.getAttribute("class");t.indexOf("active")>-1&&(o=e)})),o.offsetLeft<t.scrollLeft){var l=o.offsetLeft;t.scrollTo(l,0)}else if(o.offsetLeft+o.offsetWidth>t.scrollLeft+t.offsetWidth){var r=o.offsetLeft+o.offsetWidth-t.offsetWidth;t.scrollTo(r,0)}}))},selectBTabs:function(e){var t=this.BTabs,a=!1;t.forEach((function(t){t.id===e&&(a=!0,t.path="/server/".concat(e,"/manage"))})),a||this.BTabs.push({id:e,path:"/server/".concat(e,"/manage")}),this.treeid=e,this.setLocalStorage("taf_treeid",JSON.stringify(e)),this.setLocalStorage("taf_tabs",JSON.stringify(t))},clickBTabs:function(e,t){this.treeid=t,this.setLocalStorage("taf_treeid",JSON.stringify(t))},closeBTabs:function(e){var t=this.BTabs,a=0;t.forEach((function(t,o){t.id===e&&(a=o)})),t.splice(a,1),this.setLocalStorage("taf_tabs",JSON.stringify(t)),t.length>0?this.treeid=t[t.length-1].id:this.treeid="",this.setLocalStorage("taf_treeid",JSON.stringify(this.treeid)),this.getTreeData()},closeAllBTabs:function(){this.BTabs=[],this.treeid="",this.setLocalStorage("taf_tabs",JSON.stringify(this.BTabs)),this.setLocalStorage("taf_treeid",JSON.stringify(this.treeid)),this.getTreeData()},getLocalStorage:function(e){var t="";return window.localStorage&&(t=JSON.parse(JSON.parse(localStorage.getItem(e)))),t},setLocalStorage:function(e,t){var a="";return window.localStorage&&(a=localStorage.setItem(e,JSON.stringify(t))),a}},created:function(){this.serverData=this.getServerData(),this.isTrueTreeLevel()},mounted:function(){this.checkTreeid(),this.checkBTabs(),this.getTreeData()}},le=oe,re=(a("9ce0"),Object(w["a"])(le,O,K,!1,null,null,null)),ie=re.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_operation"},[e.treeData&&e.treeData.length>0?a("el-menu",{staticClass:"tree",attrs:{"default-active":e.$route.path},on:{select:e.selectTree}},e._l(e.treeData,(function(t,o){return a("el-menu-item",{key:o,attrs:{index:t.path},on:{click:function(a){return e.clickEvent(t.path)}}},[e._v(e._s(t.title))])})),1):e._e(),a("div",{staticClass:"right-view"},[a("router-view",{key:e.$route.params.treeid,ref:"childView",staticClass:"page_operation_children"})],1)],1)},ne=[],de=[{title:"服务部署",path:"/operation/deploy"},{title:"待审批服务",path:"/operation/approval"},{title:"已审批服务",path:"/operation/history"},{title:"下线服务",path:"/operation/undeploy"},{title:"模版管理",path:"/operation/templates"}],ce=[{title:"业务管理",path:"/base/business"},{title:"应用管理",path:"/base/application"},{title:"节点管理",path:"/base/node"},{title:"能力管理",path:"/base/affinity"}],pe=[{title:"站点配置",path:"/gateway/station"},{title:"upstream配置",path:"/gateway/upstream"},{title:"全局黑名单配置",path:"/gateway/bwlist"}],me="/operation/deploy",ue={name:"Oparetion",data:function(){return{treeData:[]}},beforeRouteEnter:function(e,t,a){"/operation"===e.path?a(me):a()},beforeRouteLeave:function(e,t,a){me=t.path,a()},mounted:function(){this.loadData()},methods:{loadData:function(){this.treeData=de||[]},selectTree:function(e){"/operation"===this.$route.path?this.$router.push(me):this.$router.push({params:{treeid:e}})},clickEvent:function(e){this.$router.replace(e)}}},he=ue,ve=(a("ea8c"),Object(w["a"])(he,se,ne,!1,null,null,null)),fe=ve.exports,Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_operation_deploy"},[a("let-form",{ref:"form",attrs:{inline:"","label-position":"top",itemWidth:"480px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app"),itemWidth:"45%",required:""}},[a("let-select",{attrs:{size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.appTips"),pattern:"^[a-zA-Z]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.model.ServerApp,callback:function(t){e.$set(e.model,"ServerApp",t)},expression:"model.ServerApp"}},e._l(e.appList,(function(t){return a("let-option",{key:t.AppName,attrs:{value:t.AppName}},[e._v(e._s(t.AppName))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceName"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.serviceFormatTips"),required:"","required-tip":e.$t("deployService.form.serviceTips"),pattern:"^[a-zA-Z]([a-zA-Z0-9]+)?$","pattern-tip":e.$t("deployService.form.serviceFormatTips")},model:{value:e.model.ServerName,callback:function(t){e.$set(e.model,"ServerName",t)},expression:"model.ServerName"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.template"),itemWidth:"45%",required:""}},[a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.model.ServerOption.ServerTemplate,callback:function(t){e.$set(e.model.ServerOption,"ServerTemplate",t)},expression:"model.ServerOption.ServerTemplate"}},e._l(e.templates,(function(t){return a("let-option",{key:t.TemplateName,attrs:{value:t.TemplateName}},[e._v(e._s(t.TemplateName))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceMark"),itemWidth:"45%"}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.serviceMark")},model:{value:e.model.ServerMark,callback:function(t){e.$set(e.model,"ServerMark",t)},expression:"model.ServerMark"}})],1),a("let-table",{attrs:{data:e.model.ServerServant}},[a("let-table-column",{attrs:{title:"OBJ",width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.objTips"),pattern:"^[a-zA-Z0-9]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:t.row.Name,callback:function(a){e.$set(t.row,"Name",a)},expression:"props.row.Name"}})]}}])}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.port"),width:"100px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:1,max:3e4,placeholder:"1-30000",required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Port,callback:function(a){e.$set(t.row,"Port",a)},expression:"props.row.Port"}})]}}])}),a("let-table-column",{attrs:{title:e.$t("deployService.form.portType"),width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{label:!0},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("TCP")]),a("let-radio",{attrs:{label:!1},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("UDP")])]}}])}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.protocol"),width:"180px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{label:!0},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v("TAF")]),a("let-radio",{attrs:{label:!1},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v(e._s(e.$t("serverList.servant.notTAF")))])]}}])}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.threads"),width:"80px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Threads,callback:function(a){e.$set(t.row,"Threads",a)},expression:"props.row.Threads"}})]}}])}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.connections"),width:"140px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Connections,callback:function(a){e.$set(t.row,"Connections",a)},expression:"props.row.Connections"}})]}}])}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.capacity"),width:"140px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Capacity,callback:function(a){e.$set(t.row,"Capacity",a)},expression:"props.row.Capacity"}})]}}])}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.timeout"),width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0},model:{value:t.row.Timeout,callback:function(a){e.$set(t.row,"Timeout",a)},expression:"props.row.Timeout"}})]}}])}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.$index?a("let-table-operation",{on:{click:function(a){return e.addAdapter(t.row)}}},[e._v(e._s(e.$t("operate.add")))]):e._e(),t.$index?a("let-table-operation",{staticClass:"danger",on:{click:function(a){return e.model.ServerServant.splice(t.$index,1)}}},[e._v(e._s(e.$t("operate.delete")))]):e._e()]}}])})],1),a("let-form-group",{staticClass:"let-box",attrs:{title:"K8S"}},[a("let-form-item",{attrs:{label:e.$t("deployService.table.th.nodeSelector"),itemWidth:"45%"}},[e.K8SNodeSelectorKind&&e.K8SNodeSelectorKind.length>0?a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.model.ServerK8S.NodeSelector.Kind,callback:function(t){e.$set(e.model.ServerK8S.NodeSelector,"Kind",t)},expression:"model.ServerK8S.NodeSelector.Kind"}},e._l(e.K8SNodeSelectorKind,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1):a("let-input",{attrs:{size:"small",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.model.ServerK8S.NodeSelect,callback:function(t){e.$set(e.model.ServerK8S,"NodeSelect",t)},expression:"model.ServerK8S.NodeSelect"}})],1),"NodeBind"===e.model.ServerK8S.NodeSelector.Kind?a("div",[a("div",[a("let-form-item",{attrs:{label:e.$t("deployService.table.th.hostIpc"),itemWidth:"15%"}},[a("let-radio",{attrs:{label:!0},model:{value:e.model.ServerK8S.HostIpc,callback:function(t){e.$set(e.model.ServerK8S,"HostIpc",t)},expression:"model.ServerK8S.HostIpc"}},[e._v(e._s(e.$t("common.true")))]),a("let-radio",{attrs:{label:!1},model:{value:e.model.ServerK8S.HostIpc,callback:function(t){e.$set(e.model.ServerK8S,"HostIpc",t)},expression:"model.ServerK8S.HostIpc"}},[e._v(e._s(e.$t("common.false")))])],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.hostNetwork"),itemWidth:"15%"}},[a("let-radio",{attrs:{label:!0},model:{value:e.model.ServerK8S.HostNetwork,callback:function(t){e.$set(e.model.ServerK8S,"HostNetwork",t)},expression:"model.ServerK8S.HostNetwork"}},[e._v(e._s(e.$t("common.true")))]),a("let-radio",{attrs:{label:!1},model:{value:e.model.ServerK8S.HostNetwork,callback:function(t){e.$set(e.model.ServerK8S,"HostNetwork",t)},expression:"model.ServerK8S.HostNetwork"}},[e._v(e._s(e.$t("common.false")))])],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.hostPort"),itemWidth:"15%"}},[a("let-radio",{attrs:{label:!0},model:{value:e.model.ServerK8S.showHostPort,callback:function(t){e.$set(e.model.ServerK8S,"showHostPort",t)},expression:"model.ServerK8S.showHostPort"}},[e._v(e._s(e.$t("common.true")))]),a("let-radio",{attrs:{label:!1},model:{value:e.model.ServerK8S.showHostPort,callback:function(t){e.$set(e.model.ServerK8S,"showHostPort",t)},expression:"model.ServerK8S.showHostPort"}},[e._v(e._s(e.$t("common.false")))])],1)],1),e.model.ServerK8S.showHostPort?a("div",{staticStyle:{display:"block",padding:"0 40px 0 20px"}},[a("let-table",{staticStyle:{margin:"0"},attrs:{data:e.model.ServerServant}},[a("let-table-column",{attrs:{title:"OBJ"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[e._v(e._s(t.row.Name))]}}],null,!1,2950609381)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.port")},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[e._v(e._s(t.row.Port))]}}],null,!1,1805883483)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.hostPort")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex","white-space":"nowrap","align-items":"center",width:"150px"}},[a("let-input",{attrs:{size:"small",type:"number",placeholder:"1-30000"},model:{value:t.row.HostPort,callback:function(a){e.$set(t.row,"HostPort",a)},expression:"props.row.HostPort"}})],1)]}}],null,!1,2563112166)}),a("let-table-column",{attrs:{title:e.$t("deployService.form.portType")},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[t.row.IsTcp?a("span",[e._v("TCP")]):a("span",[e._v("UDP")])]}}],null,!1,70914744)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.protocol")},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[t.row.IsTaf?a("span",[e._v("TAF")]):a("span",[e._v(e._s(e.$t("serverList.servant.notTAF")))])]}}],null,!1,1125958253)})],1)],1):e._e(),a("div",[a("let-form-item",{attrs:{label:e.$t("deployService.table.th.nodeSelector"),itemWidth:"45%",required:""}},[a("let-checkbox",{attrs:{value:e.isCheckedAll},model:{value:e.isCheckedAll,callback:function(t){e.isCheckedAll=t},expression:"isCheckedAll"}},[e._v(e._s(e.$t("cache.config.allSelected")))]),a("div",{staticClass:"node_list"},e._l(e.NodeList,(function(t){return a("let-checkbox",{key:t,staticClass:"node_item",attrs:{value:e.NodeListArr.indexOf(t)>-1},on:{change:function(a){return e.checkedChange(t)}}},[e._v(e._s(t))])})),1)],1)],1)]):e._e()],1),a("let-button",{attrs:{type:"submit",theme:"primary"}},[e._v(e._s(e.$t("common.submit")))])],1),a("let-modal",{staticClass:"more-cmd",attrs:{width:"700px",footShow:!1},on:{close:e.closeResultModal,"on-cancel":e.closeResultModal},model:{value:e.resultModal.show,callback:function(t){e.$set(e.resultModal,"show",t)},expression:"resultModal.show"}},[a("p",{staticClass:"result-text"},[e._v(e._s(e.$t("deployService.form.ret.success"))+e._s(e.$t("resource.installRstMsg")))]),a("let-table",{attrs:{data:e.resultModal.resultList,"empty-msg":e.$t("common.nodata"),"row-class-name":e.resultModal.rowClassName}},[a("let-table-column",{attrs:{title:"ip",prop:"ip"}}),a("let-table-column",{attrs:{title:e.$t("resource.installResult"),prop:"rst"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{domProps:{textContent:e._s(t.row.rst?e.$t("common.success"):e.$t("common.error"))}})]}}])}),a("let-table-column",{attrs:{title:e.$t("common.message"),prop:"msg"}})],1)],1)],1)},be=[],$e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"set_inputer"},[a("div",{staticClass:"set_inputer_item"},[a("let-input",{ref:"name",attrs:{size:"small",value:e.name,placeholder:e.$t("common.set.setName"),disabled:!e.enabled,required:e.enabled,"required-tip":e.$t("deployService.form.setNameFormatTips"),pattern:e.enabled?"^[a-z]+$":null,"pattern-tip":e.$t("deployService.form.setNameFormatTips")},on:{input:e.updaters.name}})],1),a("div",{staticClass:"set_inputer_item"},[a("let-input",{ref:"area",attrs:{size:"small",value:e.area,placeholder:e.$t("common.set.setArea"),disabled:!e.enabled,required:e.enabled,"required-tip":e.$t("deployService.form.setAreaTips"),pattern:e.enabled?"^[a-z]+$":null,"pattern-tip":e.$t("deployService.form.setAreaFormatTips")},on:{input:e.updaters.area}})],1),a("div",{staticClass:"set_inputer_item"},[a("let-input",{ref:"group",attrs:{size:"small",value:e.group,placeholder:e.$t("common.set.setGroup"),disabled:!e.enabled,required:e.enabled,"required-tip":e.$t("deployService.form.setGroupTips"),pattern:e.enabled?"^(\\d+|\\*)$":null,"pattern-tip":e.$t("deployService.form.setGroupFormatTips")},on:{input:e.updaters.group}})],1),a("let-checkbox",{staticClass:"set_inputer_switch",attrs:{value:e.enabled},on:{input:e.updaters.enabled,change:e.onEnabledChange}},[e._v(e._s(e.$t("serverList.table.th.enableSet"))+" ")])],1)},_e=[],we=(a("a9e3"),{props:{enabled:Boolean,name:String,area:String,group:[Number,String]},created:function(){this.updaters={name:this.updater("name"),area:this.updater("area"),group:this.updater("group"),enabled:this.updater("enabled")}},methods:{updater:function(e){var t=this;return function(a){return t.$emit("update:".concat(e),a)}},onEnabledChange:function(){var e=this;this.$nextTick((function(){e.enabled||(e.updaters.name(""),e.$refs.name.resetValid(),e.updaters.area(""),e.$refs.area.resetValid(),e.updaters.group(""),e.$refs.group.resetValid())}))}}}),ge=we,ye=(a("c1df"),Object(w["a"])(ge,$e,_e,!1,null,null,null)),Me=ye.exports,ke=["tars_cpp","tars_java","tars_php","tars_nodejs","not_tars","tars_go"],Ne=function(){return{ServerApp:"",ServerName:"",ServerMark:"",ServerServant:[{Name:"",Port:"",HostPort:0,showHostPort:!1,Threads:0,Connections:0,Capacity:0,Timeout:0,IsTcp:!0,IsTaf:!1}],ServerOption:{ServerImportant:0},ServerK8S:{HostIpc:!1,HostNetwork:!1,showHostPort:!1,HostPort:{},NodeSelector:{},Replicas:0}}},xe={name:"OperationDeploy",components:{SetInputer:Me},data:function(){return{types:ke,templates:[],appList:[],isCheckedAll:!1,NodeList:[],NodeListArr:[],model:Ne(),enableAuth:!1,resultModal:{show:!1,resultList:[],rowClassName:function(e){return e&&e.row&&!e.row.rst?"err-row":""}},K8SNetModeOptional:[],K8SNodeSelectorKind:[]}},mounted:function(){var e=this;this.getServerTemplate(),this.getDefaultValue(),this.getAppList(),this.getNodeList(),this.$watch("model.ServerName",(function(e,t){})),this.$watch("model.node_name",(function(t,a){t!==a&&e.model.ServerServant.forEach((function(e){e.bind_ip=t}))}))},watch:{isCheckedAll:function(){var e=this,t=this.isCheckedAll;t?this.NodeList.forEach((function(t){-1===e.NodeListArr.indexOf(t)&&e.NodeListArr.push(t)})):this.NodeListArr=[]}},methods:{showHostPort:function(e){e.showHostPort=!0},hideHostPort:function(e){e.HostPort=0,e.showHostPort=!1},checkedChange:function(e){this.NodeListArr.indexOf(e)>-1?this.NodeListArr.splice(this.NodeListArr.indexOf(e),1):this.NodeListArr.push(e),0===this.NodeListArr.length&&(this.isCheckedAll=!1)},addAdapter:function(e){e=this.model.ServerServant[this.model.ServerServant.length-1];var t=e.Port+1,a=Object.assign({},e,{Port:t});this.model.ServerServant.push(Object.assign({},a))},adapterServerK8S:function(e){var t=Object.assign({},e),a={};if(t.ServerServant.forEach((function(e){a[e.Name]=e})),t.ServerServant=a,"NodeBind"===t.ServerK8S.NodeSelector.Kind){if(t.ServerK8S.HostNetwork&&t.ServerK8S.showHostPort)return this.$tip.error("".concat(this.$t("deployService.form.portOrNetWork")));if(t.ServerK8S.showHostPort){var o=[];for(var l in t.ServerServant)o.push({NameRef:l,Port:Math.floor(t.ServerServant[l].HostPort)||0});t.ServerK8S.HostPort=o}if(delete t.ServerK8S.NodeSelector.AbilityPool,this.NodeListArr.length<=0)return this.$tip.error("".concat(this.$t("deployService.form.nodeTips")));t.ServerK8S.NodeSelector.NodeBind={Value:this.NodeListArr}}else"AbilityPool"===t.ServerK8S.NodeSelector.Kind&&(delete t.ServerK8S.NodeSelector.NodeBind,t.ServerK8S.NodeSelector.AbilityPool={Value:[]});return t},deploy:function(){var e=this;if(this.$refs.form.validate()){var t=this.adapterServerK8S(this.model);this.$confirm(this.$t("deployService.form.deployServiceTip"),this.$t("common.alert")).then((function(){var a=e.$Loading.show();e.$ajax.postJSON("/server/api/deploy_create",t).then((function(t){a.hide(),t.tars_node_rst&&t.tars_node_rst.length?e.showResultModal(t.tars_node_rst):e.$tip.success(e.$t("deployService.form.ret.success"))})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}))}},getServerTemplate:function(){var e=this;this.$ajax.getJSON("/server/api/template_select",{isAll:!0}).then((function(t){e.templates=t.Data})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},getDefaultValue:function(){var e=this,t=this.model,a=t.ServerServant,o=t.ServerOption,l=t.ServerK8S,r=this.K8SNetModeOptional,i=this.K8SNodeSelectorKind;this.$ajax.getJSON("/server/api/default",{}).then((function(t){t.ServerServantElem&&a.forEach((function(e){e.Port=t.ServerServantElem.Port,e.HostPort=t.ServerServantElem.HostPort,e.showHostPort=!1,e.Capacity=t.ServerServantElem.Capacity,e.Connections=t.ServerServantElem.Connections,e.Threads=t.ServerServantElem.Threads,e.Timeout=t.ServerServantElem.Timeout,e.IsTcp=t.ServerServantElem.IsTcp,e.IsTaf=t.ServerServantElem.IsTaf})),t.ServerOption&&(o=t.ServerOption),t.ServerK8S&&(l=t.ServerK8S,l.HostPort={},l.showHostPort=!1),t.K8SNetModeOptional&&(r=t.K8SNetModeOptional),t.K8SNodeSelectorKind&&(i=t.K8SNodeSelectorKind),e.model.ServerServant=a,e.model.ServerOption=o,e.model.ServerK8S=l,e.K8SNetModeOptional=r,e.K8SNodeSelectorKind=i})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},getAutoPort:function(){var e=this,t=this.$Loading.show(),a=this.model.ServerServant,o=[];a.forEach((function(e){o.push(e.bind_ip)})),this.$ajax.getJSON("/server/api/auto_port",{node_name:o.join(";")}).then((function(o){t.hide(),o.forEach((function(t,o){e.$set(a[o],"Port",String(t.Port||""))}))})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},save:function(){this.deploy()},showResultModal:function(e){this.resultModal.resultList=e,this.resultModal.show=!0},closeResultModal:function(){this.resultModal.show=!1,this.resultModal.resultList=[]},getAppList:function(){var e=this;this.$ajax.getJSON("/server/api/application_select",{isAll:!0}).then((function(t){e.appList=t.Data}))},getNodeList:function(){var e=this;this.$ajax.getJSON("/server/api/node_list",{isAll:!0}).then((function(t){e.NodeList=t.Data}))}}},Ae=xe,Te=(a("1eed"),Object(w["a"])(Ae,Se,be,!1,null,null,null)),Ce=Te.exports,Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_operation_approval"},[a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(t){return t.preventDefault(),e.search(t)}}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.ServerApp,callback:function(t){e.$set(e.query,"ServerApp",t)},expression:"query.ServerApp"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceName")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.ServerName,callback:function(t){e.$set(e.query,"ServerName",t)},expression:"query.ServerName"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.search")))])],1)],1),a("let-table",{ref:"table",attrs:{data:e.items,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:e.$t("deployService.form.app"),prop:"ServerApp",width:"25%"}}),a("let-table-column",{attrs:{title:e.$t("deployService.form.serviceName"),prop:"ServerName",width:"25%"}}),a("let-table-column",{attrs:{title:e.$t("serviceApproval.RequestPerson"),prop:"RequestPerson"}}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.editItem(t.row)}}},[e._v(e._s(e.$t("operate.update")))]),a("let-table-operation",{on:{click:function(a){return e.approvalItem(t.row)}}},[e._v(e._s(e.$t("operate.approval")))]),a("let-table-operation",{on:{click:function(a){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("operate.delete")))])]}}])})],1),a("div",{staticStyle:{overflow:"hidden"}},[a("let-pagination",{staticStyle:{float:"right"},attrs:{align:"right",page:e.pagination.page,total:e.pagination.total},on:{change:e.gotoPage}})],1),a("let-modal",{attrs:{title:e.$t("template.view.title"),width:"800px"},model:{value:e.viewModal.show,callback:function(t){e.$set(e.viewModal,"show",t)},expression:"viewModal.show"}},[e.viewModal.model?a("pre",[e._v(e._s(e.viewModal.model))]):e._e(),a("div",{attrs:{slot:"foot"},slot:"foot"})]),a("let-modal",{attrs:{title:e.detailModal.isNew?this.$t("dialog.title.add"):this.$t("dialog.title.edit"),width:"80%"},on:{"on-confirm":e.saveItem,"on-cancel":e.closeDetailModal},model:{value:e.detailModal.show,callback:function(t){e.$set(e.detailModal,"show",t)},expression:"detailModal.show"}},[e.detailModal.model?a("let-form",{ref:"detailForm",attrs:{inline:""}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.appTips"),pattern:"^[a-zA-Z]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.detailModal.model.ServerApp,callback:function(t){e.$set(e.detailModal.model,"ServerApp",t)},expression:"detailModal.model.ServerApp"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceName"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.serviceFormatTips"),required:"","required-tip":e.$t("deployService.form.serviceTips"),pattern:"^[a-zA-Z]([a-zA-Z0-9]+)?$","pattern-tip":e.$t("deployService.form.serviceFormatTips")},model:{value:e.detailModal.model.ServerName,callback:function(t){e.$set(e.detailModal.model,"ServerName",t)},expression:"detailModal.model.ServerName"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.template"),itemWidth:"45%",required:""}},[a("let-select",{attrs:{size:"small",required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.detailModal.model.ServerOption.ServerTemplate,callback:function(t){e.$set(e.detailModal.model.ServerOption,"ServerTemplate",t)},expression:"detailModal.model.ServerOption.ServerTemplate"}},e._l(e.templates,(function(t){return a("let-option",{key:t.TemplateName,attrs:{value:t.TemplateName}},[e._v(e._s(t.TemplateName))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceMark"),itemWidth:"45%"}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.serviceMark")},model:{value:e.detailModal.model.ServerMark,callback:function(t){e.$set(e.detailModal.model,"ServerMark",t)},expression:"detailModal.model.ServerMark"}})],1),a("let-table",{attrs:{data:e.detailModal.model.ServerServant}},[a("let-table-column",{attrs:{title:"OBJ",width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.objTips"),pattern:"^[a-zA-Z0-9]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:t.row.Name,callback:function(a){e.$set(t.row,"Name",a)},expression:"props.row.Name"}})]}}],null,!1,3758810427)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.port"),width:"100px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,max:65535,placeholder:"0-65535",required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Port,callback:function(a){e.$set(t.row,"Port",a)},expression:"props.row.Port"}})]}}],null,!1,826062684)}),a("let-table-column",{attrs:{title:e.$t("deployService.form.portType"),width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{label:!0},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("TCP")]),a("let-radio",{attrs:{label:!1},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("UDP")])]}}],null,!1,1519152386)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.protocol"),width:"180px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{label:!0},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v("TAF")]),a("let-radio",{attrs:{label:!1},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v(e._s(e.$t("serverList.servant.notTAF")))])]}}],null,!1,3809598179)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.threads"),width:"80px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Threads,callback:function(a){e.$set(t.row,"Threads",a)},expression:"props.row.Threads"}})]}}],null,!1,1655720946)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.connections"),width:"100px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Connections,callback:function(a){e.$set(t.row,"Connections",a)},expression:"props.row.Connections"}})]}}],null,!1,2060048682)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.capacity"),width:"120px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Capacity,callback:function(a){e.$set(t.row,"Capacity",a)},expression:"props.row.Capacity"}})]}}],null,!1,58581595)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.timeout"),width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0},model:{value:t.row.Timeout,callback:function(a){e.$set(t.row,"Timeout",a)},expression:"props.row.Timeout"}})]}}],null,!1,1471836343)}),a("let-table-column",{attrs:{width:"10px"}})],1),a("let-form-group",{staticClass:"let-box",attrs:{title:"K8S",inline:"","label-position":"top"}},[a("let-form-item",{attrs:{label:e.$t("deployService.table.th.nodeSelector"),itemWidth:"40%"}},[e.K8SNodeSelectorKind&&e.K8SNodeSelectorKind.length>0?a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.detailModal.model.ServerK8S.NodeSelector.Kind,callback:function(t){e.$set(e.detailModal.model.ServerK8S.NodeSelector,"Kind",t)},expression:"detailModal.model.ServerK8S.NodeSelector.Kind"}},e._l(e.K8SNodeSelectorKind,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1):e._e(),"NodeBind"===e.detailModal.model.ServerK8S.NodeSelector.Kind?a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticStyle:{"margin-left":"-20px"}},[a("let-form-item",{attrs:{label:e.$t("deployService.table.th.hostIpc"),itemWidth:"28%"}},[a("let-radio",{attrs:{label:!0},model:{value:e.detailModal.model.ServerK8S.HostIpc,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"HostIpc",t)},expression:"detailModal.model.ServerK8S.HostIpc"}},[e._v(e._s(e.$t("common.true")))]),a("let-radio",{attrs:{label:!1},model:{value:e.detailModal.model.ServerK8S.HostIpc,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"HostIpc",t)},expression:"detailModal.model.ServerK8S.HostIpc"}},[e._v(e._s(e.$t("common.false")))])],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.hostNetwork"),itemWidth:"28%"}},[a("let-radio",{attrs:{label:!0},model:{value:e.detailModal.model.ServerK8S.HostNetwork,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"HostNetwork",t)},expression:"detailModal.model.ServerK8S.HostNetwork"}},[e._v(e._s(e.$t("common.true")))]),a("let-radio",{attrs:{label:!1},model:{value:e.detailModal.model.ServerK8S.HostNetwork,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"HostNetwork",t)},expression:"detailModal.model.ServerK8S.HostNetwork"}},[e._v(e._s(e.$t("common.false")))])],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.hostPort"),itemWidth:"28%"}},[a("let-radio",{attrs:{label:!0},model:{value:e.detailModal.model.ServerK8S.showHostPort,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"showHostPort",t)},expression:"detailModal.model.ServerK8S.showHostPort"}},[e._v(e._s(e.$t("common.true")))]),a("let-radio",{attrs:{label:!1},model:{value:e.detailModal.model.ServerK8S.showHostPort,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"showHostPort",t)},expression:"detailModal.model.ServerK8S.showHostPort"}},[e._v(e._s(e.$t("common.false")))])],1)],1),e.detailModal.model.ServerK8S.showHostPort?a("div",{staticStyle:{display:"block",padding:"0 40px 0 20px"}},[a("let-table",{staticStyle:{"margin-left":"-20px"},attrs:{data:e.detailModal.model.ServerK8S.HostPort}},[a("let-table-column",{attrs:{title:"OBJ"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[e._v(e._s(t.row.NameRef))]}}],null,!1,566094388)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.hostPort")},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[e._v(e._s(t.row.Port))]}}],null,!1,1805883483)})],1)],1):e._e(),a("let-checkbox",{attrs:{value:e.K8SisCheckedAll},model:{value:e.K8SisCheckedAll,callback:function(t){e.K8SisCheckedAll=t},expression:"K8SisCheckedAll"}},[e._v(e._s(e.$t("cache.config.allSelected")))]),a("div",{staticClass:"node_list"},e._l(e.K8SNodeList,(function(t){return a("let-checkbox",{key:t,staticClass:"node_item",attrs:{value:e.K8SNodeListArr.indexOf(t)>-1},on:{change:function(a){return e.K8ScheckedChange(t)}}},[e._v(e._s(t))])})),1)],1):e._e()],1)],1)],1):e._e()],1),a("let-modal",{attrs:{title:(e.approvalModal.isNew,this.$t("deployService.title.approval")),width:"80%"},on:{"on-confirm":e.saveApprovalItem,"on-cancel":e.closeApprovalModal},model:{value:e.approvalModal.show,callback:function(t){e.$set(e.approvalModal,"show",t)},expression:"approvalModal.show"}},[e.approvalModal.model?a("let-form",{ref:"approvalForm",attrs:{inline:""}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.appTips"),pattern:"^[a-zA-Z]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.approvalModal.model.ServerApp,callback:function(t){e.$set(e.approvalModal.model,"ServerApp",t)},expression:"approvalModal.model.ServerApp"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceName"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.serviceFormatTips"),required:"","required-tip":e.$t("deployService.form.serviceTips"),pattern:"^[a-zA-Z]([a-zA-Z0-9]+)?$","pattern-tip":e.$t("deployService.form.serviceFormatTips")},model:{value:e.approvalModal.model.ServerName,callback:function(t){e.$set(e.approvalModal.model,"ServerName",t)},expression:"approvalModal.model.ServerName"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.template"),itemWidth:"45%",required:""}},[a("let-select",{attrs:{disabled:"",size:"small",required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.approvalModal.model.ServerOption.ServerTemplate,callback:function(t){e.$set(e.approvalModal.model.ServerOption,"ServerTemplate",t)},expression:"approvalModal.model.ServerOption.ServerTemplate"}},e._l(e.templates,(function(t){return a("let-option",{key:t.TemplateName,attrs:{value:t.TemplateName}},[e._v(e._s(t.TemplateName))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceMark"),itemWidth:"45%"}},[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.serviceMark")},model:{value:e.approvalModal.model.ServerMark,callback:function(t){e.$set(e.approvalModal.model,"ServerMark",t)},expression:"approvalModal.model.ServerMark"}})],1),a("let-table",{attrs:{data:e.approvalModal.model.ServerServant}},[a("let-table-column",{attrs:{title:"OBJ",width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.objTips"),pattern:"^[a-zA-Z0-9]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:t.row.Name,callback:function(a){e.$set(t.row,"Name",a)},expression:"props.row.Name"}})]}}],null,!1,3088624381)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.port"),width:"100px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,max:65535,placeholder:"0-65535",required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Port,callback:function(a){e.$set(t.row,"Port",a)},expression:"props.row.Port"}})]}}],null,!1,2426397722)}),a("let-table-column",{attrs:{title:e.$t("deployService.form.portType"),width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{disabled:"",label:!0},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("TCP")]),a("let-radio",{attrs:{disabled:"",label:!1},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("UDP")])]}}],null,!1,1671426050)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.protocol"),width:"180px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{disabled:"",label:!0},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v("TAF")]),a("let-radio",{attrs:{disabled:"",label:!1},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v(e._s(e.$t("serverList.servant.notTAF")))])]}}],null,!1,4235473251)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.threads"),width:"80px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Threads,callback:function(a){e.$set(t.row,"Threads",a)},expression:"props.row.Threads"}})]}}],null,!1,2306495156)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.connections"),width:"140px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Connections,callback:function(a){e.$set(t.row,"Connections",a)},expression:"props.row.Connections"}})]}}],null,!1,2695745772)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.capacity"),width:"140px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Capacity,callback:function(a){e.$set(t.row,"Capacity",a)},expression:"props.row.Capacity"}})]}}],null,!1,1268742429)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.timeout"),width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0},model:{value:t.row.Timeout,callback:function(a){e.$set(t.row,"Timeout",a)},expression:"props.row.Timeout"}})]}}],null,!1,882398385)}),a("let-table-column",{attrs:{width:"10px"}})],1),a("let-form-group",{staticClass:"let-box",attrs:{title:"K8S",inline:"","label-position":"top"}},[a("let-form-item",{attrs:{label:e.$t("deployService.table.th.nodeSelector"),itemWidth:"40%"}},[e.K8SNodeSelectorKind&&e.K8SNodeSelectorKind.length>0?a("let-select",{attrs:{disabled:"",size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.approvalModal.model.ServerK8S.NodeSelector.Kind,callback:function(t){e.$set(e.approvalModal.model.ServerK8S.NodeSelector,"Kind",t)},expression:"approvalModal.model.ServerK8S.NodeSelector.Kind"}},e._l(e.K8SNodeSelectorKind,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1):e._e(),"NodeBind"===e.approvalModal.model.ServerK8S.NodeSelector.Kind?a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticStyle:{"margin-left":"-20px"}},[a("let-form-item",{attrs:{label:e.$t("deployService.table.th.hostIpc"),itemWidth:"28%"}},[a("let-radio",{attrs:{disabled:"",label:!0},model:{value:e.approvalModal.model.ServerK8S.HostIpc,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"HostIpc",t)},expression:"approvalModal.model.ServerK8S.HostIpc"}},[e._v(e._s(e.$t("common.true")))]),a("let-radio",{attrs:{disabled:"",label:!1},model:{value:e.approvalModal.model.ServerK8S.HostIpc,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"HostIpc",t)},expression:"approvalModal.model.ServerK8S.HostIpc"}},[e._v(e._s(e.$t("common.false")))])],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.hostNetwork"),itemWidth:"28%"}},[a("let-radio",{attrs:{disabled:"",label:!0},model:{value:e.approvalModal.model.ServerK8S.HostNetwork,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"HostNetwork",t)},expression:"approvalModal.model.ServerK8S.HostNetwork"}},[e._v(e._s(e.$t("common.true")))]),a("let-radio",{attrs:{disabled:"",label:!1},model:{value:e.approvalModal.model.ServerK8S.HostNetwork,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"HostNetwork",t)},expression:"approvalModal.model.ServerK8S.HostNetwork"}},[e._v(e._s(e.$t("common.false")))])],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.hostPort"),itemWidth:"28%"}},[a("let-radio",{attrs:{disabled:"",label:!0},model:{value:e.approvalModal.model.ServerK8S.showHostPort,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"showHostPort",t)},expression:"approvalModal.model.ServerK8S.showHostPort"}},[e._v(e._s(e.$t("common.true")))]),a("let-radio",{attrs:{disabled:"",label:!1},model:{value:e.approvalModal.model.ServerK8S.showHostPort,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"showHostPort",t)},expression:"approvalModal.model.ServerK8S.showHostPort"}},[e._v(e._s(e.$t("common.false")))])],1)],1),e.approvalModal.model.ServerK8S.showHostPort?a("div",{staticStyle:{display:"block",padding:"0 40px 0 20px"}},[a("let-table",{staticStyle:{"margin-left":"-20px"},attrs:{data:e.approvalModal.model.ServerK8S.HostPort}},[a("let-table-column",{attrs:{title:"OBJ"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[e._v(e._s(t.row.NameRef))]}}],null,!1,566094388)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.hostPort")},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[e._v(e._s(t.row.Port))]}}],null,!1,1805883483)})],1)],1):e._e(),a("let-checkbox",{attrs:{disabled:"",value:e.K8SisCheckedAll},model:{value:e.K8SisCheckedAll,callback:function(t){e.K8SisCheckedAll=t},expression:"K8SisCheckedAll"}},[e._v(e._s(e.$t("cache.config.allSelected")))]),a("div",{staticClass:"node_list"},e._l(e.K8SNodeList,(function(t){return a("let-checkbox",{key:t,staticClass:"node_item",attrs:{disabled:"",value:e.approvalModal.model.ServerK8S.NodeSelector.Value.indexOf(t)>-1},on:{change:function(a){return e.K8ScheckedChange(t)}}},[e._v(e._s(t))])})),1)],1):e._e()],1)],1),a("div",[a("let-form-item",{attrs:{label:e.$t("serviceApproval.ApprovalResult"),required:""}},[a("let-select",{attrs:{size:"small",required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:e.approvalModal.model.ApprovalResult,callback:function(t){e.$set(e.approvalModal.model,"ApprovalResult",t)},expression:"approvalModal.model.ApprovalResult"}},e._l(e.approvalResult,(function(t){return a("let-option",{key:t.label,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1),a("div",[a("let-form-item",{attrs:{label:e.$t("serviceApproval.ApprovalMark"),required:""}},[a("let-input",{attrs:{type:"textarea",rows:3,placeholder:e.$t("serviceApproval.ApprovalMark"),required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:e.approvalModal.model.ApprovalMark,callback:function(t){e.$set(e.approvalModal.model,"ApprovalMark",t)},expression:"approvalModal.model.ApprovalMark"}})],1)],1)],1):e._e()],1)],1)},Ie=[],qe=[{label:"通过",value:"true"},{label:"驳回",value:"false"}],De={name:"OperationApproval",data:function(){return{approvalResult:qe,templates:[],query:{ServerApp:"",ServerName:""},items:[],pagination:{page:1,size:10,total:1},K8SNetModeOptional:[],K8SNodeSelectorKind:[],K8SisCheckedAll:!1,K8SNodeList:[],K8SNodeListArr:[],viewModal:{show:!1,model:null},detailModal:{show:!1,model:null,isNew:!1},approvalModal:{show:!1,model:null,isNew:!1}}},watch:{K8SisCheckedAll:function(){var e=this,t=this.K8SisCheckedAll;t?this.K8SNodeList.forEach((function(t){-1===e.K8SNodeListArr.indexOf(t)&&e.K8SNodeListArr.push(t)})):this.K8SNodeListArr=[]}},mounted:function(){this.getServerTemplate(),this.getNodeList(),this.fetchData(),this.getDefaultValue()},methods:{K8ScheckedChange:function(e){this.K8SNodeListArr.indexOf(e)>-1?this.K8SNodeListArr.splice(this.K8SNodeListArr.indexOf(e),1):this.K8SNodeListArr.push(e),0===this.K8SNodeListArr.length&&(this.K8SisCheckedAll=!1)},gotoPage:function(e){this.pagination.page=e,this.fetchData()},getDefaultValue:function(){var e=this,t=this.K8SNetModeOptional,a=this.K8SNodeSelectorKind;this.$ajax.getJSON("/server/api/default",{}).then((function(o){o.K8SNetModeOptional&&(t=o.K8SNetModeOptional),o.K8SNodeSelectorKind&&(a=o.K8SNodeSelectorKind),e.K8SNetModeOptional=t,e.K8SNodeSelectorKind=a})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},fetchData:function(){var e=this,t=this.$refs.table.$loading.show();return this.$ajax.getJSON("/server/api/deploy_select",{ServerApp:this.query.ServerApp,ServerName:this.query.ServerName,page:this.pagination.page,size:this.pagination.size}).then((function(a){if(t.hide(),a.hasOwnProperty("Data"))for(var o=0;o<a.Data.length;o++){var l=[];for(var r in a.Data[o].ServerServant)l.push(a.Data[o].ServerServant[r]);a.Data[o].ServerServant=l;var i={};a.Data[o].ServerK8S.NodeSelector.hasOwnProperty("NodeBind")?(i.Kind="NodeBind",i.Value=a.Data[o].ServerK8S.NodeSelector.NodeBind.Value,a.Data[o].ServerK8S.HostPort.length>0&&(a.Data[o].ServerK8S.showHostPort=!0)):a.Data[o].ServerK8S.NodeSelector.hasOwnProperty("AbilityPool")?(i.Kind="AbilityPool",i.Value=a.Data[o].ServerK8S.NodeSelector.AbilityPool.Value):a.Data[o].ServerK8S.NodeSelector.hasOwnProperty("PublicPool")&&(i.Kind="PublicPool",i.Value=a.Data[o].ServerK8S.NodeSelector.PublicPool.Value),a.Data[o].ServerK8S.NodeSelector.Kind=i.Kind,a.Data[o].ServerK8S.NodeSelector.Value=i.Value}e.items=a.Data})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},search:function(){this.fetchData()},closeDetailModal:function(){this.$refs.detailForm.resetValid(),this.detailModal.show=!1,this.detailModal.model=null},closeApprovalModal:function(){this.$refs.approvalForm.resetValid(),this.approvalModal.show=!1,this.approvalModal.model=null},addItem:function(){this.detailModal.model={},this.detailModal.show=!0,this.detailModal.isNew=!0},viewItem:function(e){this.viewModal.model=e,this.viewModal.show=!0},editItem:function(e){this.K8SNodeListArr=e.ServerK8S.NodeSelector.Value||[],this.detailModal.model=e,this.detailModal.show=!0,this.detailModal.isNew=!1},approvalItem:function(e){this.approvalModal.model=e,this.approvalModal.show=!0,this.approvalModal.isNew=!1},adapterServerK8S:function(e){var t=Object.assign({},e),a={};if(t.ServerServant.forEach((function(e){a[e.Name]=e})),t.ServerServant=a,"NodeBind"===t.ServerK8S.NodeSelector.Kind){if(t.ServerK8S.HostNetwork&&t.ServerK8S.showHostPort)return this.$tip.error("".concat(this.$t("deployService.form.portOrNetWork")));if(t.ServerK8S.showHostPort||(t.ServerK8S.HostPort=[]),delete t.ServerK8S.NodeSelector.AbilityPool,this.K8SNodeListArr.length<=0)return this.$tip.error("".concat(this.$t("deployService.form.nodeTips")));t.ServerK8S.NodeSelector.NodeBind={Value:this.K8SNodeListArr}}else"AbilityPool"===t.ServerK8S.NodeSelector.Kind&&(delete t.ServerK8S.NodeSelector.NodeBind,t.ServerK8S.NodeSelector.AbilityPool={Value:[]});return t},saveItem:function(){var e=this;if(this.$refs.detailForm.validate()){var t=this.$Loading.show(),a=this.adapterServerK8S(this.detailModal.model);this.$ajax.postJSON("/server/api/deploy_update",{DeployId:a.DeployId,ServerK8S:a.ServerK8S,ServerServant:a.ServerServant,ServerOption:a.ServerOption}).then((function(){t.hide(),e.fetchData().then((function(){e.detailModal.show=!1,e.$tip.success(e.$t("common.success"))}))})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))}},saveApprovalItem:function(){var e=this;if(this.$refs.approvalForm.validate()){var t=this.approvalModal.model,a=this.$Loading.show();this.$ajax.postJSON("/server/api/approval_create",t).then((function(){a.hide(),e.fetchData().then((function(){e.approvalModal.show=!1,e.$tip.success(e.$t("common.success"))}))})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},removeItem:function(e){var t=this;this.$confirm(this.$t("template.delete.confirmTips"),this.$t("common.alert")).then((function(){var a=t.$Loading.show();t.$ajax.getJSON("/server/api/deploy_delete",{DeployId:e.DeployId}).then((function(){a.hide(),t.fetchData().then((function(){t.$tip.success(t.$t("common.success"))}))})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))})).catch((function(){}))},getServerTemplate:function(){var e=this;this.$ajax.getJSON("/server/api/template_select",{isAll:!0}).then((function(t){e.templates=t.Data})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},getNodeList:function(){var e=this;this.$ajax.getJSON("/server/api/node_list",{isAll:!0}).then((function(t){e.K8SNodeList=t.Data}))}}},Oe=De,Ke=(a("a251"),Object(w["a"])(Oe,Le,Ie,!1,null,null,null)),ze=Ke.exports,je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_operation_history"},[a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(t){return t.preventDefault(),e.search(t)}}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.ServerApp,callback:function(t){e.$set(e.query,"ServerApp",t)},expression:"query.ServerApp"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceName")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.ServerName,callback:function(t){e.$set(e.query,"ServerName",t)},expression:"query.ServerName"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.search")))])],1)],1),a("let-table",{ref:"table",attrs:{data:e.items,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:e.$t("deployService.form.app"),prop:"ServerApp",width:"25%"}}),a("let-table-column",{attrs:{title:e.$t("deployService.form.serviceName"),prop:"ServerName",width:"25%"}}),a("let-table-column",{attrs:{title:e.$t("serviceApproval.RequestPerson"),prop:"RequestPerson"}}),a("let-table-column",{attrs:{title:e.$t("serviceApproval.ApprovalResult"),prop:"ApprovalResult"},scopedSlots:e._u([{key:"default",fn:function(t){return[""+t.row.ApprovalResult==="true"?a("span",{staticClass:"success"},[e._v("通过")]):""+t.row.ApprovalResult==="false"?a("span",{staticClass:"warn"},[e._v("驳回")]):a("span",[e._v(e._s(t.row.ApprovalResult))])]}}])}),a("let-table-column",{attrs:{title:e.$t("serviceApproval.ApprovalMark"),prop:"ApprovalMark"}}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.viewItem(t.row)}}},[e._v(e._s(e.$t("operate.view")))])]}}])})],1),a("div",{staticStyle:{overflow:"hidden"}},[a("let-pagination",{staticStyle:{float:"right"},attrs:{align:"right",page:e.pagination.page,total:e.pagination.total},on:{change:e.gotoPage}})],1),a("let-modal",{attrs:{title:e.$t("deployService.title.history"),width:"80%"},on:{"on-confirm":e.closeViewModal,"on-cancel":e.closeViewModal},model:{value:e.viewModal.show,callback:function(t){e.$set(e.viewModal,"show",t)},expression:"viewModal.show"}},[e.viewModal.model?a("let-form",{ref:"viewForm",attrs:{inline:""}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app"),itemWidth:"45%"}},[e._v(e._s(e.viewModal.model.ServerApp))]),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceName"),itemWidth:"45%"}},[e._v(e._s(e.viewModal.model.ServerName))]),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceMark"),itemWidth:"45%"}},[e._v(e._s(e.viewModal.model.ServerMark))]),a("let-table",{attrs:{data:e.viewModal.model.ServerServant}},[a("let-table-column",{attrs:{title:"OBJ"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.Name))]}}],null,!1,1485259994)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.port")},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[e._v(e._s(t.row.Port))]}}],null,!1,1805883483)}),a("let-table-column",{attrs:{title:e.$t("deployService.form.portType")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.IsTcp?a("let-radio",{attrs:{label:!0},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("TCP")]):a("let-radio",{attrs:{label:!1},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("UDP")])]}}],null,!1,2027518380)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.protocol")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.IsTaf?a("let-radio",{attrs:{label:!0},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v("TAF")]):a("let-radio",{attrs:{label:!1},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v(e._s(e.$t("serverList.servant.notTAF")))])]}}],null,!1,1356080889)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.threads"),width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.Threads))]}}],null,!1,2683018496)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.connections"),width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.Connections))]}}],null,!1,192188376)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.capacity"),width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.Capacity))]}}],null,!1,4133537865)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.timeout"),width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.Timeout))]}}],null,!1,2137174470)}),a("let-table-column",{attrs:{width:"10px"}})],1),a("let-form-group",{staticClass:"let-box",attrs:{title:"K8S",inline:"","label-position":"top"}},[a("let-form-item",{attrs:{label:e.$t("deployService.table.th.nodeSelector"),itemWidth:"50%"}},[e.K8SNodeSelectorKind&&e.K8SNodeSelectorKind.length>0?a("let-select",{attrs:{disabled:"",size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.viewModal.model.ServerK8S.NodeSelector.Kind,callback:function(t){e.$set(e.viewModal.model.ServerK8S.NodeSelector,"Kind",t)},expression:"viewModal.model.ServerK8S.NodeSelector.Kind"}},e._l(e.K8SNodeSelectorKind,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1):e._e(),"NodeBind"===e.viewModal.model.ServerK8S.NodeSelector.Kind?a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticStyle:{"margin-left":"-20px"}},[a("let-form-item",{attrs:{label:e.$t("deployService.table.th.hostIpc"),itemWidth:"28%"}},[a("let-radio",{attrs:{disabled:"",label:!0},model:{value:e.viewModal.model.ServerK8S.HostIpc,callback:function(t){e.$set(e.viewModal.model.ServerK8S,"HostIpc",t)},expression:"viewModal.model.ServerK8S.HostIpc"}},[e._v(e._s(e.$t("common.true")))]),a("let-radio",{attrs:{disabled:"",label:!1},model:{value:e.viewModal.model.ServerK8S.HostIpc,callback:function(t){e.$set(e.viewModal.model.ServerK8S,"HostIpc",t)},expression:"viewModal.model.ServerK8S.HostIpc"}},[e._v(e._s(e.$t("common.false")))])],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.hostNetwork"),itemWidth:"28%"}},[a("let-radio",{attrs:{disabled:"",label:!0},model:{value:e.viewModal.model.ServerK8S.HostNetwork,callback:function(t){e.$set(e.viewModal.model.ServerK8S,"HostNetwork",t)},expression:"viewModal.model.ServerK8S.HostNetwork"}},[e._v(e._s(e.$t("common.true")))]),a("let-radio",{attrs:{disabled:"",label:!1},model:{value:e.viewModal.model.ServerK8S.HostNetwork,callback:function(t){e.$set(e.viewModal.model.ServerK8S,"HostNetwork",t)},expression:"viewModal.model.ServerK8S.HostNetwork"}},[e._v(e._s(e.$t("common.false")))])],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.hostPort"),itemWidth:"28%"}},[a("let-radio",{attrs:{disabled:"",label:!0},model:{value:e.viewModal.model.ServerK8S.showHostPort,callback:function(t){e.$set(e.viewModal.model.ServerK8S,"showHostPort",t)},expression:"viewModal.model.ServerK8S.showHostPort"}},[e._v(e._s(e.$t("common.true")))]),a("let-radio",{attrs:{disabled:"",label:!1},model:{value:e.viewModal.model.ServerK8S.showHostPort,callback:function(t){e.$set(e.viewModal.model.ServerK8S,"showHostPort",t)},expression:"viewModal.model.ServerK8S.showHostPort"}},[e._v(e._s(e.$t("common.false")))])],1)],1),a("let-checkbox",{attrs:{disabled:"",value:e.K8SisCheckedAll},model:{value:e.K8SisCheckedAll,callback:function(t){e.K8SisCheckedAll=t},expression:"K8SisCheckedAll"}},[e._v(e._s(e.$t("cache.config.allSelected")))]),a("div",{staticClass:"node_list"},e._l(e.K8SNodeList,(function(t){return a("let-checkbox",{key:t,staticClass:"node_item",attrs:{disabled:"",value:e.viewModal.model.ServerK8S.NodeSelector.Value.indexOf(t)>-1},on:{change:function(a){return e.K8ScheckedChange(t)}}},[e._v(e._s(t))])})),1)],1):e._e()],1)],1),a("let-form-item",{attrs:{label:e.$t("serviceApproval.ApprovalResult")}},[e.viewModal.model.ApprovalResult?a("span",{class:e.viewModal.model.ApprovalResult?"success":"warn"},[e._v(e._s(e.viewModal.model.ApprovalResult?"通过":"驳回"))]):e._e()]),a("let-form-item",{attrs:{label:e.$t("serviceApproval.ApprovalMark"),itemWidth:"100%"}},[e._v(e._s(e.viewModal.model.ApprovalMark))])],1):e._e()],1)],1)},Pe=[],Be={name:"OperationHistory",data:function(){return{query:{ServerApp:"",ServerName:""},items:[],pagination:{page:1,size:10,total:1},viewModal:{show:!1,model:null},K8SNetModeOptional:[],K8SNodeSelectorKind:[],K8SisCheckedAll:!1,K8SNodeList:[],K8SNodeListArr:[]}},mounted:function(){this.getDefaultValue(),this.getNodeList(),this.fetchData()},methods:{gotoPage:function(e){this.pagination.page=e,this.fetchData()},fetchData:function(){var e=this,t=this.$refs.table.$loading.show();return this.$ajax.getJSON("/server/api/approval_select",{ServerApp:this.query.ServerApp,ServerName:this.query.ServerName,page:this.pagination.page,size:this.pagination.size}).then((function(a){t.hide(),a.Data&&a.Data.forEach((function(e){var t=[];if(e.ServerServant){for(var a in e.ServerServant)t.push(e.ServerServant[a]);e.ServerServant=t}})),e.items=a.Data,e.pagination.total=Math.ceil(a.Count.FilterCount/e.pagination.size)})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},getDefaultValue:function(){var e=this,t=this.K8SNetModeOptional,a=this.K8SNodeSelectorKind;this.$ajax.getJSON("/server/api/default",{}).then((function(o){o.K8SNetModeOptional&&(t=o.K8SNetModeOptional),o.K8SNodeSelectorKind&&(a=o.K8SNodeSelectorKind),e.K8SNetModeOptional=t,e.K8SNodeSelectorKind=a})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},getNodeList:function(){var e=this;this.$ajax.getJSON("/server/api/node_list",{isAll:!0}).then((function(t){e.K8SNodeList=t}))},search:function(){this.fetchData()},closeViewModal:function(){this.viewModal.show=!1,this.viewModal.model=null},viewItem:function(e){this.viewModal.model=e,this.viewModal.show=!0}}},Re=Be,Fe=(a("9430"),Object(w["a"])(Re,je,Pe,!1,null,null,null)),Ee=Fe.exports,We=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_operation_undeploy"},[a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(t){return t.preventDefault(),e.search(t)}}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.ServerApp,callback:function(t){e.$set(e.query,"ServerApp",t)},expression:"query.ServerApp"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceName")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.ServerName,callback:function(t){e.$set(e.query,"ServerName",t)},expression:"query.ServerName"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.search")))])],1)],1),a("let-table",{ref:"table",attrs:{data:e.serverList,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{width:"60px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("let-checkbox",{model:{value:e.isCheckedAll,callback:function(t){e.isCheckedAll=t},expression:"isCheckedAll"}})]}},{key:"default",fn:function(t){return[a("let-checkbox",{on:{change:function(a){return e.checkChange(t.row)}},model:{value:t.row.isChecked,callback:function(a){e.$set(t.row,"isChecked",a)},expression:"scope.row.isChecked"}})]}}])}),a("let-table-column",{attrs:{title:e.$t("deployService.form.app"),prop:"ServerApp"}}),a("let-table-column",{attrs:{title:e.$t("deployService.form.serviceName"),prop:"ServerName"}})],1),a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"btn_group"},[a("let-button",{attrs:{theme:"primary",size:"small"},on:{click:e.undeployServer}},[e._v(e._s(e.$t("operate.undeploy")))])],1),a("let-pagination",{staticStyle:{float:"right"},attrs:{align:"right",page:e.pagination.page,total:e.pagination.total},on:{change:e.gotoPage}})],1)],1)},Je=[],Ve={name:"OperationUndeploy",data:function(){return{query:{ServerApp:"",ServerName:""},pagination:{page:1,size:10,total:1},viewModal:{show:!1,model:null},serverList:[],isCheckedAll:!1,checkedList:[]}},watch:{isCheckedAll:function(){var e=this.isCheckedAll;this.serverList.forEach((function(t){t.isChecked=e})),this.checkedList=e?[].concat(this.serverList):[]}},mounted:function(){this.fetchData()},methods:{gotoPage:function(e){this.pagination.page=e,this.fetchData()},fetchData:function(){var e=this,t=this.$refs.table.$loading.show();return this.$ajax.getJSON("/server/api/server_list",{ServerApp:this.query.ServerApp,ServerName:this.query.ServerName,page:this.pagination.page,size:this.pagination.size}).then((function(a){t.hide(),a.hasOwnProperty("Data")&&a.Data.forEach((function(e){e.isChecked=!1})),e.serverList=a.Data,e.pagination.total=Math.ceil(a.Count.FilterCount/e.pagination.size)})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},search:function(){this.fetchData()},closeViewModal:function(){this.viewModal.show=!1,this.viewModal.model=null},viewItem:function(e){this.viewModal.model=e,this.viewModal.show=!0},checkChange:function(e){var t=this.checkedList,a=e.isChecked;if(a){var o=!1;t.forEach((function(t){t.ServerId===e.ServerId&&(o=!0)})),o||t.push(e)}else{var l=!1,r=-1;t.forEach((function(t,a){t.ServerId===e.ServerId&&(l=!0,r=a)})),l&&t.splice(r,1)}},undeployServer:function(){var e=this,t=(this.checkedList,this.checkedList.filter((function(e){return e.isChecked})));if(t.length<=0)this.$tip.warning(this.$t("dialog.tips.item"));else{var a=t.map((function(e){return e.ServerId}));this.$confirm(this.$t("serverList.dlg.msg.undeploy"),this.$t("common.alert")).then((function(){var t=e.$Loading.show();e.$ajax.postJSON("/server/api/server_undeploy",{ServerId:a}).then((function(a){t.hide(),e.fetchData(),e.$tip.success(e.$t("common.success"))})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.err_msg||a.message))}))}))}}}},He=Ve,Ze=(a("5a69"),Object(w["a"])(He,We,Je,!1,null,null,null)),Ue=Ze.exports,Ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_operation_expand"},[a("let-form",{ref:"configForm",attrs:{inline:"","label-position":"top",itemWidth:"480px"},nativeOn:{submit:function(t){return t.preventDefault(),e.previewExpand(t)}}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app"),itemWidth:"240px",required:""}},[a("let-select",{attrs:{size:"small",required:"","required-tip":e.$t("deployService.table.tips.empty")},on:{change:function(t){return e.changeSelect("application")}},model:{value:e.model.application,callback:function(t){e.$set(e.model,"application",t)},expression:"model.application"}},e._l(e.applications,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),a("let-form-item",{attrs:{label:e.$t("serverList.table.th.service"),itemWidth:"240px",required:""}},[a("let-select",{attrs:{size:"small",required:"","required-tip":e.$t("deployService.table.tips.empty")},on:{change:function(t){return e.changeSelect("server_name")}},model:{value:e.model.server_name,callback:function(t){e.$set(e.model,"server_name",t)},expression:"model.server_name"}},e._l(e.serverNames,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),a("let-form-item",{attrs:{label:"Set",itemWidth:"240px",required:""}},[a("let-select",{attrs:{size:"small",required:"","required-tip":e.$t("deployService.table.tips.empty")},on:{change:function(t){return e.changeSelect("set")}},model:{value:e.model.set,callback:function(t){e.$set(e.model,"set",t)},expression:"model.set"}},e._l(e.sets,(function(t){return a("let-option",{key:t,attrs:{value:t||-1}},[e._v(" "+e._s(t||e.$t("serviceExpand.form.disableSet"))+" ")])})),1)],1),a("let-form-item",{attrs:{label:e.$t("serverList.table.th.ip"),itemWidth:"240px",required:""}},[a("let-select",{attrs:{size:"small",required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:e.model.node_name,callback:function(t){e.$set(e.model,"node_name",t)},expression:"model.node_name"}},e._l(e.nodeNames,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("serviceExpand.form.tarIP"),itemWidth:"100%",required:""}},[a("let-input",{attrs:{type:"textarea",rows:3,placeholder:e.$t("serviceExpand.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:e.expandIpStr,callback:function(t){e.expandIpStr=t},expression:"expandIpStr"}})],1),a("let-form-item",{attrs:{label:e.$t("serverList.table.th.enableSet")}},[a("SetInputer",{attrs:{enabled:e.model.enable_set,name:e.model.set_name,area:e.model.set_area,group:e.model.set_group},on:{"update:enabled":function(t){return e.$set(e.model,"enable_set",t)},"update:name":function(t){return e.$set(e.model,"set_name",t)},"update:area":function(t){return e.$set(e.model,"set_area",t)},"update:group":function(t){return e.$set(e.model,"set_group",t)}}})],1),a("let-form-item",{attrs:{label:e.$t("serviceExpand.form.nodeConfig"),itemWidth:"100%"}},[a("let-checkbox",{model:{value:e.model.copy_node_config,callback:function(t){e.$set(e.model,"copy_node_config",t)},expression:"model.copy_node_config"}},[e._v(" "+e._s(e.$t("serviceExpand.form.copyNodeConfig"))+" ")])],1),a("let-button",{attrs:{type:"sumbit",theme:"primary"}},[e._v(e._s(e.$t("serviceExpand.form.preExpand")))])],1),a("let-form",{directives:[{name:"show",rawName:"v-show",value:e.previewItems.length>0,expression:"previewItems.length > 0"}],ref:"expandForm",staticClass:"mt40",attrs:{inline:""},nativeOn:{submit:function(t){return t.preventDefault(),e.expand(t)}}},[a("let-table",{ref:"table",attrs:{data:e.previewItems,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{scopedSlots:e._u([{key:"head",fn:function(t){return[a("let-checkbox",{model:{value:e.isCheckedAll,callback:function(t){e.isCheckedAll=t},expression:"isCheckedAll"}})]}},{key:"default",fn:function(t){return[t.row.status==e.$t("serviceExpand.form.noExpand")?a("let-checkbox",{model:{value:t.row.isChecked,callback:function(a){e.$set(t.row,"isChecked",a)},expression:"scope.row.isChecked"}}):e._e()]}}])}),a("let-table-column",{attrs:{title:e.$t("historyList.dlg.th.c2"),prop:"application"}}),a("let-table-column",{attrs:{title:e.$t("historyList.dlg.th.c3"),prop:"server_name"}}),a("let-table-column",{attrs:{title:"Set",prop:"set"}}),a("let-table-column",{attrs:{title:e.$t("serverList.servant.objName"),prop:"obj_name"}}),a("let-table-column",{attrs:{title:e.$t("historyList.dlg.th.c4"),prop:"node_name"}}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.endpoint")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-input",{attrs:{pattern:t.row.isChecked?e.ipReg:null,"pattern-tip":e.$t("serviceExpand.form.preExpand")},model:{value:t.row.bind_ip,callback:function(a){e.$set(t.row,"bind_ip",a)},expression:"scope.row.bind_ip"}})]}}])}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.port")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-input",{model:{value:t.row.port,callback:function(a){e.$set(t.row,"port",a)},expression:"scope.row.port"}})]}}])}),a("let-table-column",{attrs:{title:e.$t("deployService.form.template"),prop:"template_name"}}),a("let-table-column",{attrs:{title:e.$t("historyList.dlg.th.c8"),prop:"status"}})],1),a("let-button",{attrs:{type:"button",theme:"sub-primary"},on:{click:function(t){return e.getAutoPort()}}},[e._v(e._s(e.$t("deployService.form.getPort"))+" ")]),a("let-button",{attrs:{type:"sumbit",theme:"primary"}},[e._v(e._s(e.$t("deployService.title.expand")))])],1),a("let-modal",{staticClass:"more-cmd",attrs:{width:"700px",footShow:!1},on:{close:e.closeResultModal,"on-cancel":e.closeResultModal},model:{value:e.resultModal.show,callback:function(t){e.$set(e.resultModal,"show",t)},expression:"resultModal.show"}},[a("p",{staticClass:"result-text"},[e._v(e._s(e.$t("serviceExpand.form.errTips.success"))+e._s(e.$t("resource.installRstMsg")))]),a("let-table",{attrs:{data:e.resultModal.resultList,"empty-msg":e.$t("common.nodata"),"row-class-name":e.resultModal.rowClassName}},[a("let-table-column",{attrs:{title:"ip",prop:"ip"}}),a("let-table-column",{attrs:{title:e.$t("resource.installResult"),prop:"rst"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{domProps:{textContent:e._s(t.row.rst?e.$t("common.success"):e.$t("common.error"))}})]}}])}),a("let-table-column",{attrs:{title:e.$t("common.message"),prop:"msg"}})],1)],1)],1)},Ye=[],Qe=(a("498a"),"((\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])"),Xe=function(){return{application:"",server_name:"",set:"",node_name:"",expand_nodes:[],enable_set:!1,set_name:"",set_area:"",set_group:"",copy_node_config:!1}},et={name:"OperationExpand",components:{SetInputer:Me},data:function(){return{model:Xe(),applications:[],serverNames:[],sets:[],nodeNames:[],expandIpStr:"",previewItems:[],ipReg:"^".concat(Qe,"$"),isCheckedAll:!1,resultModal:{show:!1,resultList:[],rowClassName:function(e){return e&&e.row&&!e.row.rst?"err-row":""}}}},mounted:function(){var e=this;this.getCascadeSelectServer({level:1},this.$t("common.error")).then((function(t){e.applications=t}))},methods:{changeSelect:function(e){var t=this;switch(e){case"application":this.model.server_name="",this.serverNames=[],this.model.application&&this.getCascadeSelectServer({level:2,application:this.model.application},this.$t("common.error")).then((function(e){t.serverNames=e}));break;case"server_name":this.model.set="",this.sets=[],this.model.server_name&&this.getCascadeSelectServer({level:3,application:this.model.application,server_name:this.model.server_name},this.$t("common.error")).then((function(e){t.sets=e}));break;case"set":if(this.model.node_name="",this.model.nodeName=[],this.model.set){var a=-1===parseInt(this.model.set,10)?"":this.model.set;this.getCascadeSelectServer({level:4,application:this.model.application,server_name:this.model.server_name,set:a},this.$t("common.error")).then((function(e){t.nodeNames=e}))}break;default:break}},getCascadeSelectServer:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.$t("common.error");return this.$ajax.getJSON("/server/api/cascade_select_server",e).then((function(e){return e})).catch((function(e){t.$tip.error("".concat(a,": ").concat(e.message||e.err_msg))}))},previewExpand:function(){var e=this;if(this.$refs.configForm.validate()){var t=Object.assign({},this.model);t.set=-1===parseInt(t.set,10)?"":t.set,t.expand_nodes=this.expandIpStr.trim().split(/[,;\n]/);var a=this.$Loading.show();this.$ajax.postJSON("/server/api/expand_server_preview",t).then((function(t){a.hide();var o=t||[];o.forEach((function(e){e.isChecked=!1})),e.isCheckedAll=!1,e.previewItems=o})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},getAutoPort:function(){var e=this,t=this.$Loading.show(),a=this.previewItems.filter((function(t){return t.status===e.$t("serviceExpand.form.noExpand")&&t.isChecked})),o=[];a.forEach((function(e){o.push(e.bind_ip)})),this.$ajax.getJSON("/server/api/auto_port",{node_name:o.join(";")}).then((function(o){t.hide(),o.forEach((function(t,o){e.$set(a[o],"port",String(t.port||""))}))})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},expand:function(){var e=this;if(this.$refs.expandForm.validate()){var t=this.previewItems.filter((function(t){return t.status===e.$t("serviceExpand.form.noExpand")&&t.isChecked}));if(t.length>0){var a=[];t.forEach((function(e){a.push({bind_ip:e.bind_ip,node_name:e.node_name,obj_name:e.obj_name,port:e.port,set:e.set})}));var o={application:this.model.application,server_name:this.model.server_name,set:-1===parseInt(this.model.set,10)?"":this.model.set,node_name:this.model.node_name,copy_node_config:this.model.copy_node_config,expand_preview_servers:a},l=this.$Loading.show();this.$ajax.postJSON("/server/api/expand_server",o).then((function(t){l.hide(),t.tars_node_rst&&t.tars_node_rst.length?e.showResultModal(t.tars_node_rst):e.$tip.success(e.$t("serviceExpand.form.errTips.success"))})).catch((function(t){l.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}else this.$tip.error(this.$t("serviceExpand.form.errTips.noneNodes"))}},showResultModal:function(e){this.resultModal.resultList=e,this.resultModal.show=!0},closeResultModal:function(){this.resultModal.show=!1,this.resultModal.resultList=[]}},watch:{isCheckedAll:function(){var e=this.isCheckedAll;this.previewItems.forEach((function(t){t.isChecked=e}))}}},tt=et,at=(a("2541"),Object(w["a"])(tt,Ge,Ye,!1,null,null,null)),ot=at.exports,lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_operation_templates"},[a("let-button",{staticStyle:{float:"right"},attrs:{size:"small",theme:"primary"},on:{click:e.addItem}},[e._v(e._s(e.$t("template.btn.addTempate")))]),a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(t){return t.preventDefault(),e.search(t)}}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.template")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.template_name,callback:function(t){e.$set(e.query,"template_name",t)},expression:"query.template_name"}})],1),a("let-form-item",{attrs:{label:e.$t("template.search.parentTemplate")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.parents_name,callback:function(t){e.$set(e.query,"parents_name",t)},expression:"query.parents_name"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.search")))])],1)],1),a("let-table",{ref:"table",attrs:{data:e.items,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:e.$t("deployService.form.template"),prop:"TemplateName",width:"25%"}}),a("let-table-column",{attrs:{title:e.$t("template.search.parentTemplate"),prop:"TemplateParent",width:"25%"}}),a("let-table-column",{attrs:{title:e.$t("cfg.btn.lastUpdate"),prop:"UpdateTime"}}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.viewItem(t.row)}}},[e._v(e._s(e.$t("operate.view")))]),a("let-table-operation",{on:{click:function(a){return e.editItem(t.row)}}},[e._v(e._s(e.$t("operate.update")))]),a("let-table-operation",{on:{click:function(a){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("operate.delete")))])]}}])})],1),a("div",{staticStyle:{overflow:"hidden"}},[a("let-pagination",{staticStyle:{float:"right"},attrs:{align:"right",page:e.pagination.page,total:e.pagination.total},on:{change:e.gotoPage}})],1),a("let-modal",{attrs:{title:e.$t("template.view.title"),width:"800px"},model:{value:e.viewModal.show,callback:function(t){e.$set(e.viewModal,"show",t)},expression:"viewModal.show"}},[e.viewModal.model?a("pre",[e._v(e._s(e.viewModal.model.TemplateContent))]):e._e(),a("div",{attrs:{slot:"foot"},slot:"foot"})]),a("let-modal",{attrs:{title:e.detailModal.isNew?this.$t("template.add.title"):this.$t("template.update.title"),width:"800px"},on:{"on-confirm":e.saveItem,"on-cancel":e.closeDetailModal},model:{value:e.detailModal.show,callback:function(t){e.$set(e.detailModal,"show",t)},expression:"detailModal.show"}},[e.detailModal.model?a("let-form",{ref:"detailForm",attrs:{itemWidth:"700px"}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.template"),required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("template.add.templateFormatTips"),required:"","required-tip":e.$t("template.add.templateNameTips"),pattern:"^[a-zA-Z]([.a-zA-Z0-9]+)?$","pattern-tip":e.$t("template.add.templateFormatTips")},model:{value:e.detailModal.model.TemplateName,callback:function(t){e.$set(e.detailModal.model,"TemplateName",t)},expression:"detailModal.model.TemplateName"}})],1),a("let-form-item",{attrs:{label:e.$t("template.search.parentTemplate"),required:""}},[a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:e.detailModal.model.TemplateParent,callback:function(t){e.$set(e.detailModal.model,"TemplateParent",t)},expression:"detailModal.model.TemplateParent"}},[a("let-option",{attrs:{value:""}},[e._v(e._s(e.$t("pub.dlg.defaultValue")))]),e._l(e.items,(function(t){return a("let-option",{key:t.id,attrs:{value:t.TemplateName}},[e._v(e._s(t.TemplateName))])}))],2)],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceMark")}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.serviceMark")},model:{value:e.detailModal.model.CreateMark,callback:function(t){e.$set(e.detailModal.model,"CreateMark",t)},expression:"detailModal.model.CreateMark"}})],1),a("let-form-item",{attrs:{label:e.$t("template.form.content"),required:""}},[a("let-input",{attrs:{type:"textarea",rows:10,size:"small",required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:e.detailModal.model.TemplateContent,callback:function(t){e.$set(e.detailModal.model,"TemplateContent",t)},expression:"detailModal.model.TemplateContent"}})],1)],1):e._e()],1)],1)},rt=[],it={name:"OperationTemplates",data:function(){return{query:{template_name:"",parents_name:""},items:[],pagination:{page:1,size:10,total:1},viewModal:{show:!1,model:null},detailModal:{show:!1,model:null,isNew:!1}}},mounted:function(){this.fetchData()},methods:{gotoPage:function(e){this.pagination.page=e,this.fetchData()},fetchData:function(){var e=this,t=this.$refs.table.$loading.show();return this.$ajax.getJSON("/server/api/template_select",{template_name:this.query.template_name,parents_name:this.query.parents_name,page:this.pagination.page,size:this.pagination.size}).then((function(a){t.hide(),e.items=a.Data,e.pagination.total=Math.ceil(a.Count.FilterCount/e.pagination.size)})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},search:function(){this.fetchData()},closeDetailModal:function(){this.$refs.detailForm.resetValid(),this.detailModal.show=!1,this.detailModal.model=null},addItem:function(){this.detailModal.model={},this.detailModal.show=!0,this.detailModal.isNew=!0},viewItem:function(e){this.viewModal.model=e,this.viewModal.show=!0},editItem:function(e){this.detailModal.model=e,this.detailModal.show=!0,this.detailModal.isNew=!1},saveItem:function(){var e=this;if(this.$refs.detailForm.validate()){var t=this.detailModal.model,a=""!==t.TemplateId?"/server/api/template_update":"/server/api/template_create",o=this.$Loading.show();this.$ajax.postJSON(a,t).then((function(){o.hide(),e.$tip.success(e.$t("common.success")),e.closeDetailModal(),e.fetchData()})).catch((function(t){o.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},removeItem:function(e){var t=this;this.$confirm(this.$t("template.delete.confirmTips"),this.$t("common.alert")).then((function(){var a=t.$Loading.show();t.$ajax.getJSON("/server/api/template_delete",{TemplateId:e.TemplateId}).then((function(){a.hide(),t.fetchData().then((function(){t.$tip.success(t.$t("common.success"))}))})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))})).catch((function(){}))}}},st=it,nt=(a("4dec"),Object(w["a"])(st,lt,rt,!1,null,null,null)),dt=nt.exports,ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_operation_approval"},[a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(t){return t.preventDefault(),e.search(t)}}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.ServerApp,callback:function(t){e.$set(e.query,"ServerApp",t)},expression:"query.ServerApp"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceName")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.ServerName,callback:function(t){e.$set(e.query,"ServerName",t)},expression:"query.ServerName"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.search")))])],1)],1),a("let-table",{ref:"table",attrs:{data:e.items,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:e.$t("deployService.form.app"),prop:"ServerApp",width:"25%"}}),a("let-table-column",{attrs:{title:e.$t("deployService.form.serviceName"),prop:"ServerName",width:"25%"}}),a("let-table-column",{attrs:{title:e.$t("serviceApproval.RequestPerson"),prop:"RequestPerson"}}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.editItem(t.row)}}},[e._v(e._s(e.$t("operate.update")))]),a("let-table-operation",{on:{click:function(a){return e.approvalItem(t.row)}}},[e._v(e._s(e.$t("operate.approval")))]),a("let-table-operation",{on:{click:function(a){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("operate.delete")))])]}}])})],1),a("div",{staticStyle:{overflow:"hidden"}},[a("let-pagination",{staticStyle:{float:"right"},attrs:{align:"right",page:e.pagination.page,total:e.pagination.total},on:{change:e.gotoPage}})],1),a("let-modal",{attrs:{title:e.$t("template.view.title"),width:"800px"},model:{value:e.viewModal.show,callback:function(t){e.$set(e.viewModal,"show",t)},expression:"viewModal.show"}},[e.viewModal.model?a("pre",[e._v(e._s(e.viewModal.model))]):e._e(),a("div",{attrs:{slot:"foot"},slot:"foot"})]),a("let-modal",{attrs:{title:e.detailModal.isNew?this.$t("dialog.title.add"):this.$t("dialog.title.edit"),width:"80%"},on:{"on-confirm":e.saveItem,"on-cancel":e.closeDetailModal},model:{value:e.detailModal.show,callback:function(t){e.$set(e.detailModal,"show",t)},expression:"detailModal.show"}},[e.detailModal.model?a("let-form",{ref:"detailForm",attrs:{inline:""}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.appTips"),pattern:"^[a-zA-Z]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.detailModal.model.ServerApp,callback:function(t){e.$set(e.detailModal.model,"ServerApp",t)},expression:"detailModal.model.ServerApp"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceName"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.serviceFormatTips"),required:"","required-tip":e.$t("deployService.form.serviceTips"),pattern:"^[a-zA-Z]([a-zA-Z0-9]+)?$","pattern-tip":e.$t("deployService.form.serviceFormatTips")},model:{value:e.detailModal.model.ServerName,callback:function(t){e.$set(e.detailModal.model,"ServerName",t)},expression:"detailModal.model.ServerName"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.template"),itemWidth:"45%",required:""}},[a("let-select",{attrs:{size:"small",required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.detailModal.model.ServerOption.ServerTemplate,callback:function(t){e.$set(e.detailModal.model.ServerOption,"ServerTemplate",t)},expression:"detailModal.model.ServerOption.ServerTemplate"}},e._l(e.templates,(function(t){return a("let-option",{key:t.TemplateName,attrs:{value:t.TemplateName}},[e._v(e._s(t.TemplateName))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceMark"),itemWidth:"45%"}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.serviceMark")},model:{value:e.detailModal.model.ServerMark,callback:function(t){e.$set(e.detailModal.model,"ServerMark",t)},expression:"detailModal.model.ServerMark"}})],1),a("let-table",{attrs:{data:e.detailModal.model.ServerServant}},[a("let-table-column",{attrs:{title:"OBJ",width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.objTips"),pattern:"^[a-zA-Z0-9]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:t.row.Name,callback:function(a){e.$set(t.row,"Name",a)},expression:"props.row.Name"}})]}}],null,!1,3758810427)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.port"),width:"100px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,max:65535,placeholder:"0-65535",required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Port,callback:function(a){e.$set(t.row,"Port",a)},expression:"props.row.Port"}})]}}],null,!1,826062684)}),a("let-table-column",{attrs:{title:e.$t("deployService.form.portType"),width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{label:!0},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("TCP")]),a("let-radio",{attrs:{label:!1},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("UDP")])]}}],null,!1,1519152386)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.protocol"),width:"180px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{label:!0},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v("TAF")]),a("let-radio",{attrs:{label:!1},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v(e._s(e.$t("serverList.servant.notTAF")))])]}}],null,!1,3809598179)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.threads"),width:"80px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Threads,callback:function(a){e.$set(t.row,"Threads",a)},expression:"props.row.Threads"}})]}}],null,!1,1655720946)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.connections"),width:"100px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Connections,callback:function(a){e.$set(t.row,"Connections",a)},expression:"props.row.Connections"}})]}}],null,!1,2060048682)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.capacity"),width:"120px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Capacity,callback:function(a){e.$set(t.row,"Capacity",a)},expression:"props.row.Capacity"}})]}}],null,!1,58581595)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.timeout"),width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0},model:{value:t.row.Timeout,callback:function(a){e.$set(t.row,"Timeout",a)},expression:"props.row.Timeout"}})]}}],null,!1,1471836343)}),a("let-table-column",{attrs:{width:"10px"}})],1),a("let-form-group",{staticClass:"let-box",attrs:{title:"K8S",inline:"","label-position":"top"}},[a("let-form-item",{attrs:{label:e.$t("deployService.table.th.replicas"),itemWidth:"30%"}},[a("let-input",{attrs:{size:"small",type:"number",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.detailModal.model.ServerK8S.Replicas,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"Replicas",t)},expression:"detailModal.model.ServerK8S.Replicas"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.netMode"),itemWidth:"30%"}},[e.K8SNetModeOptional&&e.K8SNetModeOptional.length>0?a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.detailModal.model.ServerK8S.NetMode,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"NetMode",t)},expression:"detailModal.model.ServerK8S.NetMode"}},e._l(e.K8SNetModeOptional,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1):a("let-input",{attrs:{size:"small",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.detailModal.model.ServerK8S.NetMode,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"NetMode",t)},expression:"detailModal.model.ServerK8S.NetMode"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.nodeSelector"),itemWidth:"30%"}},[e.K8SNodeSelectorOptional&&e.K8SNodeSelectorOptional.length>0?a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.detailModal.model.ServerK8S.NodeSelector,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"NodeSelector",t)},expression:"detailModal.model.ServerK8S.NodeSelector"}},e._l(e.K8SNodeSelectorOptional,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1):a("let-input",{attrs:{size:"small",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.detailModal.model.ServerK8S.NodeSelector,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"NodeSelector",t)},expression:"detailModal.model.ServerK8S.NodeSelector"}})],1)],1)],1):e._e()],1),a("let-modal",{attrs:{title:(e.approvalModal.isNew,this.$t("deployService.title.approval")),width:"80%"},on:{"on-confirm":e.saveApprovalItem,"on-cancel":e.closeApprovalModal},model:{value:e.approvalModal.show,callback:function(t){e.$set(e.approvalModal,"show",t)},expression:"approvalModal.show"}},[e.approvalModal.model?a("let-form",{ref:"approvalForm",attrs:{inline:""}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.appTips"),pattern:"^[a-zA-Z]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.approvalModal.model.ServerApp,callback:function(t){e.$set(e.approvalModal.model,"ServerApp",t)},expression:"approvalModal.model.ServerApp"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceName"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.serviceFormatTips"),required:"","required-tip":e.$t("deployService.form.serviceTips"),pattern:"^[a-zA-Z]([a-zA-Z0-9]+)?$","pattern-tip":e.$t("deployService.form.serviceFormatTips")},model:{value:e.approvalModal.model.ServerName,callback:function(t){e.$set(e.approvalModal.model,"ServerName",t)},expression:"approvalModal.model.ServerName"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.template"),itemWidth:"45%",required:""}},[a("let-select",{attrs:{disabled:"",size:"small",required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.approvalModal.model.ServerOption.ServerTemplate,callback:function(t){e.$set(e.approvalModal.model.ServerOption,"ServerTemplate",t)},expression:"approvalModal.model.ServerOption.ServerTemplate"}},e._l(e.templates,(function(t){return a("let-option",{key:t.TemplateName,attrs:{value:t.TemplateName}},[e._v(e._s(t.TemplateName))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceMark"),itemWidth:"45%"}},[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.serviceMark")},model:{value:e.approvalModal.model.ServerMark,callback:function(t){e.$set(e.approvalModal.model,"ServerMark",t)},expression:"approvalModal.model.ServerMark"}})],1),a("let-table",{attrs:{data:e.approvalModal.model.ServerServant}},[a("let-table-column",{attrs:{title:"OBJ",width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.objTips"),pattern:"^[a-zA-Z0-9]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:t.row.Name,callback:function(a){e.$set(t.row,"Name",a)},expression:"props.row.Name"}})]}}],null,!1,3088624381)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.port"),width:"100px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,max:65535,placeholder:"0-65535",required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Port,callback:function(a){e.$set(t.row,"Port",a)},expression:"props.row.Port"}})]}}],null,!1,2426397722)}),a("let-table-column",{attrs:{title:e.$t("deployService.form.portType"),width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{disabled:"",label:!0},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("TCP")]),a("let-radio",{attrs:{disabled:"",label:!1},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("UDP")])]}}],null,!1,1671426050)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.protocol"),width:"180px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{disabled:"",label:!0},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v("TAF")]),a("let-radio",{attrs:{disabled:"",label:!1},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v(e._s(e.$t("serverList.servant.notTAF")))])]}}],null,!1,4235473251)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.threads"),width:"80px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Threads,callback:function(a){e.$set(t.row,"Threads",a)},expression:"props.row.Threads"}})]}}],null,!1,2306495156)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.connections"),width:"140px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Connections,callback:function(a){e.$set(t.row,"Connections",a)},expression:"props.row.Connections"}})]}}],null,!1,2695745772)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.capacity"),width:"140px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Capacity,callback:function(a){e.$set(t.row,"Capacity",a)},expression:"props.row.Capacity"}})]}}],null,!1,1268742429)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.timeout"),width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0},model:{value:t.row.Timeout,callback:function(a){e.$set(t.row,"Timeout",a)},expression:"props.row.Timeout"}})]}}],null,!1,882398385)}),a("let-table-column",{attrs:{width:"10px"}})],1),a("let-form-group",{staticClass:"let-box",attrs:{title:"K8S",inline:"","label-position":"top"}},[a("let-form-item",{attrs:{label:e.$t("deployService.table.th.replicas"),itemWidth:"30%"}},[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.approvalModal.model.ServerK8S.Replicas,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"Replicas",t)},expression:"approvalModal.model.ServerK8S.Replicas"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.netMode"),itemWidth:"30%"}},[e.K8SNetModeOptional&&e.K8SNetModeOptional.length>0?a("let-select",{attrs:{disabled:"",size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.approvalModal.model.ServerK8S.NetMode,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"NetMode",t)},expression:"approvalModal.model.ServerK8S.NetMode"}},e._l(e.K8SNetModeOptional,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1):a("let-input",{attrs:{disabled:"",size:"small",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.approvalModal.model.ServerK8S.NetMode,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"NetMode",t)},expression:"approvalModal.model.ServerK8S.NetMode"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.nodeSelector"),itemWidth:"30%"}},[e.K8SNodeSelectorOptional&&e.K8SNodeSelectorOptional.length>0?a("let-select",{attrs:{size:"small",disabled:"",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.approvalModal.model.ServerK8S.NodeSelector,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"NodeSelector",t)},expression:"approvalModal.model.ServerK8S.NodeSelector"}},e._l(e.K8SNodeSelectorOptional,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1):a("let-input",{attrs:{size:"small",disabled:"",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.approvalModal.model.ServerK8S.NodeSelector,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"NodeSelector",t)},expression:"approvalModal.model.ServerK8S.NodeSelector"}})],1)],1),a("div",[a("let-form-item",{attrs:{label:e.$t("serviceApproval.ApprovalResult"),required:""}},[a("let-select",{attrs:{size:"small",required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:e.approvalModal.model.ApprovalResult,callback:function(t){e.$set(e.approvalModal.model,"ApprovalResult",t)},expression:"approvalModal.model.ApprovalResult"}},e._l(e.approvalResult,(function(t){return a("let-option",{key:t.label,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1),a("div",[a("let-form-item",{attrs:{label:e.$t("serviceApproval.ApprovalMark"),required:""}},[a("let-input",{attrs:{type:"textarea",rows:3,placeholder:e.$t("serviceApproval.ApprovalMark"),required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:e.approvalModal.model.ApprovalMark,callback:function(t){e.$set(e.approvalModal.model,"ApprovalMark",t)},expression:"approvalModal.model.ApprovalMark"}})],1)],1)],1):e._e()],1)],1)},pt=[],mt=[{label:"通过",value:"true"},{label:"驳回",value:"false"}],ut={name:"OperationApproval",data:function(){return{approvalResult:mt,templates:[],query:{ServerApp:"",ServerName:""},items:[],pagination:{page:1,size:10,total:1},K8SNetModeOptional:[],K8SNodeSelectorOptional:[],viewModal:{show:!1,model:null},detailModal:{show:!1,model:null,isNew:!1},approvalModal:{show:!1,model:null,isNew:!1}}},mounted:function(){this.getServerTemplate(),this.fetchData(),this.getDefaultValue()},methods:{gotoPage:function(e){this.pagination.page=e,this.fetchData()},getDefaultValue:function(){var e=this,t=this.K8SNetModeOptional,a=this.K8SNodeSelectorOptional;this.$ajax.getJSON("/server/api/default",{}).then((function(o){o.K8SNetModeOptional&&(t=o.K8SNetModeOptional),o.K8SNodeSelectorOptional&&(a=o.K8SNodeSelectorOptional),e.K8SNetModeOptional=t,e.K8SNodeSelectorOptional=a})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},fetchData:function(){var e=this,t=this.$refs.table.$loading.show();return this.$ajax.getJSON("/server/api/deploy_select",{ServerApp:this.query.ServerApp,ServerName:this.query.ServerName,page:this.pagination.page,size:this.pagination.size}).then((function(a){t.hide(),e.items=a.Data})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},search:function(){this.fetchData()},closeDetailModal:function(){this.$refs.detailForm.resetValid(),this.detailModal.show=!1,this.detailModal.model=null},closeApprovalModal:function(){this.$refs.approvalForm.resetValid(),this.approvalModal.show=!1,this.approvalModal.model=null},addItem:function(){this.detailModal.model={},this.detailModal.show=!0,this.detailModal.isNew=!0},viewItem:function(e){this.viewModal.model=e,this.viewModal.show=!0},editItem:function(e){this.detailModal.model=e,this.detailModal.show=!0,this.detailModal.isNew=!1},approvalItem:function(e){this.approvalModal.model=e,this.approvalModal.show=!0,this.approvalModal.isNew=!1},saveItem:function(){var e=this;if(this.$refs.detailForm.validate()){var t=this.detailModal.model,a=this.$Loading.show();this.$ajax.postJSON("/server/api/deploy_update",t).then((function(){a.hide(),e.fetchData().then((function(){e.detailModal.show=!1,e.$tip.success(e.$t("common.success"))}))})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},saveApprovalItem:function(){var e=this;if(this.$refs.approvalForm.validate()){var t=this.approvalModal.model,a=this.$Loading.show();this.$ajax.postJSON("/server/api/approval_create",t).then((function(){a.hide(),e.fetchData().then((function(){e.approvalModal.show=!1,e.$tip.success(e.$t("common.success"))}))})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},removeItem:function(e){var t=this;this.$confirm(this.$t("template.delete.confirmTips"),this.$t("common.alert")).then((function(){var a=t.$Loading.show();t.$ajax.getJSON("/server/api/deploy_delete",{DeployId:e.DeployId}).then((function(){a.hide(),t.fetchData().then((function(){t.$tip.success(t.$t("common.success"))}))})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))})).catch((function(){}))},getServerTemplate:function(){var e=this;this.$ajax.getJSON("/server/api/template_select",{isAll:!0}).then((function(t){e.templates=t.Data})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}}},ht=ut,vt=(a("9cfa"),Object(w["a"])(ht,ct,pt,!1,null,null,null)),ft=vt.exports,St=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_operation_approval"},[a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(t){return t.preventDefault(),e.search(t)}}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.ServerApp,callback:function(t){e.$set(e.query,"ServerApp",t)},expression:"query.ServerApp"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceName")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.ServerName,callback:function(t){e.$set(e.query,"ServerName",t)},expression:"query.ServerName"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.search")))])],1)],1),a("let-table",{ref:"table",attrs:{data:e.items,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:e.$t("deployService.form.app"),prop:"ServerApp",width:"25%"}}),a("let-table-column",{attrs:{title:e.$t("deployService.form.serviceName"),prop:"ServerName",width:"25%"}}),a("let-table-column",{attrs:{title:e.$t("serviceApproval.RequestPerson"),prop:"RequestPerson"}}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.editItem(t.row)}}},[e._v(e._s(e.$t("operate.update")))]),a("let-table-operation",{on:{click:function(a){return e.approvalItem(t.row)}}},[e._v(e._s(e.$t("operate.approval")))]),a("let-table-operation",{on:{click:function(a){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("operate.delete")))])]}}])})],1),a("div",{staticStyle:{overflow:"hidden"}},[a("let-pagination",{staticStyle:{float:"right"},attrs:{align:"right",page:e.pagination.page,total:e.pagination.total},on:{change:e.gotoPage}})],1),a("let-modal",{attrs:{title:e.$t("template.view.title"),width:"800px"},model:{value:e.viewModal.show,callback:function(t){e.$set(e.viewModal,"show",t)},expression:"viewModal.show"}},[e.viewModal.model?a("pre",[e._v(e._s(e.viewModal.model))]):e._e(),a("div",{attrs:{slot:"foot"},slot:"foot"})]),a("let-modal",{attrs:{title:e.detailModal.isNew?this.$t("dialog.title.add"):this.$t("dialog.title.edit"),width:"80%"},on:{"on-confirm":e.saveItem,"on-cancel":e.closeDetailModal},model:{value:e.detailModal.show,callback:function(t){e.$set(e.detailModal,"show",t)},expression:"detailModal.show"}},[e.detailModal.model?a("let-form",{ref:"detailForm",attrs:{inline:""}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.appTips"),pattern:"^[a-zA-Z]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.detailModal.model.ServerApp,callback:function(t){e.$set(e.detailModal.model,"ServerApp",t)},expression:"detailModal.model.ServerApp"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceName"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.serviceFormatTips"),required:"","required-tip":e.$t("deployService.form.serviceTips"),pattern:"^[a-zA-Z]([a-zA-Z0-9]+)?$","pattern-tip":e.$t("deployService.form.serviceFormatTips")},model:{value:e.detailModal.model.ServerName,callback:function(t){e.$set(e.detailModal.model,"ServerName",t)},expression:"detailModal.model.ServerName"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.template"),itemWidth:"45%",required:""}},[a("let-select",{attrs:{size:"small",required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.detailModal.model.ServerOption.ServerTemplate,callback:function(t){e.$set(e.detailModal.model.ServerOption,"ServerTemplate",t)},expression:"detailModal.model.ServerOption.ServerTemplate"}},e._l(e.templates,(function(t){return a("let-option",{key:t.TemplateName,attrs:{value:t.TemplateName}},[e._v(e._s(t.TemplateName))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceMark"),itemWidth:"45%"}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.serviceMark")},model:{value:e.detailModal.model.ServerMark,callback:function(t){e.$set(e.detailModal.model,"ServerMark",t)},expression:"detailModal.model.ServerMark"}})],1),a("let-table",{attrs:{data:e.detailModal.model.ServerServant}},[a("let-table-column",{attrs:{title:"OBJ",width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.objTips"),pattern:"^[a-zA-Z0-9]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:t.row.Name,callback:function(a){e.$set(t.row,"Name",a)},expression:"props.row.Name"}})]}}],null,!1,3758810427)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.port"),width:"100px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,max:65535,placeholder:"0-65535",required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Port,callback:function(a){e.$set(t.row,"Port",a)},expression:"props.row.Port"}})]}}],null,!1,826062684)}),a("let-table-column",{attrs:{title:e.$t("deployService.form.portType"),width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{label:!0},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("TCP")]),a("let-radio",{attrs:{label:!1},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("UDP")])]}}],null,!1,1519152386)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.protocol"),width:"180px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{label:!0},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v("TAF")]),a("let-radio",{attrs:{label:!1},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v(e._s(e.$t("serverList.servant.notTAF")))])]}}],null,!1,3809598179)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.threads"),width:"80px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Threads,callback:function(a){e.$set(t.row,"Threads",a)},expression:"props.row.Threads"}})]}}],null,!1,1655720946)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.connections"),width:"100px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Connections,callback:function(a){e.$set(t.row,"Connections",a)},expression:"props.row.Connections"}})]}}],null,!1,2060048682)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.capacity"),width:"120px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Capacity,callback:function(a){e.$set(t.row,"Capacity",a)},expression:"props.row.Capacity"}})]}}],null,!1,58581595)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.timeout"),width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0},model:{value:t.row.Timeout,callback:function(a){e.$set(t.row,"Timeout",a)},expression:"props.row.Timeout"}})]}}],null,!1,1471836343)}),a("let-table-column",{attrs:{width:"10px"}})],1),a("let-form-group",{staticClass:"let-box",attrs:{title:"K8S",inline:"","label-position":"top"}},[a("let-form-item",{attrs:{label:e.$t("deployService.table.th.replicas"),itemWidth:"30%"}},[a("let-input",{attrs:{size:"small",type:"number",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.detailModal.model.ServerK8S.Replicas,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"Replicas",t)},expression:"detailModal.model.ServerK8S.Replicas"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.netMode"),itemWidth:"30%"}},[e.K8SNetModeOptional&&e.K8SNetModeOptional.length>0?a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.detailModal.model.ServerK8S.NetMode,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"NetMode",t)},expression:"detailModal.model.ServerK8S.NetMode"}},e._l(e.K8SNetModeOptional,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1):a("let-input",{attrs:{size:"small",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.detailModal.model.ServerK8S.NetMode,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"NetMode",t)},expression:"detailModal.model.ServerK8S.NetMode"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.nodeSelector"),itemWidth:"30%"}},[e.K8SNodeSelectorOptional&&e.K8SNodeSelectorOptional.length>0?a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.detailModal.model.ServerK8S.NodeSelector,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"NodeSelector",t)},expression:"detailModal.model.ServerK8S.NodeSelector"}},e._l(e.K8SNodeSelectorOptional,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1):a("let-input",{attrs:{size:"small",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.detailModal.model.ServerK8S.NodeSelector,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"NodeSelector",t)},expression:"detailModal.model.ServerK8S.NodeSelector"}})],1)],1)],1):e._e()],1),a("let-modal",{attrs:{title:(e.approvalModal.isNew,this.$t("deployService.title.approval")),width:"80%"},on:{"on-confirm":e.saveApprovalItem,"on-cancel":e.closeApprovalModal},model:{value:e.approvalModal.show,callback:function(t){e.$set(e.approvalModal,"show",t)},expression:"approvalModal.show"}},[e.approvalModal.model?a("let-form",{ref:"approvalForm",attrs:{inline:""}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.appTips"),pattern:"^[a-zA-Z]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.approvalModal.model.ServerApp,callback:function(t){e.$set(e.approvalModal.model,"ServerApp",t)},expression:"approvalModal.model.ServerApp"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceName"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.serviceFormatTips"),required:"","required-tip":e.$t("deployService.form.serviceTips"),pattern:"^[a-zA-Z]([a-zA-Z0-9]+)?$","pattern-tip":e.$t("deployService.form.serviceFormatTips")},model:{value:e.approvalModal.model.ServerName,callback:function(t){e.$set(e.approvalModal.model,"ServerName",t)},expression:"approvalModal.model.ServerName"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.template"),itemWidth:"45%",required:""}},[a("let-select",{attrs:{disabled:"",size:"small",required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.approvalModal.model.ServerOption.ServerTemplate,callback:function(t){e.$set(e.approvalModal.model.ServerOption,"ServerTemplate",t)},expression:"approvalModal.model.ServerOption.ServerTemplate"}},e._l(e.templates,(function(t){return a("let-option",{key:t.TemplateName,attrs:{value:t.TemplateName}},[e._v(e._s(t.TemplateName))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceMark"),itemWidth:"45%"}},[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.serviceMark")},model:{value:e.approvalModal.model.ServerMark,callback:function(t){e.$set(e.approvalModal.model,"ServerMark",t)},expression:"approvalModal.model.ServerMark"}})],1),a("let-table",{attrs:{data:e.approvalModal.model.ServerServant}},[a("let-table-column",{attrs:{title:"OBJ",width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.objTips"),pattern:"^[a-zA-Z0-9]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:t.row.Name,callback:function(a){e.$set(t.row,"Name",a)},expression:"props.row.Name"}})]}}],null,!1,3088624381)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.port"),width:"100px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,max:65535,placeholder:"0-65535",required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Port,callback:function(a){e.$set(t.row,"Port",a)},expression:"props.row.Port"}})]}}],null,!1,2426397722)}),a("let-table-column",{attrs:{title:e.$t("deployService.form.portType"),width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{disabled:"",label:!0},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("TCP")]),a("let-radio",{attrs:{disabled:"",label:!1},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("UDP")])]}}],null,!1,1671426050)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.protocol"),width:"180px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{disabled:"",label:!0},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v("TAF")]),a("let-radio",{attrs:{disabled:"",label:!1},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v(e._s(e.$t("serverList.servant.notTAF")))])]}}],null,!1,4235473251)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.threads"),width:"80px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Threads,callback:function(a){e.$set(t.row,"Threads",a)},expression:"props.row.Threads"}})]}}],null,!1,2306495156)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.connections"),width:"140px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Connections,callback:function(a){e.$set(t.row,"Connections",a)},expression:"props.row.Connections"}})]}}],null,!1,2695745772)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.capacity"),width:"140px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Capacity,callback:function(a){e.$set(t.row,"Capacity",a)},expression:"props.row.Capacity"}})]}}],null,!1,1268742429)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.timeout"),width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0},model:{value:t.row.Timeout,callback:function(a){e.$set(t.row,"Timeout",a)},expression:"props.row.Timeout"}})]}}],null,!1,882398385)}),a("let-table-column",{attrs:{width:"10px"}})],1),a("let-form-group",{staticClass:"let-box",attrs:{title:"K8S",inline:"","label-position":"top"}},[a("let-form-item",{attrs:{label:e.$t("deployService.table.th.replicas"),itemWidth:"30%"}},[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.approvalModal.model.ServerK8S.Replicas,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"Replicas",t)},expression:"approvalModal.model.ServerK8S.Replicas"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.netMode"),itemWidth:"30%"}},[e.K8SNetModeOptional&&e.K8SNetModeOptional.length>0?a("let-select",{attrs:{disabled:"",size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.approvalModal.model.ServerK8S.NetMode,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"NetMode",t)},expression:"approvalModal.model.ServerK8S.NetMode"}},e._l(e.K8SNetModeOptional,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1):a("let-input",{attrs:{disabled:"",size:"small",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.approvalModal.model.ServerK8S.NetMode,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"NetMode",t)},expression:"approvalModal.model.ServerK8S.NetMode"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.nodeSelector"),itemWidth:"30%"}},[e.K8SNodeSelectorOptional&&e.K8SNodeSelectorOptional.length>0?a("let-select",{attrs:{size:"small",disabled:"",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.approvalModal.model.ServerK8S.NodeSelector,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"NodeSelector",t)},expression:"approvalModal.model.ServerK8S.NodeSelector"}},e._l(e.K8SNodeSelectorOptional,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1):a("let-input",{attrs:{size:"small",disabled:"",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.approvalModal.model.ServerK8S.NodeSelector,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"NodeSelector",t)},expression:"approvalModal.model.ServerK8S.NodeSelector"}})],1)],1),a("div",[a("let-form-item",{attrs:{label:e.$t("serviceApproval.ApprovalResult"),required:""}},[a("let-select",{attrs:{size:"small",required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:e.approvalModal.model.ApprovalResult,callback:function(t){e.$set(e.approvalModal.model,"ApprovalResult",t)},expression:"approvalModal.model.ApprovalResult"}},e._l(e.approvalResult,(function(t){return a("let-option",{key:t.label,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1),a("div",[a("let-form-item",{attrs:{label:e.$t("serviceApproval.ApprovalMark"),required:""}},[a("let-input",{attrs:{type:"textarea",rows:3,placeholder:e.$t("serviceApproval.ApprovalMark"),required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:e.approvalModal.model.ApprovalMark,callback:function(t){e.$set(e.approvalModal.model,"ApprovalMark",t)},expression:"approvalModal.model.ApprovalMark"}})],1)],1)],1):e._e()],1)],1)},bt=[],$t=[{label:"通过",value:"true"},{label:"驳回",value:"false"}],_t={name:"OperationApproval",data:function(){return{approvalResult:$t,templates:[],query:{ServerApp:"",ServerName:""},items:[],pagination:{page:1,size:10,total:1},K8SNetModeOptional:[],K8SNodeSelectorOptional:[],viewModal:{show:!1,model:null},detailModal:{show:!1,model:null,isNew:!1},approvalModal:{show:!1,model:null,isNew:!1}}},mounted:function(){this.getServerTemplate(),this.fetchData(),this.getDefaultValue()},methods:{gotoPage:function(e){this.pagination.page=e,this.fetchData()},getDefaultValue:function(){var e=this,t=this.K8SNetModeOptional,a=this.K8SNodeSelectorOptional;this.$ajax.getJSON("/server/api/default",{}).then((function(o){o.K8SNetModeOptional&&(t=o.K8SNetModeOptional),o.K8SNodeSelectorOptional&&(a=o.K8SNodeSelectorOptional),e.K8SNetModeOptional=t,e.K8SNodeSelectorOptional=a})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},fetchData:function(){var e=this,t=this.$refs.table.$loading.show();return this.$ajax.getJSON("/server/api/deploy_select",{ServerApp:this.query.ServerApp,ServerName:this.query.ServerName,page:this.pagination.page,size:this.pagination.size}).then((function(a){t.hide(),e.items=a.Data})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},search:function(){this.fetchData()},closeDetailModal:function(){this.$refs.detailForm.resetValid(),this.detailModal.show=!1,this.detailModal.model=null},closeApprovalModal:function(){this.$refs.approvalForm.resetValid(),this.approvalModal.show=!1,this.approvalModal.model=null},addItem:function(){this.detailModal.model={},this.detailModal.show=!0,this.detailModal.isNew=!0},viewItem:function(e){this.viewModal.model=e,this.viewModal.show=!0},editItem:function(e){this.detailModal.model=e,this.detailModal.show=!0,this.detailModal.isNew=!1},approvalItem:function(e){this.approvalModal.model=e,this.approvalModal.show=!0,this.approvalModal.isNew=!1},saveItem:function(){var e=this;if(this.$refs.detailForm.validate()){var t=this.detailModal.model,a=this.$Loading.show();this.$ajax.postJSON("/server/api/deploy_update",t).then((function(){a.hide(),e.fetchData().then((function(){e.detailModal.show=!1,e.$tip.success(e.$t("common.success"))}))})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},saveApprovalItem:function(){var e=this;if(this.$refs.approvalForm.validate()){var t=this.approvalModal.model,a=this.$Loading.show();this.$ajax.postJSON("/server/api/approval_create",t).then((function(){a.hide(),e.fetchData().then((function(){e.approvalModal.show=!1,e.$tip.success(e.$t("common.success"))}))})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},removeItem:function(e){var t=this;this.$confirm(this.$t("template.delete.confirmTips"),this.$t("common.alert")).then((function(){var a=t.$Loading.show();t.$ajax.getJSON("/server/api/deploy_delete",{DeployId:e.DeployId}).then((function(){a.hide(),t.fetchData().then((function(){t.$tip.success(t.$t("common.success"))}))})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))})).catch((function(){}))},getServerTemplate:function(){var e=this;this.$ajax.getJSON("/server/api/template_select",{isAll:!0}).then((function(t){e.templates=t.Data})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}}},wt=_t,gt=(a("6ab2"),Object(w["a"])(wt,St,bt,!1,null,null,null)),yt=gt.exports,Mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_operation_approval"},[a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(t){return t.preventDefault(),e.search(t)}}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.ServerApp,callback:function(t){e.$set(e.query,"ServerApp",t)},expression:"query.ServerApp"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceName")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.ServerName,callback:function(t){e.$set(e.query,"ServerName",t)},expression:"query.ServerName"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.search")))])],1)],1),a("let-table",{ref:"table",attrs:{data:e.items,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:e.$t("deployService.form.app"),prop:"ServerApp",width:"25%"}}),a("let-table-column",{attrs:{title:e.$t("deployService.form.serviceName"),prop:"ServerName",width:"25%"}}),a("let-table-column",{attrs:{title:e.$t("serviceApproval.RequestPerson"),prop:"RequestPerson"}}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.editItem(t.row)}}},[e._v(e._s(e.$t("operate.update")))]),a("let-table-operation",{on:{click:function(a){return e.approvalItem(t.row)}}},[e._v(e._s(e.$t("operate.approval")))]),a("let-table-operation",{on:{click:function(a){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("operate.delete")))])]}}])})],1),a("div",{staticStyle:{overflow:"hidden"}},[a("let-pagination",{staticStyle:{float:"right"},attrs:{align:"right",page:e.pagination.page,total:e.pagination.total},on:{change:e.gotoPage}})],1),a("let-modal",{attrs:{title:e.$t("template.view.title"),width:"800px"},model:{value:e.viewModal.show,callback:function(t){e.$set(e.viewModal,"show",t)},expression:"viewModal.show"}},[e.viewModal.model?a("pre",[e._v(e._s(e.viewModal.model))]):e._e(),a("div",{attrs:{slot:"foot"},slot:"foot"})]),a("let-modal",{attrs:{title:e.detailModal.isNew?this.$t("dialog.title.add"):this.$t("dialog.title.edit"),width:"80%"},on:{"on-confirm":e.saveItem,"on-cancel":e.closeDetailModal},model:{value:e.detailModal.show,callback:function(t){e.$set(e.detailModal,"show",t)},expression:"detailModal.show"}},[e.detailModal.model?a("let-form",{ref:"detailForm",attrs:{inline:""}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.appTips"),pattern:"^[a-zA-Z]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.detailModal.model.ServerApp,callback:function(t){e.$set(e.detailModal.model,"ServerApp",t)},expression:"detailModal.model.ServerApp"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceName"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.serviceFormatTips"),required:"","required-tip":e.$t("deployService.form.serviceTips"),pattern:"^[a-zA-Z]([a-zA-Z0-9]+)?$","pattern-tip":e.$t("deployService.form.serviceFormatTips")},model:{value:e.detailModal.model.ServerName,callback:function(t){e.$set(e.detailModal.model,"ServerName",t)},expression:"detailModal.model.ServerName"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.template"),itemWidth:"45%",required:""}},[a("let-select",{attrs:{size:"small",required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.detailModal.model.ServerOption.ServerTemplate,callback:function(t){e.$set(e.detailModal.model.ServerOption,"ServerTemplate",t)},expression:"detailModal.model.ServerOption.ServerTemplate"}},e._l(e.templates,(function(t){return a("let-option",{key:t.TemplateName,attrs:{value:t.TemplateName}},[e._v(e._s(t.TemplateName))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceMark"),itemWidth:"45%"}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.serviceMark")},model:{value:e.detailModal.model.ServerMark,callback:function(t){e.$set(e.detailModal.model,"ServerMark",t)},expression:"detailModal.model.ServerMark"}})],1),a("let-table",{attrs:{data:e.detailModal.model.ServerServant}},[a("let-table-column",{attrs:{title:"OBJ",width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.objTips"),pattern:"^[a-zA-Z0-9]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:t.row.Name,callback:function(a){e.$set(t.row,"Name",a)},expression:"props.row.Name"}})]}}],null,!1,3758810427)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.port"),width:"100px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,max:65535,placeholder:"0-65535",required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Port,callback:function(a){e.$set(t.row,"Port",a)},expression:"props.row.Port"}})]}}],null,!1,826062684)}),a("let-table-column",{attrs:{title:e.$t("deployService.form.portType"),width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{label:!0},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("TCP")]),a("let-radio",{attrs:{label:!1},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("UDP")])]}}],null,!1,1519152386)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.protocol"),width:"180px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{label:!0},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v("TAF")]),a("let-radio",{attrs:{label:!1},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v(e._s(e.$t("serverList.servant.notTAF")))])]}}],null,!1,3809598179)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.threads"),width:"80px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Threads,callback:function(a){e.$set(t.row,"Threads",a)},expression:"props.row.Threads"}})]}}],null,!1,1655720946)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.connections"),width:"100px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Connections,callback:function(a){e.$set(t.row,"Connections",a)},expression:"props.row.Connections"}})]}}],null,!1,2060048682)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.capacity"),width:"120px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Capacity,callback:function(a){e.$set(t.row,"Capacity",a)},expression:"props.row.Capacity"}})]}}],null,!1,58581595)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.timeout"),width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-input",{attrs:{size:"small",type:"number",min:0},model:{value:t.row.Timeout,callback:function(a){e.$set(t.row,"Timeout",a)},expression:"props.row.Timeout"}})]}}],null,!1,1471836343)}),a("let-table-column",{attrs:{width:"10px"}})],1),a("let-form-group",{staticClass:"let-box",attrs:{title:"K8S",inline:"","label-position":"top"}},[a("let-form-item",{attrs:{label:e.$t("deployService.table.th.replicas"),itemWidth:"30%"}},[a("let-input",{attrs:{size:"small",type:"number",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.detailModal.model.ServerK8S.Replicas,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"Replicas",t)},expression:"detailModal.model.ServerK8S.Replicas"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.netMode"),itemWidth:"30%"}},[e.K8SNetModeOptional&&e.K8SNetModeOptional.length>0?a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.detailModal.model.ServerK8S.NetMode,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"NetMode",t)},expression:"detailModal.model.ServerK8S.NetMode"}},e._l(e.K8SNetModeOptional,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1):a("let-input",{attrs:{size:"small",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.detailModal.model.ServerK8S.NetMode,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"NetMode",t)},expression:"detailModal.model.ServerK8S.NetMode"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.nodeSelector"),itemWidth:"30%"}},[e.K8SNodeSelectorOptional&&e.K8SNodeSelectorOptional.length>0?a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.detailModal.model.ServerK8S.NodeSelector,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"NodeSelector",t)},expression:"detailModal.model.ServerK8S.NodeSelector"}},e._l(e.K8SNodeSelectorOptional,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1):a("let-input",{attrs:{size:"small",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.detailModal.model.ServerK8S.NodeSelector,callback:function(t){e.$set(e.detailModal.model.ServerK8S,"NodeSelector",t)},expression:"detailModal.model.ServerK8S.NodeSelector"}})],1)],1)],1):e._e()],1),a("let-modal",{attrs:{title:(e.approvalModal.isNew,this.$t("deployService.title.approval")),width:"80%"},on:{"on-confirm":e.saveApprovalItem,"on-cancel":e.closeApprovalModal},model:{value:e.approvalModal.show,callback:function(t){e.$set(e.approvalModal,"show",t)},expression:"approvalModal.show"}},[e.approvalModal.model?a("let-form",{ref:"approvalForm",attrs:{inline:""}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.appTips"),pattern:"^[a-zA-Z]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.approvalModal.model.ServerApp,callback:function(t){e.$set(e.approvalModal.model,"ServerApp",t)},expression:"approvalModal.model.ServerApp"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceName"),itemWidth:"45%",required:""}},[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.serviceFormatTips"),required:"","required-tip":e.$t("deployService.form.serviceTips"),pattern:"^[a-zA-Z]([a-zA-Z0-9]+)?$","pattern-tip":e.$t("deployService.form.serviceFormatTips")},model:{value:e.approvalModal.model.ServerName,callback:function(t){e.$set(e.approvalModal.model,"ServerName",t)},expression:"approvalModal.model.ServerName"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.template"),itemWidth:"45%",required:""}},[a("let-select",{attrs:{disabled:"",size:"small",required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.approvalModal.model.ServerOption.ServerTemplate,callback:function(t){e.$set(e.approvalModal.model.ServerOption,"ServerTemplate",t)},expression:"approvalModal.model.ServerOption.ServerTemplate"}},e._l(e.templates,(function(t){return a("let-option",{key:t.TemplateName,attrs:{value:t.TemplateName}},[e._v(e._s(t.TemplateName))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.serviceMark"),itemWidth:"45%"}},[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.serviceMark")},model:{value:e.approvalModal.model.ServerMark,callback:function(t){e.$set(e.approvalModal.model,"ServerMark",t)},expression:"approvalModal.model.ServerMark"}})],1),a("let-table",{attrs:{data:e.approvalModal.model.ServerServant}},[a("let-table-column",{attrs:{title:"OBJ",width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.objTips"),pattern:"^[a-zA-Z0-9]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:t.row.Name,callback:function(a){e.$set(t.row,"Name",a)},expression:"props.row.Name"}})]}}],null,!1,3088624381)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.port"),width:"100px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,max:65535,placeholder:"0-65535",required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Port,callback:function(a){e.$set(t.row,"Port",a)},expression:"props.row.Port"}})]}}],null,!1,2426397722)}),a("let-table-column",{attrs:{title:e.$t("deployService.form.portType"),width:"150px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{disabled:"",label:!0},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("TCP")]),a("let-radio",{attrs:{disabled:"",label:!1},model:{value:t.row.IsTcp,callback:function(a){e.$set(t.row,"IsTcp",a)},expression:"props.row.IsTcp"}},[e._v("UDP")])]}}],null,!1,1671426050)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.protocol"),width:"180px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-radio",{attrs:{disabled:"",label:!0},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v("TAF")]),a("let-radio",{attrs:{disabled:"",label:!1},model:{value:t.row.IsTaf,callback:function(a){e.$set(t.row,"IsTaf",a)},expression:"props.row.IsTaf"}},[e._v(e._s(e.$t("serverList.servant.notTAF")))])]}}],null,!1,4235473251)}),a("let-table-column",{attrs:{title:e.$t("deployService.table.th.threads"),width:"80px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Threads,callback:function(a){e.$set(t.row,"Threads",a)},expression:"props.row.Threads"}})]}}],null,!1,2306495156)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.connections"),width:"140px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Connections,callback:function(a){e.$set(t.row,"Connections",a)},expression:"props.row.Connections"}})]}}],null,!1,2695745772)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.capacity"),width:"140px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("span",{staticClass:"required"},[e._v(e._s(t.column.title))])]}},{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:t.row.Capacity,callback:function(a){e.$set(t.row,"Capacity",a)},expression:"props.row.Capacity"}})]}}],null,!1,1268742429)}),a("let-table-column",{attrs:{title:e.$t("serverList.table.servant.timeout"),width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0},model:{value:t.row.Timeout,callback:function(a){e.$set(t.row,"Timeout",a)},expression:"props.row.Timeout"}})]}}],null,!1,882398385)}),a("let-table-column",{attrs:{width:"10px"}})],1),a("let-form-group",{staticClass:"let-box",attrs:{title:"K8S",inline:"","label-position":"top"}},[a("let-form-item",{attrs:{label:e.$t("deployService.table.th.replicas"),itemWidth:"30%"}},[a("let-input",{attrs:{disabled:"",size:"small",type:"number",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.approvalModal.model.ServerK8S.Replicas,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"Replicas",t)},expression:"approvalModal.model.ServerK8S.Replicas"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.netMode"),itemWidth:"30%"}},[e.K8SNetModeOptional&&e.K8SNetModeOptional.length>0?a("let-select",{attrs:{disabled:"",size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.approvalModal.model.ServerK8S.NetMode,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"NetMode",t)},expression:"approvalModal.model.ServerK8S.NetMode"}},e._l(e.K8SNetModeOptional,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1):a("let-input",{attrs:{disabled:"",size:"small",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.approvalModal.model.ServerK8S.NetMode,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"NetMode",t)},expression:"approvalModal.model.ServerK8S.NetMode"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.table.th.nodeSelector"),itemWidth:"30%"}},[e.K8SNodeSelectorOptional&&e.K8SNodeSelectorOptional.length>0?a("let-select",{attrs:{size:"small",disabled:"",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.approvalModal.model.ServerK8S.NodeSelector,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"NodeSelector",t)},expression:"approvalModal.model.ServerK8S.NodeSelector"}},e._l(e.K8SNodeSelectorOptional,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1):a("let-input",{attrs:{size:"small",disabled:"",min:0,placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.table.tips.empty"),"pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.approvalModal.model.ServerK8S.NodeSelector,callback:function(t){e.$set(e.approvalModal.model.ServerK8S,"NodeSelector",t)},expression:"approvalModal.model.ServerK8S.NodeSelector"}})],1)],1),a("div",[a("let-form-item",{attrs:{label:e.$t("serviceApproval.ApprovalResult"),required:""}},[a("let-select",{attrs:{size:"small",required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:e.approvalModal.model.ApprovalResult,callback:function(t){e.$set(e.approvalModal.model,"ApprovalResult",t)},expression:"approvalModal.model.ApprovalResult"}},e._l(e.approvalResult,(function(t){return a("let-option",{key:t.label,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1),a("div",[a("let-form-item",{attrs:{label:e.$t("serviceApproval.ApprovalMark"),required:""}},[a("let-input",{attrs:{type:"textarea",rows:3,placeholder:e.$t("serviceApproval.ApprovalMark"),required:"","required-tip":e.$t("deployService.table.tips.empty")},model:{value:e.approvalModal.model.ApprovalMark,callback:function(t){e.$set(e.approvalModal.model,"ApprovalMark",t)},expression:"approvalModal.model.ApprovalMark"}})],1)],1)],1):e._e()],1)],1)},kt=[],Nt=[{label:"通过",value:"true"},{label:"驳回",value:"false"}],xt={name:"OperationApproval",data:function(){return{approvalResult:Nt,templates:[],query:{ServerApp:"",ServerName:""},items:[],pagination:{page:1,size:10,total:1},K8SNetModeOptional:[],K8SNodeSelectorOptional:[],viewModal:{show:!1,model:null},detailModal:{show:!1,model:null,isNew:!1},approvalModal:{show:!1,model:null,isNew:!1}}},mounted:function(){this.getServerTemplate(),this.fetchData(),this.getDefaultValue()},methods:{gotoPage:function(e){this.pagination.page=e,this.fetchData()},getDefaultValue:function(){var e=this,t=this.K8SNetModeOptional,a=this.K8SNodeSelectorOptional;this.$ajax.getJSON("/server/api/default",{}).then((function(o){o.K8SNetModeOptional&&(t=o.K8SNetModeOptional),o.K8SNodeSelectorOptional&&(a=o.K8SNodeSelectorOptional),e.K8SNetModeOptional=t,e.K8SNodeSelectorOptional=a})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},fetchData:function(){var e=this,t=this.$refs.table.$loading.show();return this.$ajax.getJSON("/server/api/deploy_select",{ServerApp:this.query.ServerApp,ServerName:this.query.ServerName,page:this.pagination.page,size:this.pagination.size}).then((function(a){t.hide(),e.items=a.Data})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},search:function(){this.fetchData()},closeDetailModal:function(){this.$refs.detailForm.resetValid(),this.detailModal.show=!1,this.detailModal.model=null},closeApprovalModal:function(){this.$refs.approvalForm.resetValid(),this.approvalModal.show=!1,this.approvalModal.model=null},addItem:function(){this.detailModal.model={},this.detailModal.show=!0,this.detailModal.isNew=!0},viewItem:function(e){this.viewModal.model=e,this.viewModal.show=!0},editItem:function(e){this.detailModal.model=e,this.detailModal.show=!0,this.detailModal.isNew=!1},approvalItem:function(e){this.approvalModal.model=e,this.approvalModal.show=!0,this.approvalModal.isNew=!1},saveItem:function(){var e=this;if(this.$refs.detailForm.validate()){var t=this.detailModal.model,a=this.$Loading.show();this.$ajax.postJSON("/server/api/deploy_update",t).then((function(){a.hide(),e.fetchData().then((function(){e.detailModal.show=!1,e.$tip.success(e.$t("common.success"))}))})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},saveApprovalItem:function(){var e=this;if(this.$refs.approvalForm.validate()){var t=this.approvalModal.model,a=this.$Loading.show();this.$ajax.postJSON("/server/api/approval_create",t).then((function(){a.hide(),e.fetchData().then((function(){e.approvalModal.show=!1,e.$tip.success(e.$t("common.success"))}))})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},removeItem:function(e){var t=this;this.$confirm(this.$t("template.delete.confirmTips"),this.$t("common.alert")).then((function(){var a=t.$Loading.show();t.$ajax.getJSON("/server/api/deploy_delete",{DeployId:e.DeployId}).then((function(){a.hide(),t.fetchData().then((function(){t.$tip.success(t.$t("common.success"))}))})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))})).catch((function(){}))},getServerTemplate:function(){var e=this;this.$ajax.getJSON("/server/api/template_select",{isAll:!0}).then((function(t){e.templates=t.Data})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}}},At=xt,Tt=(a("0c35"),Object(w["a"])(At,Mt,kt,!1,null,null,null)),Ct=Tt.exports,Lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_base"},[e.treeData&&e.treeData.length>0?a("el-menu",{staticClass:"tree",attrs:{"default-active":e.$route.path},on:{select:e.selectTree}},e._l(e.treeData,(function(t,o){return a("el-menu-item",{key:o,attrs:{index:t.path},on:{click:function(a){return e.clickEvent(t.path)}}},[e._v(e._s(t.title))])})),1):e._e(),a("div",{staticClass:"right-view"},[a("router-view",{key:e.$route.params.treeid,ref:"childView",staticClass:"page_base_children"})],1)],1)},It=[],qt="/base/business",Dt={name:"Base",data:function(){return{treeData:[]}},beforeRouteEnter:function(e,t,a){"/base"===e.path?a(qt):a()},beforeRouteLeave:function(e,t,a){qt=t.path,a()},mounted:function(){this.loadData()},methods:{loadData:function(){this.treeData=ce||[]},selectTree:function(e){"/base"===this.$route.path?this.$router.push(qt):this.$router.push({params:{treeid:e}})},clickEvent:function(e){this.$router.replace(e)}}},Ot=Dt,Kt=(a("962d"),Object(w["a"])(Ot,Lt,It,!1,null,null,null)),zt=Kt.exports,jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_base_affinity"},[a("AffinityServer")],1)},Pt=[],Bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_base_affinity"},[a("div",{staticStyle:{float:"right"}},[a("let-button",{attrs:{size:"small",theme:"primary"},on:{click:e.addItem}},[e._v(e._s(e.$t("filter.btn.addNode")))])],1),a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(t){return t.preventDefault(),e.search(t)}}},[a("let-form-item",{attrs:{label:e.$t("filter.title.node")}},[a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue")},model:{value:e.query.NodeName,callback:function(t){e.$set(e.query,"NodeName",t)},expression:"query.NodeName"}},e._l(e.NodeList,(function(t){return a("let-option",{key:t.NodeName,attrs:{value:t.NodeName}},[e._v(e._s(t.NodeName))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("filter.title.app")}},[a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.query.ServerApp,callback:function(t){e.$set(e.query,"ServerApp",t)},expression:"query.ServerApp"}},e._l(e.AppList,(function(t){return a("let-option",{key:t.AppName,attrs:{value:t.AppName}},[e._v(e._s(t.AppName))])})),1)],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.search")))])],1)],1),a("let-table",{ref:"table",attrs:{data:e.items,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:e.$t("filter.title.node")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table_con"},e._l(t.row.NodeName,(function(t){return a("let-tag",{key:t,attrs:{value:t,theme:"success",checked:""}},[e._v(e._s(t))])})),1)]}}])}),a("let-table-column",{attrs:{title:e.$t("filter.title.app"),prop:"ServerApp"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table_con"},[a("let-tag",{attrs:{theme:"success",checked:""}},[e._v(e._s(t.row.ServerApp))])],1)]}}])}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.editItem(t.row)}}},[e._v(e._s(e.$t("operate.update")))])]}}])})],1),a("let-modal",{attrs:{title:this.$t("filter.title.node"),width:"800px"},on:{"on-confirm":e.addServerItem,"on-cancel":e.closeDetailModal},model:{value:e.detailModal.show,callback:function(t){e.$set(e.detailModal,"show",t)},expression:"detailModal.show"}},[e.detailModal.model?a("let-form",{ref:"detailForm",attrs:{itemWidth:"700px"}},[e._v(" "+e._s(e.detailModal.model.NodeName)+" "),a("let-form-item",{attrs:{label:e.$t("filter.title.node"),required:""}},[a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue")},model:{value:e.detailModal.model.NodeName,callback:function(t){e.$set(e.detailModal.model,"NodeName",t)},expression:"detailModal.model.NodeName"}},e._l(e.NodeList,(function(t){return a("let-option",{key:t.NodeName,attrs:{value:t.NodeName}},[e._v(e._s(t.NodeName))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("filter.title.app")}},[a("let-checkbox",{attrs:{value:e.isCheckedAll},model:{value:e.isCheckedAll,callback:function(t){e.isCheckedAll=t},expression:"isCheckedAll"}},[e._v("全选")]),a("div",{staticClass:"checkbox_list"},e._l(e.AppList,(function(t){return a("let-checkbox",{key:t.AppName,staticClass:"checkbox_item",attrs:{value:e.checkBoxAddList.indexOf(t.AppName)>-1},on:{change:function(a){return e.checkedChange(t.AppName)}}},[e._v(e._s(t.AppName))])})),1)],1)],1):e._e()],1)],1)},Rt=[],Ft={name:"BaseAffinityNode",data:function(){return{isCheckedAll:!1,checkBoxAddList:[],checkBoxDelList:[],query:{NodeName:"",ServerApp:""},totalPage:0,pageSize:20,page:1,items:[],AppList:[],NodeList:[],viewModal:{show:!1,model:null},detailModal:{show:!1,model:null,isNew:!1}}},mounted:function(){this.fetchData(),this.getAppList(),this.getNodeList()},watch:{isCheckedAll:function(){var e=this,t=this.isCheckedAll;t?this.AppList.forEach((function(t){-1===e.checkBoxAddList.indexOf(t.AppName)&&e.checkBoxAddList.push(t.AppName),e.checkBoxDelList=[]})):this.AppList.forEach((function(t){-1===e.checkBoxDelList.indexOf(t.AppName)&&e.checkBoxDelList.push(t.AppName),e.checkBoxAddList=[]}))}},methods:{checkedChange:function(e){-1===this.checkBoxAddList.indexOf(e)?(this.checkBoxAddList.push(e),this.checkBoxDelList.splice(this.checkBoxDelList.indexOf(e),1)):(this.checkBoxDelList.push(e),this.checkBoxAddList.splice(this.checkBoxAddList.indexOf(e),1)),0===this.checkBoxAddList.length&&(this.isCheckedAll=!1)},changePage:function(e){this.page=e},fetchData:function(){var e=this,t=this.$refs.table.$loading.show();return this.$ajax.getJSON("/server/api/affinity_list_node",this.query).then((function(a){t.hide(),e.items=a.Data})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},search:function(){this.fetchData()},closeDetailModal:function(){this.$refs.detailForm.resetValid(),this.detailModal.show=!1,this.detailModal.model=null},addItem:function(){this.checkBoxAddList=[],this.detailModal.model={},this.detailModal.show=!0,this.detailModal.isNew=!0},viewItem:function(e){this.viewModal.model=e,this.viewModal.show=!0},editItem:function(e){this.checkBoxAddList=e.ServerApp||[],this.detailModal.model=e,this.detailModal.show=!0,this.detailModal.isNew=!1},addServerItem:function(){var e=this;if(this.$refs.detailForm.validate()){var t=this.detailModal.model,a="/server/api/affinity_add_server",o=this.$Loading.show();this.checkBoxDelList&&this.checkBoxDelList.length>0&&this.$ajax.postJSON("/server/api/affinity_del_server",{NodeName:t.NodeName,ServerApp:this.checkBoxDelList}),this.$ajax.postJSON(a,{NodeName:t.NodeName,ServerApp:this.checkBoxAddList}).then((function(){o.hide(),e.$tip.success(e.$t("common.success")),e.closeDetailModal(),e.fetchData()})).catch((function(t){o.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},removeItem:function(e){var t=this;this.$confirm(this.$t("template.delete.confirmTips"),this.$t("common.alert")).then((function(){var a=t.$Loading.show();t.$ajax.getJSON("/server/api/affinity_del_server",{AppName:e.AppName}).then((function(){a.hide(),t.fetchData().then((function(){t.$tip.success(t.$t("common.success"))}))})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))})).catch((function(){}))},getAppList:function(){var e=this;this.$ajax.getJSON("/server/api/application_select",{}).then((function(t){e.AppList=t.Data}))},getNodeList:function(){var e=this;this.$ajax.getJSON("/server/api/node_select",{}).then((function(t){e.NodeList=t.Data}))}}},Et=Ft,Wt=(a("e59a"),Object(w["a"])(Et,Bt,Rt,!1,null,null,null)),Jt=Wt.exports,Vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_base_affinity"},[a("div",{staticStyle:{float:"right"}},[a("let-button",{attrs:{size:"small",theme:"primary"},on:{click:e.addItem}},[e._v(e._s(e.$t("filter.btn.addServer")))])],1),a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(t){return t.preventDefault(),e.search(t)}}},[a("let-form-item",{attrs:{label:e.$t("filter.title.node")}},[a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue")},model:{value:e.query.NodeName,callback:function(t){e.$set(e.query,"NodeName",t)},expression:"query.NodeName"}},e._l(e.NodeList,(function(t){return a("let-option",{key:t.NodeName,attrs:{value:t.NodeName}},[e._v(e._s(t.NodeName))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("filter.title.app")}},[a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.query.ServerApp,callback:function(t){e.$set(e.query,"ServerApp",t)},expression:"query.ServerApp"}},e._l(e.AppList,(function(t){return a("let-option",{key:t.AppName,attrs:{value:t.AppName}},[e._v(e._s(t.AppName))])})),1)],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.search")))])],1)],1),a("let-table",{ref:"table",attrs:{data:e.items,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:e.$t("filter.title.app")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table_con"},[a("let-tag",{attrs:{theme:"success",checked:""}},[e._v(e._s(t.row.ServerApp))])],1)]}}])}),a("let-table-column",{attrs:{title:e.$t("filter.title.node")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table_con"},e._l(t.row.NodeName,(function(t){return a("let-tag",{key:t,attrs:{value:t,theme:"success",checked:""}},[e._v(e._s(t))])})),1)]}}])}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.editItem(t.row)}}},[e._v(e._s(e.$t("operate.update")))])]}}])})],1),a("let-modal",{attrs:{title:this.$t("filter.title.node"),width:"800px"},on:{"on-confirm":e.addServerItem,"on-cancel":e.closeDetailModal},model:{value:e.detailModal.show,callback:function(t){e.$set(e.detailModal,"show",t)},expression:"detailModal.show"}},[e.detailModal.model?a("let-form",{ref:"detailForm",attrs:{itemWidth:"700px"}},[a("let-form-item",{attrs:{label:e.$t("filter.title.app"),required:""}},[a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue"),required:"","required-tip":e.$t("deployService.form.templateTips")},model:{value:e.detailModal.model.ServerApp,callback:function(t){e.$set(e.detailModal.model,"ServerApp",t)},expression:"detailModal.model.ServerApp"}},e._l(e.AppList,(function(t){return a("let-option",{key:t.AppName,attrs:{value:t.AppName}},[e._v(e._s(t.AppName))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("filter.title.node")}},[a("let-checkbox",{attrs:{value:e.isCheckedAll},model:{value:e.isCheckedAll,callback:function(t){e.isCheckedAll=t},expression:"isCheckedAll"}},[e._v("全选")]),a("div",{staticClass:"checkbox_list"},e._l(e.NodeList,(function(t){return a("let-checkbox",{key:t.NodeName,staticClass:"checkbox_item",attrs:{value:e.checkBoxAddList.indexOf(t.NodeName)>-1},on:{change:function(a){return e.checkedChange(t.NodeName)}}},[e._v(e._s(t.NodeName))])})),1)],1)],1):e._e()],1)],1)},Ht=[],Zt={name:"BaseAffinityServer",data:function(){return{isCheckedAll:!1,checkBoxAddList:[],checkBoxDelList:[],query:{NodeName:"",ServerApp:""},totalPage:0,pageSize:20,page:1,items:[],AppList:[],NodeList:[],ServerAppArr:[],ServerAppStr:"",ServerAppDeleteArr:[],viewModal:{show:!1,model:null},detailModal:{show:!1,model:null,isNew:!1}}},mounted:function(){this.fetchData(),this.getAppList(),this.getNodeList()},watch:{isCheckedAll:function(){var e=this,t=this.isCheckedAll;t?this.NodeList.forEach((function(t){-1===e.checkBoxAddList.indexOf(t.NodeName)&&e.checkBoxAddList.push(t.NodeName),e.checkBoxDelList=[]})):this.NodeList.forEach((function(t){-1===e.checkBoxDelList.indexOf(t.NodeName)&&e.checkBoxDelList.push(t.NodeName),e.checkBoxAddList=[]}))}},methods:{checkedChange:function(e){-1===this.checkBoxAddList.indexOf(e)?(this.checkBoxAddList.push(e),this.checkBoxDelList.splice(this.checkBoxDelList.indexOf(e),1)):(this.checkBoxDelList.push(e),this.checkBoxAddList.splice(this.checkBoxAddList.indexOf(e),1)),0===this.checkBoxAddList.length&&(this.isCheckedAll=!1)},changePage:function(e){this.page=e},fetchData:function(){var e=this,t=this.$refs.table.$loading.show();return this.$ajax.getJSON("/server/api/affinity_list_server",this.query).then((function(a){t.hide(),e.items=a.Data})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},search:function(){this.fetchData()},closeDetailModal:function(){this.$refs.detailForm.resetValid(),this.detailModal.show=!1,this.detailModal.model=null},addItem:function(){this.checkBoxAddList=[],this.detailModal.model={},this.detailModal.show=!0,this.detailModal.isNew=!0},viewItem:function(e){this.viewModal.model=e,this.viewModal.show=!0},editItem:function(e){this.checkBoxAddList=e.NodeName||[],this.detailModal.model=e,this.detailModal.show=!0,this.detailModal.isNew=!1},addServerItem:function(){var e=this;if(this.$refs.detailForm.validate()){var t=this.detailModal.model,a="/server/api/affinity_add_node",o=this.$Loading.show();this.checkBoxDelList&&this.checkBoxDelList.length>0&&this.$ajax.postJSON("/server/api/affinity_del_node",{ServerApp:t.ServerApp,NodeName:this.checkBoxDelList}),this.$ajax.postJSON(a,{ServerApp:t.ServerApp,NodeName:this.checkBoxAddList}).then((function(){o.hide(),e.$tip.success(e.$t("common.success")),e.closeDetailModal(),e.fetchData()})).catch((function(t){o.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},removeItem:function(e){var t=this;this.$confirm(this.$t("template.delete.confirmTips"),this.$t("common.alert")).then((function(){var a=t.$Loading.show();t.$ajax.getJSON("/server/api/affinity_del_node",{AppName:e.AppName}).then((function(){a.hide(),t.fetchData().then((function(){t.$tip.success(t.$t("common.success"))}))})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))})).catch((function(){}))},getAppList:function(){var e=this;this.$ajax.getJSON("/server/api/application_select",{}).then((function(t){e.AppList=t.Data}))},getNodeList:function(){var e=this;this.$ajax.getJSON("/server/api/node_select",{}).then((function(t){e.NodeList=t.Data}))}}},Ut=Zt,Gt=(a("dff6"),Object(w["a"])(Ut,Vt,Ht,!1,null,null,null)),Yt=Gt.exports,Qt={name:"BaseAffinity",components:{AffinityNode:Jt,AffinityServer:Yt},data:function(){return{}},mounted:function(){},methods:{}},Xt=Qt,ea=(a("b793"),Object(w["a"])(Xt,jt,Pt,!1,null,null,null)),ta=ea.exports,aa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_base_application"},[a("let-button",{staticStyle:{float:"right"},attrs:{size:"small",theme:"primary"},on:{click:e.addItem}},[e._v(e._s(e.$t("template.btn.addApplication")))]),a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(t){return t.preventDefault(),e.search(t)}}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.AppName,callback:function(t){e.$set(e.query,"AppName",t)},expression:"query.AppName"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.business")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.BusinessName,callback:function(t){e.$set(e.query,"BusinessName",t)},expression:"query.BusinessName"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.search")))])],1)],1),a("let-table",{ref:"table",attrs:{data:e.items,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:e.$t("deployService.form.app"),prop:"AppName",width:"25%"}}),a("let-table-column",{attrs:{title:e.$t("deployService.form.business"),prop:"BusinessName",width:"25%"}}),a("let-table-column",{attrs:{title:e.$t("deployService.form.appMark"),prop:"appMark"}}),a("let-table-column",{attrs:{title:e.$t("serverList.table.th.createTime"),prop:"CreateTime"}}),a("let-table-column",{attrs:{title:e.$t("serverList.table.th.createPerson"),prop:"CreatePerson"}}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.editItem(t.row)}}},[e._v(e._s(e.$t("operate.update")))]),a("let-table-operation",{on:{click:function(a){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("operate.delete")))])]}}])})],1),a("div",{staticStyle:{overflow:"hidden"}},[a("let-pagination",{staticStyle:{float:"right"},attrs:{align:"right",page:e.pagination.page,total:e.pagination.total},on:{change:e.gotoPage}})],1),a("let-modal",{attrs:{title:e.$t("template.view.title"),width:"800px"},model:{value:e.viewModal.show,callback:function(t){e.$set(e.viewModal,"show",t)},expression:"viewModal.show"}},[e.viewModal.model?a("pre",[e._v(e._s(e.viewModal.model.TemplateContent))]):e._e(),a("div",{attrs:{slot:"foot"},slot:"foot"})]),a("let-modal",{attrs:{title:e.detailModal.isNew?this.$t("dialog.title.add"):this.$t("dialog.title.edit"),width:"800px"},on:{"on-confirm":e.saveItem,"on-cancel":e.closeDetailModal},model:{value:e.detailModal.show,callback:function(t){e.$set(e.detailModal,"show",t)},expression:"detailModal.show"}},[e.detailModal.model?a("let-form",{ref:"detailForm",attrs:{itemWidth:"700px"}},[a("let-form-item",{attrs:{label:e.$t("deployService.form.app"),required:""}},[a("let-input",{attrs:{disabled:!e.detailModal.isNew,size:"small",placeholder:e.$t("deployService.form.placeholder"),required:"","required-tip":e.$t("deployService.form.appTips"),pattern:"^[a-zA-Z]+$","pattern-tip":e.$t("deployService.form.placeholder")},model:{value:e.detailModal.model.AppName,callback:function(t){e.$set(e.detailModal.model,"AppName",t)},expression:"detailModal.model.AppName"}})],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.business")}},[a("let-select",{attrs:{size:"small",placeholder:e.$t("pub.dlg.defaultValue")},model:{value:e.detailModal.model.BusinessName,callback:function(t){e.$set(e.detailModal.model,"BusinessName",t)},expression:"detailModal.model.BusinessName"}},e._l(e.BusinessList,(function(t){return a("let-option",{key:t.BusinessName,attrs:{value:t.BusinessName}},[e._v(e._s(t.BusinessShow))])})),1)],1),a("let-form-item",{attrs:{label:e.$t("deployService.form.appMark")}},[a("let-input",{attrs:{size:"small"},model:{value:e.detailModal.model.AppMark,callback:function(t){e.$set(e.detailModal.model,"AppMark",t)},expression:"detailModal.model.AppMark"}})],1)],1):e._e()],1)],1)},oa=[],la={name:"BaseApplication",data:function(){return{query:{AppName:"",BusinessName:""},items:[],BusinessList:[],pagination:{page:1,size:10,total:1},viewModal:{show:!1,model:null},detailModal:{show:!1,model:null,isNew:!1}}},mounted:function(){this.fetchData(),this.getBusinessList()},methods:{gotoPage:function(e){this.pagination.page=e,this.fetchData()},fetchData:function(){var e=this,t=this.$refs.table.$loading.show();return this.$ajax.getJSON("/server/api/application_select",Object.assign(this.query,{page:this.pagination.page,size:this.pagination.size})).then((function(a){t.hide(),e.items=a.Data,e.pagination.total=Math.ceil(a.Count.FilterCount/e.pagination.size)})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},search:function(){this.fetchData()},closeDetailModal:function(){this.$refs.detailForm.resetValid(),this.detailModal.show=!1,this.detailModal.model=null},addItem:function(){this.detailModal.model={},this.detailModal.show=!0,this.detailModal.isNew=!0},viewItem:function(e){this.viewModal.model=e,this.viewModal.show=!0},editItem:function(e){this.detailModal.model=e,this.detailModal.show=!0,this.detailModal.isNew=!1},saveItem:function(){var e=this;if(this.$refs.detailForm.validate()){var t=this.detailModal.model,a=this.detailModal.isNew?"/server/api/application_create":"/server/api/application_update",o=this.$Loading.show();this.$ajax.postJSON(a,t).then((function(){o.hide(),e.$tip.success(e.$t("common.success")),e.closeDetailModal(),e.fetchData()})).catch((function(t){o.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},removeItem:function(e){var t=this;this.$confirm(this.$t("template.delete.confirmTips"),this.$t("common.alert")).then((function(){var a=t.$Loading.show();t.$ajax.getJSON("/server/api/application_delete",{AppName:e.AppName}).then((function(){a.hide(),t.fetchData().then((function(){t.$tip.success(t.$t("common.success"))}))})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))})).catch((function(){}))},getBusinessList:function(){var e=this;this.$ajax.getJSON("/server/api/business_select",{}).then((function(t){e.BusinessList=[{BusinessMark:"",BusinessName:"",BusinessOrder:0,BusinessShow:"无",CreatePerson:"",CreateTime:"2019-11-11 11:11:11"}].concat(t.Data)}))}}},ra=la,ia=(a("83e9"),Object(w["a"])(ra,aa,oa,!1,null,null,null)),sa=ia.exports,na=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_base_business"},[a("let-button",{staticStyle:{float:"right"},attrs:{size:"small",theme:"primary"},on:{click:e.addItem}},[e._v(e._s(e.$t("filter.btn.add")))]),a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(t){return t.preventDefault(),e.search(t)}}},[a("let-form-item",{attrs:{label:e.$t("filter.title.business")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.BusinessName,callback:function(t){e.$set(e.query,"BusinessName",t)},expression:"query.BusinessName"}})],1),a("let-form-item",{attrs:{label:e.$t("filter.title.name")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.BusinessShow,callback:function(t){e.$set(e.query,"BusinessShow",t)},expression:"query.BusinessShow"}})],1),a("let-form-item",{attrs:{label:e.$t("filter.title.mark")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.BusinessMark,callback:function(t){e.$set(e.query,"BusinessMark",t)},expression:"query.BusinessMark"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.search")))])],1)],1),a("let-table",{ref:"table",attrs:{data:e.items,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:e.$t("filter.title.business"),prop:"BusinessName",width:"20%"}}),a("let-table-column",{attrs:{title:e.$t("filter.title.name"),prop:"BusinessShow",width:"20%"}}),a("let-table-column",{attrs:{title:e.$t("filter.title.mark"),prop:"BusinessMark",width:"20%"}}),a("let-table-column",{attrs:{title:e.$t("filter.title.order"),prop:"BusinessOrder"}}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.appListItem(t.row)}}},[e._v(e._s(e.$t("table.btn.appList")))]),a("let-table-operation",{on:{click:function(a){return e.editItem(t.row)}}},[e._v(e._s(e.$t("operate.update")))]),a("let-table-operation",{on:{click:function(a){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("operate.delete")))])]}}])})],1),a("div",{staticStyle:{overflow:"hidden"}},[a("let-pagination",{staticStyle:{float:"right"},attrs:{align:"right",page:e.pagination.page,total:e.pagination.total},on:{change:e.gotoPage}})],1),a("let-modal",{attrs:{title:e.$t("template.view.title"),width:"800px"},model:{value:e.viewModal.show,callback:function(t){e.$set(e.viewModal,"show",t)},expression:"viewModal.show"}},[e.viewModal.model?a("pre",[e._v(e._s(e.viewModal.model.TemplateContent))]):e._e(),a("div",{attrs:{slot:"foot"},slot:"foot"})]),a("let-modal",{attrs:{title:e.detailModal.isNew?this.$t("dialog.title.add"):this.$t("dialog.title.edit"),width:"800px"},on:{"on-confirm":e.saveItem,"on-cancel":e.closeDetailModal},model:{value:e.detailModal.show,callback:function(t){e.$set(e.detailModal,"show",t)},expression:"detailModal.show"}},[e.detailModal.model?a("let-form",{ref:"detailForm",attrs:{itemWidth:"700px"}},[a("let-form-item",{attrs:{label:e.$t("filter.title.business"),required:""}},[a("let-input",{attrs:{disabled:!e.detailModal.isNew,size:"small",placeholder:e.$t("deployService.form.placeholder"),required:""},model:{value:e.detailModal.model.BusinessName,callback:function(t){e.$set(e.detailModal.model,"BusinessName",t)},expression:"detailModal.model.BusinessName"}})],1),a("let-form-item",{attrs:{label:e.$t("filter.title.name"),required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("deployService.form.placeholder"),required:""},model:{value:e.detailModal.model.BusinessShow,callback:function(t){e.$set(e.detailModal.model,"BusinessShow",t)},expression:"detailModal.model.BusinessShow"}})],1),a("let-form-item",{attrs:{label:e.$t("filter.title.order"),required:""}},[a("let-input",{attrs:{size:"small",type:"number",min:0,max:100,required:""},model:{value:e.detailModal.model.BusinessOrder,callback:function(t){e.$set(e.detailModal.model,"BusinessOrder",t)},expression:"detailModal.model.BusinessOrder"}})],1),a("let-form-item",{attrs:{label:e.$t("filter.title.mark")}},[a("let-input",{attrs:{size:"small"},model:{value:e.detailModal.model.BusinessMark,callback:function(t){e.$set(e.detailModal.model,"BusinessMark",t)},expression:"detailModal.model.BusinessMark"}})],1)],1):e._e()],1),a("let-modal",{attrs:{title:e.AppModal.isNew?this.$t("dialog.title.add"):this.$t("dialog.title.edit"),width:"800px"},on:{"on-confirm":e.appListSaveItem,"on-cancel":e.closeAppModal},model:{value:e.AppModal.show,callback:function(t){e.$set(e.AppModal,"show",t)},expression:"AppModal.show"}},[e.AppModal.model?a("let-form",{ref:"AppForm",attrs:{itemWidth:"700px"}},[a("let-form-item",{attrs:{label:e.$t("filter.title.business"),required:""}},[a("let-input",{attrs:{disabled:!e.AppModal.isNew,size:"small",placeholder:e.$t("deployService.form.placeholder"),required:""},model:{value:e.AppModal.model.BusinessName,callback:function(t){e.$set(e.AppModal.model,"BusinessName",t)},expression:"AppModal.model.BusinessName"}})],1),a("let-form-item",{attrs:{label:e.$t("filter.title.name"),required:""}},[a("let-input",{attrs:{disabled:!e.AppModal.isNew,size:"small",placeholder:e.$t("deployService.form.placeholder"),required:""},model:{value:e.AppModal.model.BusinessShow,callback:function(t){e.$set(e.AppModal.model,"BusinessShow",t)},expression:"AppModal.model.BusinessShow"}})],1),a("let-form-item",{attrs:{label:e.$t("filter.title.app")}},[a("let-checkbox",{attrs:{value:e.isCheckedAll},model:{value:e.isCheckedAll,callback:function(t){e.isCheckedAll=t},expression:"isCheckedAll"}},[e._v("全选")]),a("div",{staticClass:"checkbox_list"},e._l(e.AppList,(function(t){return a("let-checkbox",{key:t.AppName,staticClass:"checkbox_item",attrs:{value:e.checkBoxAddList.indexOf(t.AppName)>-1},on:{change:function(a){return e.checkedChange(t.AppName)}}},[e._v(e._s(t.AppName))])})),1)],1)],1):e._e()],1)],1)},da=[],ca={name:"BaseBusiness",data:function(){return{isCheckedAll:!1,checkBoxAddList:[],checkBoxDelList:[],query:{BusinessName:"",BusinessShow:"",BusinessMark:""},items:[],AppList:[],pagination:{page:1,size:10,total:1},viewModal:{show:!1,model:null},detailModal:{show:!1,model:null,isNew:!1},AppServerArr:[],AppServerStr:"",AppServerDeleteArr:[],AppModal:{show:!1,model:null,isNew:!1}}},mounted:function(){this.fetchData()},watch:{isCheckedAll:function(){var e=this,t=this.isCheckedAll;t?this.AppList.forEach((function(t){-1===e.checkBoxAddList.indexOf(t.AppName)&&e.checkBoxAddList.push(t.AppName),e.checkBoxDelList=[]})):this.AppList.forEach((function(t){-1===e.checkBoxDelList.indexOf(t.AppName)&&e.checkBoxDelList.push(t.AppName),e.checkBoxAddList=[]}))}},methods:{checkedChange:function(e){-1===this.checkBoxAddList.indexOf(e)?(this.checkBoxAddList.push(e),this.checkBoxDelList.splice(this.checkBoxDelList.indexOf(e),1)):(this.checkBoxDelList.push(e),this.checkBoxAddList.splice(this.checkBoxAddList.indexOf(e),1)),0===this.checkBoxAddList.length&&(this.isCheckedAll=!1)},gotoPage:function(e){this.pagination.page=e,this.fetchData()},fetchData:function(){var e=this,t=this.$refs.table.$loading.show();return this.$ajax.getJSON("/server/api/business_select",Object.assign(this.query,{page:this.pagination.page,size:this.pagination.size})).then((function(a){t.hide(),e.items=a.Data,e.pagination.total=Math.ceil(a.Count.FilterCount/e.pagination.size)})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},search:function(){this.fetchData()},closeDetailModal:function(){this.$refs.detailForm.resetValid(),this.detailModal.show=!1,this.detailModal.model=null},closeAppModal:function(){this.$refs.AppForm.resetValid(),this.AppModal.show=!1,this.AppModal.model=null},addItem:function(){this.checkBoxAddList=[],this.detailModal.model={},this.detailModal.show=!0,this.detailModal.isNew=!0},viewItem:function(e){this.viewModal.model=e,this.viewModal.show=!0},editItem:function(e){this.checkBoxAddList=e.AppServer||[],this.detailModal.model=e,this.detailModal.show=!0,this.detailModal.isNew=!1},saveItem:function(){var e=this;if(this.$refs.detailForm.validate()){var t=this.detailModal.model,a=this.detailModal.isNew?"/server/api/business_create":"/server/api/business_update",o=this.$Loading.show();this.$ajax.postJSON(a,t).then((function(){o.hide(),e.$tip.success(e.$t("common.success")),e.closeDetailModal(),e.fetchData()})).catch((function(t){o.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},removeItem:function(e){var t=this;this.$confirm(this.$t("template.delete.confirmTips"),this.$t("common.alert")).then((function(){var a=t.$Loading.show();t.$ajax.getJSON("/server/api/business_delete",{BusinessName:e.BusinessName}).then((function(){a.hide(),t.fetchData().then((function(){t.$tip.success(t.$t("common.success"))}))})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))})).catch((function(){}))},getAppList:function(){var e=this;this.$ajax.getJSON("/server/api/application_select",{isAll:!0}).then((function(t){e.AppList=t.Data}))},appListItem:function(e){var t=this;this.getAppList();var a=this.$refs.table.$loading.show();return this.$ajax.postJSON("/server/api/business_list_app",{BusinessName:[e.BusinessName]}).then((function(e){a.hide(),t.appListEditItem(e)})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))},appListEditItem:function(e){this.checkBoxAddList=e.App||[],this.AppModal.model=e,this.AppModal.show=!0,this.AppModal.isNew=!1},appListSaveItem:function(){var e=this;if(this.$refs.AppForm.validate()){var t=this.AppModal.model,a=(this.AppModal.isNew,"/server/api/business_add_app"),o=this.$Loading.show();this.appListRemoveItem(t),this.checkBoxAddList&&this.checkBoxAddList.length>0?this.$ajax.postJSON(a,{BusinessName:t.BusinessName,AppName:this.checkBoxAddList}).then((function(){o.hide(),e.$tip.success(e.$t("common.success")),e.closeAppModal(),e.fetchData()})).catch((function(t){o.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))})):(o.hide(),this.closeAppModal())}},appListRemoveItem:function(e){this.$Loading.show();this.$ajax.postJSON("/server/api/business_del_app",{BusinessName:e.BusinessName,AppName:this.checkBoxDelList})}}},pa=ca,ma=(a("8215"),Object(w["a"])(pa,na,da,!1,null,null,null)),ua=ma.exports,ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_base_node"},[a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(t){return t.preventDefault(),e.search(t)}}},[a("let-form-item",{attrs:{label:e.$t("filter.title.node")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.NodeName,callback:function(t){e.$set(e.query,"NodeName",t)},expression:"query.NodeName"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.search")))])],1)],1),a("let-table",{ref:"table",attrs:{data:e.items,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{width:"60px"},scopedSlots:e._u([{key:"head",fn:function(t){return[a("let-checkbox",{model:{value:e.isTableCheckedAll,callback:function(t){e.isTableCheckedAll=t},expression:"isTableCheckedAll"}})]}},{key:"default",fn:function(t){return[a("let-checkbox",{on:{change:function(a){return e.tableCheckChange(t.row)}},model:{value:t.row.isChecked,callback:function(a){e.$set(t.row,"isChecked",a)},expression:"scope.row.isChecked"}})]}}])}),a("let-table-column",{attrs:{title:e.$t("filter.title.nodeName"),prop:"NodeName"}}),a("let-table-column",{attrs:{title:e.$t("filter.title.nodeAbility")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.NodeAbility.join(",")))]}}])}),a("let-table-column",{attrs:{title:e.$t("filter.title.nodePublic")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-switch",{on:{change:function(a){return e.changeStatus(t.row)}},model:{value:t.row.NodePublic,callback:function(a){e.$set(t.row,"NodePublic",a)},expression:"scope.row.NodePublic"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("关")])])]}}])}),a("let-table-column",{attrs:{title:e.$t("filter.title.nodeAddress")},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.NodeAddress,(function(t){return a("div",{key:t.NodeName},[e._v(e._s(t))])}))}}])}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.viewItem(t.row)}}},[e._v(e._s(e.$t("operate.view")))])]}}])})],1),a("div",{staticStyle:{overflow:"hidden"}},[a("let-pagination",{staticStyle:{float:"right"},attrs:{align:"right",page:e.pagination.page,total:e.pagination.total},on:{change:e.gotoPage}})],1),a("let-modal",{attrs:{title:e.$t("cfg.msg.viewContent"),width:"800px"},model:{value:e.viewModal.show,callback:function(t){e.$set(e.viewModal,"show",t)},expression:"viewModal.show"}},[e.viewModal.model?a("pre",[e._v(e._s(e.viewModal.model.NodInfo))]):e._e(),a("div",{attrs:{slot:"foot"},slot:"foot"})]),a("let-modal",{attrs:{title:e.detailModal.isNew?this.$t("dialog.title.add"):this.$t("dialog.title.edit"),width:"800px"},on:{"on-confirm":e.saveItem,"on-cancel":e.closeDetailModal},model:{value:e.detailModal.show,callback:function(t){e.$set(e.detailModal,"show",t)},expression:"detailModal.show"}},[e.detailModal.model?a("let-form",{ref:"detailForm",attrs:{itemWidth:"700px"}},[a("let-form-item",{attrs:{label:e.$t("filter.title.node"),required:""}},[e.detailModal.isNew?[a("let-checkbox",{attrs:{value:e.isCheckedAll},model:{value:e.isCheckedAll,callback:function(t){e.isCheckedAll=t},expression:"isCheckedAll"}},[e._v("全选")]),a("div",{staticClass:"node_list"},e._l(e.NodeList,(function(t){return a("let-checkbox",{key:t,staticClass:"node_item",attrs:{value:e.NodeListArr.indexOf(t)>-1},on:{change:function(a){return e.checkedChange(t)}}},[e._v(e._s(t))])})),1)]:[a("let-input",{attrs:{disabled:"",size:"small",placeholder:e.$t("deployService.form.placeholder"),required:""},model:{value:e.detailModal.model.NodeName,callback:function(t){e.$set(e.detailModal.model,"NodeName",t)},expression:"detailModal.model.NodeName"}})]],2)],1):e._e()],1)],1)},va=[],fa={name:"BaseBusiness",data:function(){return{isCheckedAll:!1,query:{NodeName:"",NodeMark:""},items:[],pagination:{page:1,size:10,total:1},NodeList:[],NodeListArr:[],AppServerStr:"",viewModal:{show:!1,model:null},detailModal:{show:!1,model:null,isNew:!1},isTableCheckedAll:!1,tableCheckedList:[]}},mounted:function(){this.fetchData(),this.getNodeList()},watch:{isCheckedAll:function(){var e=this,t=this.isCheckedAll;t?this.NodeList.forEach((function(t){-1===e.NodeListArr.indexOf(t)&&e.NodeListArr.push(t)})):this.NodeListArr=[]},isTableCheckedAll:function(){var e=this.isTableCheckedAll;this.items.forEach((function(t){t.isChecked=e})),this.tableCheckedList=e?[].concat(this.items):[]}},methods:{changeStatus:function(e){e.NodePublic?this.startData(e.NodeName):this.stopData(e.NodeName)},checkedChange:function(e){this.NodeListArr.indexOf(e)>-1?this.NodeListArr.splice(this.NodeListArr.indexOf(e),1):this.NodeListArr.push(e),0===this.NodeListArr.length&&(this.isCheckedAll=!1)},tableCheckChange:function(e){this.tableCheckedList.indexOf(e)>-1?this.tableCheckedList.splice(this.tableCheckedList.indexOf(e),1):this.tableCheckedList.push(e),0===this.tableCheckedList.length&&(this.isTableCheckedAll=!1)},gotoPage:function(e){this.pagination.page=e,this.getServerList()},fetchData:function(){var e=this,t=this.$refs.table.$loading.show();return this.$ajax.getJSON("/server/api/node_select",Object.assign(this.query,{page:this.pagination.page,size:this.pagination.size})).then((function(a){t.hide(),a&&a.Data&&a.Data.forEach((function(e){e.isChecked=!1})),e.items=a.Data,e.pagination.total=Math.ceil(a.Count.FilterCount/e.pagination.size)})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},search:function(){this.fetchData()},closeDetailModal:function(){this.$refs.detailForm.resetValid(),this.detailModal.show=!1,this.detailModal.model=null},addItem:function(){this.detailModal.model={},this.detailModal.show=!0,this.detailModal.isNew=!0},viewItem:function(e){this.viewModal.model=e,this.viewModal.show=!0},editItem:function(e){this.detailModal.model=e,this.detailModal.show=!0,this.detailModal.isNew=!1},startData:function(e){var t=this,a=this.tableCheckedList,o=[];o=e?[e]:a.filter((function(e){return e.isChecked})).map((function(e){return e.NodeName})),this.$ajax.postJSON("/server/api/node_start",{NodeName:o}).then((function(){t.$tip.success(t.$t("common.success")),t.fetchData()})).catch((function(e){t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))},stopData:function(e){var t=this,a=this.tableCheckedList,o=[];o=e?[e]:a.filter((function(e){return e.isChecked})).map((function(e){return e.NodeName})),this.$ajax.postJSON("/server/api/node_stop",{NodeName:o}).then((function(){t.$tip.success(t.$t("common.success")),t.fetchData()})).catch((function(e){t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))},saveItem:function(){var e=this;if(this.$refs.detailForm.validate()){var t=this.detailModal.model,a="/server/api/node_update",o=t.NodeName;this.detailModal.isNew&&(a="/server/api/node_add",o=this.NodeListArr);var l=this.$Loading.show();this.$ajax.postJSON(a,{NodeName:o,NodeMark:t.NodeMark}).then((function(){l.hide(),e.$tip.success(e.$t("common.success")),e.closeDetailModal(),e.fetchData()})).catch((function(t){l.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},removeItem:function(e){var t=this;this.$confirm(this.$t("template.delete.confirmTips"),this.$t("common.alert")).then((function(){var a=t.$Loading.show();t.$ajax.getJSON("/server/api/node_delete",{NodeName:e.NodeName}).then((function(){a.hide(),t.fetchData().then((function(){t.$tip.success(t.$t("common.success"))}))})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))})).catch((function(){}))},getNodeList:function(){var e=this;this.$ajax.getJSON("/server/api/node_list",{}).then((function(t){e.NodeList=t.Data}))}}},Sa=fa,ba=(a("6cfe"),Object(w["a"])(Sa,ha,va,!1,null,null,null)),$a=ba.exports,_a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_gateway"},[e.treeData&&e.treeData.length>0?a("el-menu",{staticClass:"tree",attrs:{"default-active":e.$route.path},on:{select:e.selectTree}},e._l(e.treeData,(function(t,o){return a("el-menu-item",{key:o,attrs:{index:t.path},on:{click:function(a){return e.clickEvent(t.path)}}},[e._v(e._s(t.title))])})),1):e._e(),a("div",{staticClass:"right-view"},[a("router-view",{key:e.$route.params.treeid,ref:"childView",staticClass:"page_gateway_children"})],1)],1)},wa=[],ga="/gateway/station",ya={name:"gateway",data:function(){return{treeData:[]}},beforeRouteEnter:function(e,t,a){"/gateway"===e.path?a(ga):a()},beforeRouteLeave:function(e,t,a){ga=t.path,a()},mounted:function(){this.loadData()},methods:{loadData:function(){this.treeData=pe||[]},selectTree:function(e){"/gateway"===this.$route.path?this.$router.push(ga):this.$router.push({params:{treeid:e}})},clickEvent:function(e){this.$router.replace(e)}}},Ma=ya,ka=(a("8c5f"),Object(w["a"])(Ma,_a,wa,!1,null,null,null)),Na=ka.exports,xa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_gateway_templates"},[a("div",{staticClass:"between"},[a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(t){return t.preventDefault(),e.search(t)}}},[a("let-form-item",{attrs:{label:e.$t("gateway.stationId")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.f_station_id,callback:function(t){e.$set(e.query,"f_station_id",t)},expression:"query.f_station_id"}})],1),a("let-form-item",{attrs:{label:e.$t("gateway.stationName")}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.f_name_cn,callback:function(t){e.$set(e.query,"f_name_cn",t)},expression:"query.f_name_cn"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.search")))])],1)],1),a("let-button",{attrs:{size:"small",theme:"primary"},on:{click:e.addItem}},[e._v(e._s(e.$t("gateway.btn.addGateway")))])],1),a("let-table",{ref:"table",attrs:{data:e.items,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:e.$t("gateway.stationId"),prop:"f_station_id",width:"20%"}}),a("let-table-column",{attrs:{title:e.$t("gateway.stationName"),prop:"f_name_cn",width:"20%"}}),a("let-table-column",{attrs:{title:e.$t("gateway.monitorUrl"),prop:"f_monitor_url",width:"25%"}}),a("let-table-column",{attrs:{title:e.$t("cfg.btn.lastUpdate"),prop:"f_update_time"}}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.viewItem(t.row)}}},[e._v(e._s(e.$t("operate.config")))]),a("let-table-operation",{on:{click:function(a){return e.editItem(t.row)}}},[e._v(e._s(e.$t("operate.update")))]),a("let-table-operation",{on:{click:function(a){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("operate.delete")))])]}}])})],1),a("let-modal",{attrs:{title:(e.viewModal.model?e.viewModal.model.f_name_cn:"")+" "+e.$t("gateway.config.title"),width:"1000px"},model:{value:e.viewModal.show,callback:function(t){e.$set(e.viewModal,"show",t)},expression:"viewModal.show"}},["http"==e.stationMode?a("let-tabs",[a("let-tab-pane",{attrs:{tab:e.$t("gateway.router.title")}},[e.viewModal.model?a("HttpRouter",{attrs:{station:e.viewModal.model}}):e._e()],1),a("let-tab-pane",{attrs:{tab:e.$t("gateway.flowControl.title")}},[e.viewModal.model?a("FlowControl",{attrs:{station:e.viewModal.model}}):e._e()],1),a("let-tab-pane",{attrs:{tab:e.$t("gateway.bwlist.title.black")}},[e.viewModal.model?a("BwList",{attrs:{station:e.viewModal.model,type:"black"}}):e._e()],1),a("let-tab-pane",{attrs:{tab:e.$t("gateway.bwlist.title.white")}},[e.viewModal.model?a("BwList",{attrs:{station:e.viewModal.model,type:"white"}}):e._e()],1)],1):e._e(),"taf"==e.stationMode?a("let-tabs",[a("let-tab-pane",{attrs:{tab:e.$t("gateway.flowControl.title")}},[e.viewModal.model?a("FlowControl",{attrs:{station:e.viewModal.model}}):e._e()],1),a("let-tab-pane",{attrs:{tab:e.$t("gateway.bwlist.title.black")}},[e.viewModal.model?a("BwList",{attrs:{station:e.viewModal.model,type:"black"}}):e._e()],1),a("let-tab-pane",{attrs:{tab:e.$t("gateway.bwlist.title.white")}},[e.viewModal.model?a("BwList",{attrs:{station:e.viewModal.model,type:"white"}}):e._e()],1)],1):e._e(),a("div",{attrs:{slot:"foot"},slot:"foot"})],1),a("let-modal",{attrs:{title:e.detailModal.isNew?this.$t("gateway.add.title"):this.$t("gateway.update.title"),width:"800px"},on:{"on-confirm":e.saveItem,"on-cancel":e.closeDetailModal},model:{value:e.detailModal.show,callback:function(t){e.$set(e.detailModal,"show",t)},expression:"detailModal.show"}},[e.detailModal.model?a("let-form",{ref:"detailForm",attrs:{itemWidth:"700px"}},[a("let-form-item",{attrs:{label:e.$t("gateway.stationId"),required:""}},[a("let-radio",{attrs:{label:"http"},model:{value:e.stationMode,callback:function(t){e.stationMode=t},expression:"stationMode"}},[e._v("http")]),a("let-radio",{attrs:{label:"taf"},model:{value:e.stationMode,callback:function(t){e.stationMode=t},expression:"stationMode"}},[e._v("taf")]),"http"==e.stationMode?a("let-input",{attrs:{size:"small",placeholder:e.$t("gateway.add.idFormatTips"),required:"","required-tip":e.$t("gateway.add.idFormatTips"),pattern:"^[a-zA-Z](([a-zA-Z_0-9](?<!obj|Obj))+)?$","pattern-tip":e.$t("gateway.add.idFormatTips")},model:{value:e.detailModal.model.f_station_id,callback:function(t){e.$set(e.detailModal.model,"f_station_id",t)},expression:"detailModal.model.f_station_id"}}):e._e(),"taf"==e.stationMode?a("ServantSelector",{model:{value:e.detailModal.model.f_station_id,callback:function(t){e.$set(e.detailModal.model,"f_station_id",t)},expression:"detailModal.model.f_station_id"}}):e._e()],1),a("let-form-item",{attrs:{label:e.$t("gateway.stationName"),required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("gateway.add.stationNameTips"),required:"","required-tip":e.$t("gateway.add.stationNameTips"),"pattern-tip":e.$t("gateway.add.stationNameTips")},model:{value:e.detailModal.model.f_name_cn,callback:function(t){e.$set(e.detailModal.model,"f_name_cn",t)},expression:"detailModal.model.f_name_cn"}})],1),a("let-form-item",{attrs:{label:e.$t("gateway.monitorUrl")}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("gateway.add.monitorUrlTips"),"pattern-tip":e.$t("gateway.add.monitorUrlTips")},model:{value:e.detailModal.model.f_monitor_url,callback:function(t){e.$set(e.detailModal.model,"f_monitor_url",t)},expression:"detailModal.model.f_monitor_url"}})],1)],1):e._e()],1)],1)},Aa=[],Ta=(a("8a79"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("let-form",{ref:"detailForm",attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(t){return t.preventDefault(),e.addItem(t)}}},[a("let-form-item",{attrs:{label:"IP",required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("gateway.bwlist.ipTip"),required:"","required-tip":e.$t("gateway.bwlist.ipTip"),pattern:"^(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|[1-9]|\\*)\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d|\\*)\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d|\\*)\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d|\\*)$","pattern-tip":e.$t("gateway.bwlist.ipTip")},model:{value:e.form.f_ip,callback:function(t){e.$set(e.form,"f_ip",t)},expression:"form.f_ip"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.add")))])],1),a("let-form-item")],1),a("let-table",{ref:"table",attrs:{data:e.items,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:"IP",prop:"f_ip",width:"300px"}}),a("let-table-column",{attrs:{title:e.$t("cfg.btn.lastUpdate"),prop:"f_update_time"}}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("operate.delete")))])]}}])})],1)],1)}),Ca=[],La={name:"BwList",data:function(){return{station:{f_station_id:""},type:"black",items:[],form:{f_ip:""}}},methods:{fetchData:function(){var e=this;return this.$ajax.getJSON("/server/api/bwlist",{f_station_id:this.station.f_station_id,type:this.type}).then((function(t){e.items=t})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},addItem:function(){var e=this;if(this.$refs.detailForm.validate()){var t=this.form;t.f_station_id=this.station.f_station_id,t.type=this.type;var a="/server/api/add_bwlist",o=this.$Loading.show();this.$ajax.postJSON(a,t).then((function(){o.hide(),e.$tip.success(e.$t("common.success")),e.form.f_ip="",e.fetchData()})).catch((function(t){o.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},removeItem:function(e){var t=this;this.$confirm(this.$t("gateway.delete.bwListConfirmTips"),this.$t("common.alert")).then((function(){var a=t.$Loading.show();t.$ajax.postJSON("/server/api/delete_bwlist",{f_id:e.f_id,type:t.type}).then((function(){a.hide(),t.fetchData().then((function(){t.$tip.success(t.$t("common.success"))}))})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))})).catch((function(){}))}},watch:{station:function(){this.items=[],this.fetchData()}},mounted:function(){this.fetchData()}},Ia=La,qa=Object(w["a"])(Ia,Ta,Ca,!1,null,"0f65700e",null),Da=qa.exports,Oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("let-form",{ref:"detailForm",attrs:{itemWidth:"200px"},nativeOn:{submit:function(t){return t.preventDefault(),e.saveItem(t)}}},[a("let-form-item",{attrs:{label:e.$t("gateway.flowControl.duration"),required:""}},[a("let-input",{attrs:{size:"small",type:"number",disabled:!e.editing,placeholder:e.$t("gateway.flowControl.durationTip"),required:"","required-tip":e.$t("gateway.flowControl.durationTip"),pattern:"^\\d+$","pattern-tip":e.$t("gateway.flowControl.durationTip")},model:{value:e.form.f_duration,callback:function(t){e.$set(e.form,"f_duration",t)},expression:"form.f_duration"}})],1),a("let-form-item",{attrs:{label:e.$t("gateway.flowControl.maxFlow"),required:""}},[a("let-input",{attrs:{size:"small",type:"number",disabled:!e.editing,placeholder:e.$t("gateway.flowControl.maxFlowTip"),required:"","required-tip":e.$t("gateway.flowControl.maxFlowTip"),pattern:"^\\d+$","pattern-tip":e.$t("gateway.flowControl.maxFlowTip")},model:{value:e.form.f_max_flow,callback:function(t){e.$set(e.form,"f_max_flow",t)},expression:"form.f_max_flow"}})],1),a("let-form-item",[e.editing?e._e():a("let-button",{attrs:{size:"small",type:"button",theme:"primary"},on:{click:function(t){t.preventDefault(),e.editing=!0}}},[e._v(e._s(e.$t("operate.modify")))]),e.editing?a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.save")))]):e._e()],1),a("let-form-item")],1)],1)},Ka=[],za={name:"FlowControl",props:{station:{type:Object,required:!0}},data:function(){return{form:{f_duration:60,f_max_flow:0},editing:!1}},methods:{fetchData:function(){var e=this;return this.$ajax.getJSON("/server/api/get_flowcontrol",{f_station_id:this.station.f_station_id}).then((function(t){e.form=t.f_duration?t:{f_duration:60,f_max_flow:0}})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},saveItem:function(){var e=this;if(this.$refs.detailForm.validate()){var t=this.form;t.f_station_id=this.station.f_station_id;var a="/server/api/upsert_flowcontrol",o=this.$Loading.show();this.$ajax.postJSON(a,t).then((function(){o.hide(),e.$tip.success(e.$t("common.success")),e.fetchData(),e.editing=!1})).catch((function(t){o.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}}},watch:{station:function(){this.items=[],this.fetchData()}},mounted:function(){this.fetchData()}},ja=za,Pa=Object(w["a"])(ja,Oa,Ka,!1,null,"ddaa2a26",null),Ba=Pa.exports,Ra=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_operation_templates"},[a("div",{staticClass:"between"},[a("let-button",{attrs:{size:"small",theme:"primary"},on:{click:e.addItem}},[e._v(e._s(e.$t("gateway.btn.addHttpRouter")))])],1),a("let-table",{ref:"table",attrs:{data:e.items,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:e.$t("gateway.serverName"),prop:"f_server_name",width:"20%"}}),a("let-table-column",{attrs:{title:e.$t("gateway.pathRule"),prop:"f_path_rule",width:"20%"}}),a("let-table-column",{attrs:{title:e.$t("gateway.proxyPass"),prop:"f_proxy_pass",width:"25%"}}),a("let-table-column",{attrs:{title:e.$t("cfg.btn.lastUpdate"),prop:"f_update_time",width:"160px"}}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.editItem(t.row)}}},[e._v(e._s(e.$t("operate.update")))]),a("let-table-operation",{on:{click:function(a){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("operate.delete")))])]}}])})],1),a("let-modal",{attrs:{title:e.detailModal.isNew?this.$t("gateway.httpRouter.title"):this.$t("gateway.update.title"),width:"900px"},on:{"on-confirm":e.saveItem,"on-cancel":e.closeDetailModal},model:{value:e.detailModal.show,callback:function(t){e.$set(e.detailModal,"show",t)},expression:"detailModal.show"}},[e.detailModal.model?a("let-form",{ref:"detailForm",attrs:{itemWidth:"700px"}},[a("let-form-item",{attrs:{label:e.$t("gateway.serverName")}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("gateway.add.serverNameTip")},model:{value:e.detailModal.model.f_server_name,callback:function(t){e.$set(e.detailModal.model,"f_server_name",t)},expression:"detailModal.model.f_server_name"}})],1),a("let-form-item",{attrs:{label:e.$t("gateway.pathRule"),required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("gateway.add.pathRuleTip"),required:"","required-tip":e.$t("gateway.add.pathRuleTip"),"pattern-tip":e.$t("gateway.add.pathRuleTip")},model:{value:e.detailModal.model.f_path_rule,callback:function(t){e.$set(e.detailModal.model,"f_path_rule",t)},expression:"detailModal.model.f_path_rule"}})],1),a("let-form-item",{attrs:{label:e.$t("gateway.proxyPass"),required:""}},[a("let-radio",{attrs:{label:"ipport"},model:{value:e.proxypassMode,callback:function(t){e.proxypassMode=t},expression:"proxypassMode"}},[e._v("ip:port")]),a("let-radio",{attrs:{label:"upstream"},model:{value:e.proxypassMode,callback:function(t){e.proxypassMode=t},expression:"proxypassMode"}},[e._v("upstream")]),a("let-radio",{attrs:{label:"taf"},model:{value:e.proxypassMode,callback:function(t){e.proxypassMode=t},expression:"proxypassMode"}},[e._v("taf")]),"ipport"==e.proxypassMode?a("let-input",{attrs:{size:"small",placeholder:e.$t("gateway.add.proxyPassTip"),pattern:"^(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|[1-9])\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d)\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d)\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d):\\d+$",required:"","required-tip":e.$t("gateway.add.proxyPassTip"),"pattern-tip":e.$t("gateway.add.proxyPassTip")},model:{value:e.detailModal.model.f_proxy_pass,callback:function(t){e.$set(e.detailModal.model,"f_proxy_pass",t)},expression:"detailModal.model.f_proxy_pass"}}):e._e(),"upstream"==e.proxypassMode?a("div",{staticClass:"set_upstream"},[a("let-select",{attrs:{size:"small",filterable:""},model:{value:e.detailModal.model.f_proxy_pass_upstream,callback:function(t){e.$set(e.detailModal.model,"f_proxy_pass_upstream",t)},expression:"detailModal.model.f_proxy_pass_upstream"}},e._l(e.upstreams,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1),a("let-input",{attrs:{size:"small",placeholder:"/some/path",pattern:"^\\/","pattern-tip":"/some/path"},model:{value:e.detailModal.model.f_proxy_pass_path,callback:function(t){e.$set(e.detailModal.model,"f_proxy_pass_path",t)},expression:"detailModal.model.f_proxy_pass_path"}})],1):e._e(),"taf"==e.proxypassMode&&e.detailModal.model?a("ServantSelector",{model:{value:e.detailModal.model.f_proxy_pass,callback:function(t){e.$set(e.detailModal.model,"f_proxy_pass",t)},expression:"detailModal.model.f_proxy_pass"}}):e._e()],1)],1):e._e()],1)],1)},Fa=[],Ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"select_wrapper"},[a("let-select",{staticClass:"select_item select_app",attrs:{size:"small",title:e.application},on:{change:function(t){return e.changeSelect("application")}},model:{value:e.application,callback:function(t){e.application=t},expression:"application"}},e._l(e.applications,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1),a("let-select",{staticClass:"select_item select_server",attrs:{size:"small",title:e.server_name},on:{change:function(t){return e.changeSelect("server_name")}},model:{value:e.server_name,callback:function(t){e.server_name=t},expression:"server_name"}},e._l(e.serverNames,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1),a("let-select",{staticClass:"select_item  select_obj",attrs:{size:"small",title:e.obj},on:{change:function(t){return e.changeSelect("obj")}},model:{value:e.obj,callback:function(t){e.obj=t},expression:"obj"}},e._l(e.objs,(function(t){return a("let-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)},Wa=[],Ja={name:"ServantSelector",model:{prop:"servant",event:"input"},props:{servant:String},data:function(){return{applications:[],serverNames:[],objs:[],application:"",server_name:"",obj:""}},methods:{changeSelect:function(e){var t=this;switch(e){case"application":this.serverNames=[],this.application&&this.getCascadeSelectServer({level:2,application:this.application},this.$t("common.error")).then((function(e){t.serverNames=e,t.serverNames.indexOf(t.server_name)<0&&(t.server_name="")}));break;case"server_name":this.objs=[],this.server_name&&this.getCascadeSelectServer({level:5,application:this.application,server_name:this.server_name},this.$t("common.error")).then((function(e){t.objs=e.map((function(e){return e.split(".").slice(-1)[0]})),t.objs.indexOf(t.obj)<0&&(t.obj="")}));break;case"obj":this.obj&&this.$emit("input","".concat(this.application,".").concat(this.server_name,".").concat(this.obj));break;default:break}},getCascadeSelectServer:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.$t("common.error");return this.$ajax.getJSON("/server/api/cascade_select_server",e).then((function(e){return e})).catch((function(e){t.$tip.error("".concat(a,": ").concat(e.message||e.err_msg))}))},initData:function(){if(this.servant){var e=this.servant.split(".");this.application=e[0]||"",this.server_name=e[1]||"",this.obj=e[2]||""}}},mounted:function(){var e=this;this.initData(),this.getCascadeSelectServer({level:1},this.$t("common.error")).then((function(t){e.applications=t}))},watch:{servant:function(){this.initData()}}},Va=Ja,Ha=(a("ad4e"),Object(w["a"])(Va,Ea,Wa,!1,null,"2c87c7ee",null)),Za=Ha.exports,Ua=/(obj|Obj)$/,Ga=/^(1\d{2}|2[0-4]\d|25[0-5]|[1-9]\d|[1-9])\.(1\d{2}|2[0-4]\d|25[0-5]|[1-9]\d|\d)\.(1\d{2}|2[0-4]\d|25[0-5]|[1-9]\d|\d)\.(1\d{2}|2[0-4]\d|25[0-5]|[1-9]\d|\d):\d+$/,Ya=/^http:\/\//,Qa={name:"HttpRouter",components:{ServantSelector:Za},props:{station:{type:Object,required:!0}},data:function(){return{items:[],upstreams:[],proxypassMode:"ipport",detailModal:{show:!1,model:null,isNew:!1}}},mounted:function(){this.fetchData(),this.fetchUpstreams()},methods:{fetchData:function(){var e=this,t=this.$refs.table.$loading.show();return this.$ajax.getJSON("/server/api/httprouter_list",{f_station_id:this.station.f_station_id}).then((function(a){t.hide(),e.items=a})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},fetchUpstreams:function(){var e=this;return this.$ajax.getJSON("/server/api/upstream_list").then((function(t){e.upstreams=t.map((function(e){return e.f_upstream}))})).catch((function(t){e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},search:function(){this.fetchData()},closeDetailModal:function(){this.$refs.detailForm.resetValid(),this.detailModal.show=!1,this.detailModal.model=null},addItem:function(){this.detailModal.model={},this.detailModal.show=!0,this.detailModal.isNew=!0},editItem:function(e){e=Object.assign({},e),this.detailModal.model=e,this.detailModal.show=!0,this.detailModal.isNew=!1,e.f_proxy_pass=e.f_proxy_pass.replace(Ya,""),this.setProxypassMode(e),"upstream"==this.proxypassMode&&(e.f_proxy_pass_upstream=e.f_proxy_pass.split("/")[0],e.f_proxy_pass_path="/"+(e.f_proxy_pass.split("/")[1]||""),this.$nextTick((function(){document.querySelector(".set_upstream .let-select__filter__input").value=e.f_proxy_pass_upstream})))},setProxypassMode:function(e){Ua.test(e.f_proxy_pass)?this.proxypassMode="taf":Ga.test(e.f_proxy_pass)?this.proxypassMode="ipport":this.proxypassMode="upstream"},saveItem:function(){var e=this;if(this.$refs.detailForm.validate()){var t=this.detailModal.model;t.f_station_id=this.station.f_station_id;var a=t.f_id?"/server/api/update_httprouter":"/server/api/add_httprouter",o=this.$Loading.show(),l=Object.assign({},t);if("upstream"==this.proxypassMode){var r=document.querySelector(".set_upstream .let-select__filter__input").value.trim();l.f_proxy_pass_upstream=r,l.f_proxy_pass="".concat(l.f_proxy_pass_upstream).concat(l.f_proxy_pass_path)}Ya.test(l.f_proxy_pass)||(l.f_proxy_pass="http://"+l.f_proxy_pass),this.$ajax.postJSON(a,l).then((function(){o.hide(),e.$tip.success(e.$t("common.success")),e.closeDetailModal(),e.fetchData()})).catch((function(t){o.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},removeItem:function(e){var t=this;this.$confirm(this.$t("gateway.delete.confirmTips"),this.$t("common.alert")).then((function(){var a=t.$Loading.show();t.$ajax.postJSON("/server/api/delete_httprouter",{f_id:e.f_id}).then((function(){a.hide(),t.fetchData().then((function(){t.$tip.success(t.$t("common.success"))}))})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))})).catch((function(){}))}},watch:{station:function(){this.items=[],this.fetchData()}}},Xa=Qa,eo=(a("ebca"),Object(w["a"])(Xa,Ra,Fa,!1,null,"2eb7be6e",null)),to=eo.exports,ao={name:"Station",components:{BwList:Da,FlowControl:Ba,HttpRouter:to,ServantSelector:Za},data:function(){return{query:{f_station_id:"",f_name_cn:""},items:[],stationMode:"http",viewModal:{show:!1,model:null},detailModal:{show:!1,model:null,isNew:!1}}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this,t=this.$refs.table.$loading.show();return this.$ajax.getJSON("/server/api/station_list",this.query).then((function(a){t.hide(),e.items=a})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},search:function(){this.fetchData()},closeDetailModal:function(){this.$refs.detailForm.resetValid(),this.detailModal.show=!1,this.detailModal.model=null},addItem:function(){this.detailModal.model={},this.detailModal.show=!0,this.detailModal.isNew=!0},viewItem:function(e){this.viewModal.model=e,this.setStationMode(e),this.viewModal.show=!0},editItem:function(e){this.detailModal.model=e,this.setStationMode(e),this.detailModal.show=!0,this.detailModal.isNew=!1},setStationMode:function(e){e.f_station_id.endsWith("obj")||e.f_station_id.endsWith("Obj")?this.stationMode="taf":this.stationMode="http"},saveItem:function(){var e=this;if(this.$refs.detailForm.validate()){var t=this.detailModal.model,a=t.f_id?"/server/api/update_station":"/server/api/add_station",o=this.$Loading.show();this.$ajax.postJSON(a,t).then((function(){o.hide(),e.$tip.success(e.$t("common.success")),e.closeDetailModal(),e.fetchData()})).catch((function(t){o.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},removeItem:function(e){var t=this;this.$confirm(this.$t("gateway.delete.confirmTips"),this.$t("common.alert")).then((function(){var a=t.$Loading.show();t.$ajax.postJSON("/server/api/delete_station",{f_id:e.f_id}).then((function(){a.hide(),t.fetchData().then((function(){t.$tip.success(t.$t("common.success"))}))})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))})).catch((function(){}))}}},oo=ao,lo=(a("0a67"),Object(w["a"])(oo,xa,Aa,!1,null,"d532f70c",null)),ro=lo.exports,io=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_gateway_templates"},[a("div",{staticClass:"between"},[a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(t){return t.preventDefault(),e.search(t)}}},[a("let-form-item",{attrs:{label:"upstream"}},[a("let-input",{attrs:{size:"small"},model:{value:e.query.f_upstream,callback:function(t){e.$set(e.query,"f_upstream",t)},expression:"query.f_upstream"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[e._v(e._s(e.$t("operate.search")))])],1)],1),a("let-button",{attrs:{size:"small",theme:"primary"},on:{click:e.addItem}},[e._v(e._s(e.$t("gateway.btn.addUpstream")))])],1),a("let-table",{ref:"table",attrs:{data:e.items,"empty-msg":e.$t("common.nodata")}},[a("let-table-column",{attrs:{title:"upstream",prop:"f_upstream",width:"20%"}}),a("let-table-column",{attrs:{title:e.$t("gateway.addr"),prop:"f_addr",width:"20%"}}),a("let-table-column",{attrs:{title:e.$t("gateway.weight"),prop:"f_weight"}}),a("let-table-column",{attrs:{title:e.$t("gateway.fusing"),prop:"f_fusing_onoff"}}),a("let-table-column",{attrs:{title:e.$t("cfg.btn.lastUpdate"),prop:"f_update_time"}}),a("let-table-column",{attrs:{title:e.$t("operate.operates"),width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("let-table-operation",{on:{click:function(a){return e.editItem(t.row)}}},[e._v(e._s(e.$t("operate.update")))]),a("let-table-operation",{on:{click:function(a){return e.removeItem(t.row)}}},[e._v(e._s(e.$t("operate.delete")))])]}}])})],1),a("let-modal",{attrs:{title:e.detailModal.isNew?this.$t("gateway.btn.addUpstream"):this.$t("gateway.update.upstream"),width:"800px"},on:{"on-confirm":e.saveItem,"on-cancel":e.closeDetailModal},model:{value:e.detailModal.show,callback:function(t){e.$set(e.detailModal,"show",t)},expression:"detailModal.show"}},[e.detailModal.model?a("let-form",{ref:"detailForm",attrs:{itemWidth:"700px"}},[a("let-form-item",{attrs:{label:"upstream",required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("gateway.add.upstreamFormatTips"),required:"","required-tip":e.$t("gateway.add.upstreamFormatTips"),pattern:"^[a-zA-Z](([a-zA-Z0-9_](?<!obj|Obj))+)?$","pattern-tip":e.$t("gateway.add.upstreamFormatTips")},model:{value:e.detailModal.model.f_upstream,callback:function(t){e.$set(e.detailModal.model,"f_upstream",t)},expression:"detailModal.model.f_upstream"}})],1),a("let-form-item",{attrs:{label:e.$t("gateway.addr"),required:""}},[a("let-input",{attrs:{size:"small",placeholder:e.$t("gateway.add.addrFormatTips"),required:"",pattern:"^(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|[1-9])\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d)\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d)\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d):\\d+$","required-tip":e.$t("gateway.add.addrFormatTips"),"pattern-tip":e.$t("gateway.add.addrFormatTips")},model:{value:e.detailModal.model.f_addr,callback:function(t){e.$set(e.detailModal.model,"f_addr",t)},expression:"detailModal.model.f_addr"}})],1),a("let-form-item",{attrs:{label:e.$t("gateway.weight"),required:""}},[a("let-input",{attrs:{size:"small",type:"number",required:"",pattern:"^\\d+$","required-tip":e.$t("gateway.add.weightFormatTips"),placeholder:e.$t("gateway.add.weightFormatTips"),"pattern-tip":e.$t("gateway.add.weightFormatTips")},model:{value:e.detailModal.model.f_weight,callback:function(t){e.$set(e.detailModal.model,"f_weight",t)},expression:"detailModal.model.f_weight"}})],1),a("let-form-item",{attrs:{label:e.$t("gateway.fusing")}},[a("let-radio",{attrs:{label:1},model:{value:e.detailModal.model.f_fusing_onoff,callback:function(t){e.$set(e.detailModal.model,"f_fusing_onoff",t)},expression:"detailModal.model.f_fusing_onoff"}},[e._v(e._s(e.$t("gateway.fusingOn")))]),a("let-radio",{attrs:{label:0},model:{value:e.detailModal.model.f_fusing_onoff,callback:function(t){e.$set(e.detailModal.model,"f_fusing_onoff",t)},expression:"detailModal.model.f_fusing_onoff"}},[e._v(e._s(e.$t("gateway.fusingOff")))])],1)],1):e._e()],1)],1)},so=[],no={name:"Upstream",data:function(){return{query:{f_upstream:""},items:[],detailModal:{show:!1,model:null,isNew:!1}}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this,t=this.$refs.table.$loading.show();return this.$ajax.getJSON("/server/api/upstream_list",this.query).then((function(a){t.hide(),e.items=a})).catch((function(a){t.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(a.message||a.err_msg))}))},search:function(){this.fetchData()},closeDetailModal:function(){this.$refs.detailForm.resetValid(),this.detailModal.show=!1,this.detailModal.model=null},addItem:function(){this.detailModal.model={f_weight:1,f_fusing_onoff:1},this.detailModal.show=!0,this.detailModal.isNew=!0},viewItem:function(e){this.viewModal.model=e,this.viewModal.show=!0},editItem:function(e){this.detailModal.model=e,this.detailModal.show=!0,this.detailModal.isNew=!1},saveItem:function(){var e=this;if(this.$refs.detailForm.validate()){var t=this.detailModal.model,a=t.f_id?"/server/api/update_upstream":"/server/api/add_upstream",o=this.$Loading.show();this.$ajax.postJSON(a,t).then((function(){o.hide(),e.$tip.success(e.$t("common.success")),e.closeDetailModal(),e.fetchData()})).catch((function(t){o.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))}},removeItem:function(e){var t=this;this.$confirm(this.$t("gateway.delete.upstreamConfirmTips"),this.$t("common.alert")).then((function(){var a=t.$Loading.show();t.$ajax.postJSON("/server/api/delete_upstream",{f_id:e.f_id}).then((function(){a.hide(),t.fetchData().then((function(){t.$tip.success(t.$t("common.success"))}))})).catch((function(e){a.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))})).catch((function(){}))}}},co=no,po=(a("cd42"),Object(w["a"])(co,io,so,!1,null,"dfff758a",null)),mo=po.exports,uo=A["a"].prototype.push;A["a"].prototype.push=function(e){return uo.call(this,e).catch((function(e){return e}))},o["default"].use(A["a"]);var ho=new A["a"]({routes:[{path:"/login",name:"Login",component:D},{path:"/server",name:"Server",component:ie,children:[{path:":treeid/manage",component:z["a"]},{path:":treeid/history",component:ae},{path:":treeid/publish",component:W},{path:":treeid/config",component:J["a"]},{path:":treeid/server-monitor",component:V["a"]},{path:":treeid/property-monitor",component:H["a"]},{path:":treeid/interface-debuger",component:Z["a"]},{path:":treeid/user-manage",component:U["a"]}]},{path:"/operation",name:"Operation",component:fe,redirect:"/operation/deploy",children:[{path:"deploy",component:Ce},{path:"approval",component:ze},{path:"history",component:Ee},{path:"undeploy",component:Ue},{path:"expand",component:ot},{path:"templates",component:dt},{path:"master",component:ft},{path:"image",component:yt},{path:"store",component:Ct}]},{path:"/base",name:"Base",component:zt,redirect:"/base/application",children:[{path:"affinity",component:ta},{path:"application",component:sa},{path:"business",component:ua},{path:"node",component:$a}]},{path:"/gateway",name:"Gateway",component:Na,redirect:"/gateway/station",children:[{path:"station",component:ro},{path:"upstream",component:mo},{path:"bwlist",component:Da}]},{path:"*",redirect:"/login"}],scrollBehavior:function(e,t,a){return{x:0,y:0}}});o["default"].config.productionTip=!1,b["b"].call(void 0).then((function(){new o["default"]({i18n:b["a"],el:"#app",router:ho,components:{App:x},template:"<App/>"})}))},5793:function(e,t,a){},"5a69":function(e,t,a){"use strict";var o=a("90c3"),l=a.n(o);l.a},"5bf1":function(e,t,a){},"6ab2":function(e,t,a){"use strict";var o=a("97e8"),l=a.n(o);l.a},"6cfe":function(e,t,a){"use strict";var o=a("7473"),l=a.n(o);l.a},"70a4":function(e,t,a){},"722f":function(e,t,a){},"734f":function(e,t,a){},7473:function(e,t,a){},8172:function(e,t,a){},8215:function(e,t,a){"use strict";var o=a("5bf1"),l=a.n(o);l.a},"83e9":function(e,t,a){"use strict";var o=a("c775"),l=a.n(o);l.a},"89ca":function(e,t,a){},"8c5f":function(e,t,a){"use strict";var o=a("a2e9"),l=a.n(o);l.a},"90c3":function(e,t,a){},9430:function(e,t,a){"use strict";var o=a("2a97"),l=a.n(o);l.a},"962d":function(e,t,a){"use strict";var o=a("28e5"),l=a.n(o);l.a},"97e8":function(e,t,a){},"997a":function(e,t,a){},"9ce0":function(e,t,a){"use strict";var o=a("f71f"),l=a.n(o);l.a},"9cfa":function(e,t,a){"use strict";var o=a("70a4"),l=a.n(o);l.a},a251:function(e,t,a){"use strict";var o=a("2301"),l=a.n(o);l.a},a2e9:function(e,t,a){},a8f5:function(e,t,a){"use strict";var o=a("734f"),l=a.n(o);l.a},ad4e:function(e,t,a){"use strict";var o=a("722f"),l=a.n(o);l.a},b525:function(e,t,a){"use strict";var o=a("0a4a"),l=a.n(o);l.a},b793:function(e,t,a){"use strict";var o=a("bdf2"),l=a.n(o);l.a},bdf2:function(e,t,a){},c1df:function(e,t,a){"use strict";var o=a("ea4d"),l=a.n(o);l.a},c775:function(e,t,a){},ca5f:function(e,t,a){},cbf2:function(e,t,a){},cc08:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ZDFiOTQyYS0zZWUyLTkxNGQtOTBiYS1iZTVkYzNjOTU1OTAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzY4QUI4NjE2MUUwMTFFQUE2QjFBQzg4RDAwMDRCRDQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzY4QUI4NjA2MUUwMTFFQUE2QjFBQzg4RDAwMDRCRDQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NjEwODNhYzItNzY4Yy02MjRkLWEyYWMtYTFiMTdmOTZhZmZhIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6NzRmMzZhYTgtODFhOC04ZTQ5LWExN2UtMDI2MDYwMWE2ZGMwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+1rWp/gAABUtJREFUeNrsWX9MVVUc/94HT/xVEiqIEgwVZCa0VGrZL1OJRUbRWouIWjUasqHJZq7VP23+mJUV9hudo9LppsV4IZbKVlKmYm7MRiiuhkgs5IGCwft13+1z7j338a7vPnn3wRVtfrcP57377rnnc8/5fH+cgyBJEt1IZqEbzG4SNtsi9S5utbWqHx8HVgOZwMQwxzgGLAH6Q+1QlJsU1gyvA2zAw8Mgy+we4FtgjJmSWA68CbiAVcBkQAgDKcAFIBuoBCJMkQSsjLdr9/4Wu2UYzz/79ILOLLQ/AfnARTyv5MqbcM+wZ3ghb7/iLVvOcsAOSCFiLesIgo1onuQaXgFy68yQxC287ebtO8BKIMbAszcCBZz0j3yGRSY1kF5ldlgrDOPZTMPbeaRhpJkDv8hn/wOQLjCTsG9mPyqKoh/eHie3IRiT0m4eKRjpndw/2MtUgnSu6YkjNcGiaUOw8cB3wDxO+kM0G7jD7wLph0wlfOa8V25beBuiTQX2AwmcNAuZn/GXqQYyhhvWglrpVme4/sLI1gJLeWwuBW4DngUOAYtYGLzeaol0Lo/xmGWRO+FBvgIH1BUYUcIGnS5Yqt7FHBKkXTxGs3ojma/AqDudnuXykCeANEsoOX4rcF04nZ4V8Gjhn6CGDu56WySUl+pFNgPEg70pBnkJ/mOitBT+/wX8UE7H9MukYTTEjbUSPbMoku5ItNCUaIGaz/lklXtfegzFTZYdmRVZXwInR4RwuE635gkrLZuvHS5hivwMVtznzU1W6y25yFrJI8lzo+J0FqiSkWXu8vtfXtqw20Wlnzvo8oAs2zz2Z0edm1ZXOOj7Bg/1O+Tr+TyxXPtM58X4Fy9LFD1RoE1VLuq8pPhw0cdOWjIvgs7bvXS0RZmApnY3zZpuoZQZsu+lAb8Oi7BRK1tupTRolpGVdew3YjdeYu9RT0Af6+BG6gugnqfuKtOjREVJFGVnRlJSnDJM7XEPnbMPHSE/rXWrcmGJpETVuakzXJKtEG1p99In+1zkdBP92RlaOG9s9dJL5U6Kj8ZebXYEvbDMqu4zq0wjPDdRWdftB9z0R3sg0TnxAuU/aKWkWIEGUFH80iTSzvpBefRihnsHiE53eFTC95s6w5P4SUZXXyDZWXECbSkeq70GR5seI9C71e7RKS+b2xSim1+JothJ2mxb9IhVtw8LfemJWkpvPOW792dTCW+udlFDs0i3ThDosfna8xPVCfUsI8miyYyL75RFwGLpClMJ35saQZlpCtGmNm2S6esP7nwXLg3+5kaJb1e+s5z9shHC3UYJ5yxU3GPHITcdO6slbNOJvfIg0Ht9s+j7LqLbxj2+RPWAEcJfGyU853ZFt98cFwN+qzkp0p7DWudq/cdLZduccsTwt1NtkuY0KliU6OOnPzF8dl/nZwmFevldz05joIyZAhVnRdL7NYGev63OQwcbRUqNt9C/TomOnNGvTVLjfQ576mqET5ByzFrIyz31FDPkI6aMmZa7WImYtUBJIA5wrqxzaWJya5cEiLr9X0NKT0a/aTGCJkoE23Gw4yUbJ7qGS6LHqCywe2C1wKvqdw+4Pf+eg3r6JaOlaDXfrAadYbYVX0/KGXE5h2FjJ/kWQaB4FOZLM6dSlNVCwhUboHFjKEC3s2f4XGsxP6toD6Vaewto4DK4G5gQDmkvVvBvu0MmyxbzUcTkmhMiifhcmhNJmQh/Xb0SVexHCu+QKGWaIL8Etw5/sleTxIjHZciDHU0VG+jCSsqsgKuM8DVEHmADeoBeYB+QCqwHDgN9wBFgU7BnCDf/E2qy/SfAAC62Smq8ek9cAAAAAElFTkSuQmCC"},cd42:function(e,t,a){"use strict";var o=a("997a"),l=a.n(o);l.a},dff6:function(e,t,a){"use strict";var o=a("f90c"),l=a.n(o);l.a},e59a:function(e,t,a){"use strict";var o=a("89ca"),l=a.n(o);l.a},ea4d:function(e,t,a){},ea8c:function(e,t,a){"use strict";var o=a("cbf2"),l=a.n(o);l.a},ebca:function(e,t,a){"use strict";var o=a("4508"),l=a.n(o);l.a},f47f:function(e,t,a){"use strict";var o=a("f6ad"),l=a.n(o);l.a},f6ad:function(e,t,a){},f71f:function(e,t,a){},f90c:function(e,t,a){},fc15:function(e,t,a){}});